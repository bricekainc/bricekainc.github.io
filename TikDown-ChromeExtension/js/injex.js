(()=>{"use strict";var e="tik.tok::isDownloaderClosed",t="tik.tok::showFolderPicker",u="tik.tok::disableCelebrationConfetti",n="tik.tok::fullPathTemplates",a="tik.tok::selectedFullPathTemplate",o="tik.tok::tierProgress",r="tik.tok::rateDonateData",l="tik.tok::customDownloaderPosition",i="tik.tok::downloaderPositionType",d="tik.tok::themeMode",s="tik.tok::showButtonPosition",c="tik.tok::showButtonHintSeen",D="tik.tok::scrapperDetails",p="tik.tok::downloads::allTimeCount",F="tik.tok::downloads::weeklyData",m="tik.tok::downloads::leaderboard::allTime",v="tik.tok::downloads::leaderboard::weekly",C="tik.tok::recommendations::allTimeCount",g="tik.tok::recommendations::weeklyData",h="tik.tok::recommendations::leaderboard::allTime",E="tik.tok::recommendations::leaderboard::weekly",f="ttk-downloader-wrapper",A="ttk-downloader-scrapper-container",y="ettpd-show",w="ettpd-download-all-btn",b="modal-overlay-container",B="Easy TikTok Video Downloader",x=[{label:"ğŸŸ¢ Recommended (@folder, all core info)",template:"@/@{authorUsername|:profile:}/{tabName}/{ad}-{authorUsername|no-author}-{createTime|-}-{sequenceNumber}-{desc:100|-}-{videoId:-4|no-id}.mp4",example:B+"/@coolguy/Liked/@coolguy-2025-08-14_0110-1-BEST-BELIEVE-me-this-dude-cooked-6775.mp4",isRecommended:!0},{label:"ğŸ“ Video Flat by Author",template:"videos/{authorUsername|unknown}/{videoId|no-id}.mp4",example:"videos/coolguy/739462775.mp4"},{label:"ğŸ–¼ï¸ Image Series (force numbered)",template:"images/{authorUsername|unknown}/{videoId|no-id}-{sequenceNumber|required}.jpeg",example:"images/coolguy/739462775-1.jpeg"},{label:"ğŸ§  Descriptive (limit desc)",template:"desc_clips/{authorUsername|unknown}/{desc:255|no-desc}-{videoId|no-id}.mp4",example:"desc_clips/coolguy/My-best-clip-ever-739462775.mp4"},{label:"ğŸ“¢ Hashtags Folder (Weird ahh)",template:"hashtags/{hashtags|no-tags}/{videoId|no-id}.mp4",example:"hashtags/fun-relax/739462775.mp4"},{label:"ğŸ¶ Music by Artist",template:"music/{musicAuthor|unknown}/{authorUsername|no-author}-{videoId|no-id}.mp4",example:"music/DJFlow/coolguy-739462775.mp4"},{label:"ğŸ›ï¸ Creative Combo",template:"mix/{musicTitle|untitled}/{authorUsername|unknown}-{desc:20|no-desc}-{sequenceNumber}-{videoId|no-id}.mp4",example:"mix/Chill-Vibes/coolguy-Fun-tiktok-clip-1-739462775.mp4"},{isDefault:!0,label:"ğŸ“¦ Legacy Flat Format",template:"{ad}-@{authorUsername|user}-{tabName}-{createTime|-}-{desc|-}-{videoId|no-id}-{sequenceNumber}.mp4",example:"ad-@coolguy-Videos-2025-08-14_0110-You-cant-make-up-this-sht-739462775-1.mp4"}],S=[{min:10,name:"Smooth Op",emoji:"ğŸ˜"},{min:25,name:"On Fire",emoji:"ğŸ”¥"},{min:50,name:"Clip Connoisseur",emoji:"ğŸ¬"},{min:100,name:"Trend Thief",emoji:"âš¡"},{min:250,name:"Goblin Mode",emoji:"ğŸ§Œ"},{min:500,name:"Demon Time",emoji:"ğŸ‘¹"},{min:1e3,name:"HD Greed",emoji:"ğŸ–¥ï¸"},{min:5e3,name:"Dead King",emoji:"ğŸ’€ğŸ‘‘"},{min:1e4,name:"Ultimate Hoarder",emoji:"ğŸ“¦"},{min:5e4,name:"Cache Cryptid",emoji:"ğŸ¦"},{min:1e5,name:"Downloadlord",emoji:"ğŸ‘‘"},{min:1e6,name:"Data Deity",emoji:"ğŸ’¾"},{min:1e7,name:"Cloud Overlord",emoji:"â˜ï¸"}],k=[{min:1e3,name:"Just Hatched",emoji:"ğŸ¥š"},{min:2e3,name:"Lil Gremlin",emoji:"ğŸ§Œ"},{min:3500,name:"Intern Vibes",emoji:"ğŸªª"},{min:5e3,name:"Feeding",emoji:"ğŸ½ï¸"},{min:7500,name:"Online-ish",emoji:"ğŸ“¶"},{min:1e4,name:"Fed Up",emoji:"ğŸ”"},{min:15e3,name:"Tastebud",emoji:"ğŸ‘…"},{min:25e3,name:"Main Char",emoji:"ğŸ¬"},{min:5e4,name:"Algo Beast",emoji:"ğŸ“¡"},{min:1e5,name:"100K Deep",emoji:"ğŸ•³ï¸"},{min:25e4,name:"Cooked",emoji:"ğŸ”¥"},{min:5e5,name:"No Return",emoji:"ğŸšª"},{min:1e6,name:"Overfed",emoji:"ğŸ¤¯"},{min:25e5,name:"Lost Cause",emoji:"ğŸ§¬"},{min:5e6,name:"Soulbound",emoji:"ğŸ”—"},{min:1e7,name:"Too Online",emoji:"ğŸ’€"},{min:5e7,name:"Pixelated",emoji:"ğŸ“²"},{min:1e8,name:"Touch Grass",emoji:"ğŸŒ±"}],N=["âœ¨ {count} {media} saved. Instant sparkle upgrade.","âš¡ {count} {media} charged up and downloaded.","ğŸ’½ {count} {media} backed up for digital eternity.","ğŸ’ Packed {count} {media} into your download bag.","ğŸ“‚ {count} {media} filed under: certified awesome.","ğŸ•¶ï¸ Coolness level +1 after downloading {count} {media}.","ğŸ§ƒ {count} {media} â€” juicy download vibes.","ğŸ” {count} {media} locked down like Fort Knox.","ğŸš {count} {media} airlifted directly into your downloads.","ğŸ›¸ {count} {media} beamed up and saved locally.","ğŸ¬ {count} {media} directed by You. Produced by Swag.","ğŸ—ƒï¸ {count} {media} safely archived in your stash.","ğŸ’« {count} {media} entered the realm of â€˜mine now'.","ğŸ“¶ {count} {media} downloaded with full bars.","ğŸ {count} {media} â€” mission complete.","ğŸ–¼ï¸ {count} {media} framed in your gallery of wins.","ğŸª„ Like magic! {count} {media} appeared on your device.","ğŸ© {count} {media} â€” sweet, round, and fully downloaded.","ğŸ”Š {count} {media} in. Loud and clear.","ğŸˆ {count} {media} floating into your storage like joy balloons.","ğŸ“¦ Boxed it. Bagged it. {count} {media} now yours.","ğŸ—‚ï¸ Filing complete â€” {count} {media} officially saved.","ğŸ¥¶ {count} {media}? Ice cold download game.","ğŸ“¡ {count} {media} received from the content gods.","ğŸ•ï¸ {count} {media} pitched into your local camp.","ğŸ›¸ {count} {media} abducted into your device. Smooth.","ğŸ’ {count} {media} on top of your digital sundae.","ğŸ–ï¸ Vacation vibes: {count} {media} secured.","ğŸ• {count} {media} served hot and ready. Bon appÃ©tit.","ğŸ§³ {count} {media} packed up. Ready for the journey.","ğŸ€ {count} {media} â€” wrapped, tagged, and delivered.","ğŸ’¿ Burned {count} {media} into your data soul.","ğŸ“² {count} {media} whispered straight into your storage.","ğŸ® {count} {media} unlocked like bonus levels.","ğŸª™ {count} {media} collected. Add to your streak.","ğŸš¢ {count} {media} landed in the download dock.","ğŸ“œ {count} {media} added to your scroll of greatness.","ğŸ¯ {count} {media} bullseyed into your collection.","ğŸ§ {count} {media} â€” tasty, frosted, and downloaded.","ğŸ›°ï¸ Signal locked. {count} {media} received and confirmed.","ğŸ° Jackpot! {count} {media} downloaded in style.","ğŸ’¡ {count} {media} brightening up your file system.","ğŸ¨ {count} {media} added to your personal museum.","ğŸ§© {count} {media} fits perfectly into your collection.","ğŸš¿ Fresh drop! {count} {media} cleaned and downloaded.","ğŸª Orbiting your device now: {count} {media}.","ğŸ“Œ {count} {media} pinned straight to your gallery.","ğŸ’¼ {count} {media} filed under: â€˜Epic Stuff'.","ğŸ•³ï¸ {count} {media} vanished from the web â€” into your device.","ğŸ’¬ No cap. {count} {media} saved flawlessly.",()=>"All downloaded. Go touch grass ğŸŒ±.",()=>"Nice click. Good choice. Powerful energy.",()=>"You're dangerously good at pressing buttons.",()=>"That was elite. Like, top 1% behavior.",()=>"Downloads done. Your storage weeps with joy.",()=>"Mmm. That was smooth. Download smooth.",()=>"If downloads were art, you just made a masterpiece.",()=>"They doubted you. But here you are. Downloaded.",()=>"Somewhere, an angel gets wings for every file you save.",()=>"âœ… Boom. Another win for you.",()=>"You vs. storage: you won. Storage surrendered.",()=>"Low effort, high reward. Vibes immaculate.",()=>"You're carrying the team. What team? Doesn't matter.",()=>"Saved. You can now legally call yourself a collector.",()=>"Need more dopamine? Do it again.",()=>"ğŸ”¥ You're on fire! Not literally. Hopefully.",()=>"Just another day being amazing. No big deal.",()=>"You deserve a raise. Also coffee. Buy yourself one.",()=>"ğŸš¨ Cool download alert. Oh wait, that's you.",()=>"This is what peak performance looks like.",()=>"Yes chef ğŸ‘¨â€ğŸ³ download served.",()=>"Pressing buttons has never looked this good.",()=>"Congrats. You're now the proud parent of pixels.",()=>"You're giving main character downloader energy.",()=>"Would you like a parade too? You earned it.",()=>"ğŸ§‹ Downloads done. Vibes sweet. Boba optional.",()=>"BRB writing a song about your download success.",()=>"Some people dream it. You click it. Iconic.",()=>"Big click. Bigger results. No notes.",()=>"You and downloads? Soulmates.",()=>"ğŸ’… Effortlessly efficient. That's you.",()=>"Yup, another file down. Don't stop now.",()=>"Data gods bless your clicks. Download divine.",()=>"Your disk is now 0.01% happier.",()=>"Don't forget to hydrate after that sick download.",()=>"Go off, digital hoarder. Go off.",()=>"I'd applaud but I'm code. So justâ€¦ *applause sounds*.",()=>"You've unlocked the secret ending. Just kidding. Or am I?",()=>"That download? Clean. Smooth. Fresh. Iconic.",()=>"ğŸŒŠ Wave of downloads. You're surfing it.",()=>"ğŸ› ï¸ Tools used: Finger. Button. Swag.",()=>"ğŸ€ You got the lucky download pixel. Cherish it.",()=>"You're like a download wizard. Staff and all.",()=>"ğŸƒğŸ’¨ You downloaded that like you were late for school.",()=>"Flashback: You clicking download. Present: Victory.",()=>"Ok but seriously. You did that. ğŸ«¡",()=>"Not all heroes wear capes. Some click download.",()=>"The algorithm smiles upon you.",()=>"More downloads than my confidence on a good day.",()=>"âœ¨ Sprinkle some more files in. You've got this.",()=>"Download complete. You've officially entered the matrix."],T=["âœ… Mission complete â€” all posts secured!","ğŸ¯ Done & dusted â€” your haul is ready!","ğŸ“¦ Delivery complete â€” enjoy the goods!","ğŸ Scraper crossed the finish line!","ğŸ”¥ Operation finished â€” clean sweep!","ğŸ’¾ Saved & sealed â€” until next time!","ğŸš€ Downloads wrapped â€” smooth ride!","ğŸ§Š Chill, everything's downloaded.","ğŸ‰ Legendary sweep â€” all yours now.","ğŸŒˆ Scraper rainbowed the whole tab!"],I=["ğŸš€ LEVEL UP: {{emoji}} <b>{{name}}</b>  \n     {{min}}+ recommendations â€” the algo is obsessed with you ğŸ”¥","âœ¨ {{emoji}} {{name}} unlocked  \n     {{min}}+ recs â€” main character energy activated ğŸ¬","ğŸŒªï¸ {{emoji}} {{name}} tier achieved  \n     {{min}}+ recs â€” your feed is pure heat âš¡","ğŸ’ {{emoji}} Welcome to <b>{{name}}</b>  \n     {{min}}+ recs â€” certified GOAT vibes ğŸ","ğŸ“ˆ Milestone reached: {{emoji}} {{name}}  \n     {{min}}+ recommendations delivered to your feed","ğŸ Unlocked: {{emoji}} {{name}}  \n     You've crossed {{min}} recommendations","âœ… Progress update â€” {{emoji}} {{name}}  \n     {{min}}+ recommendations surfaced","ğŸŒ¼ {{emoji}} {{name}} unlocked  \n     {{min}}+ recommendations â€” the feed knows what you love","ğŸŒŸ Nice! {{emoji}} {{name}}  \n     {{min}}+ recommendations found their way to you","ğŸ‰ {{emoji}} {{name}}  \n     {{min}}+ recommendations â€” keep exploring","ğŸ•¹ï¸ GG! {{emoji}} {{name}} tier  \n     {{min}}+ recommendations â€” the RNG favored you ğŸ²","âš”ï¸ Unlock achieved: {{emoji}} {{name}}  \n     {{min}}+ recommendations â€” streak continues","ğŸ† Speedrun vibes â€” {{emoji}} {{name}}  \n     {{min}}+ recommendations secured","ğŸŸï¸ {{emoji}} {{name}} on the board  \n     {{min}}+ recommendations â€” momentum's real","ğŸ¥‡ {{emoji}} {{name}} unlocked  \n     {{min}}+ recommendations â€” keep the pace","ğŸ“£ Big play: {{emoji}} {{name}}  \n     {{min}}+ recommendations â€” crowd goes wild"],P=["â¬‡ï¸ DEMON MODE: {{emoji}} <b>{{name}}</b>  \n     {{min}}+ downloads â€” you're farming bangers ğŸ”¥","ğŸ’¥ {{emoji}} {{name}} unlocked  \n     {{min}}+ downloads â€” zero chill, max sauce ğŸ§ª","ğŸ§² {{emoji}} {{name}}  \n     {{min}}+ downloads â€” you pull heat on demand","ğŸš¨ {{emoji}} {{name}} tier  \n     {{min}}+ downloads â€” certified curator","ğŸ“¦ Milestone: {{emoji}} {{name}}  \n     {{min}}+ downloads added to your library","âœ… Unlocked: {{emoji}} {{name}}  \n     {{min}}+ downloads â€” great collection discipline","ğŸ“ {{emoji}} {{name}} reached  \n     {{min}}+ downloads archived","ğŸŒˆ {{emoji}} {{name}} unlocked  \n     {{min}}+ downloads â€” your stash is looking cozy","ğŸŒŸ {{emoji}} {{name}}  \n     {{min}}+ downloads â€” saved with love","ğŸ€ {{emoji}} {{name}} achieved  \n     {{min}}+ downloads â€” neat and tidy","ğŸ® Loot secured: {{emoji}} {{name}}  \n     {{min}}+ downloads â€” perfect inventory management","ğŸ§± Crafting tier: {{emoji}} {{name}}  \n     {{min}}+ downloads â€” S-tier collector","ğŸ¹ Crit hit! {{emoji}} {{name}}  \n     {{min}}+ downloads â€” stash leveled up","ğŸ† {{emoji}} {{name}} â€” clutch  \n     {{min}}+ downloads â€” trophy cabinet expanding","ğŸ“Š {{emoji}} {{name}}  \n     {{min}}+ downloads â€” numbers don't lie","ğŸ¥ {{emoji}} {{name}} unlocked  \n     {{min}}+ downloads â€” keep the streak alive"];function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e)return t;try{var u=JSON.parse(e);return null==u?t:u}catch(e){return t}}function O(e){var t=Number(e);return!Number.isFinite(t)||t<=0?null:t<1e12?1e3*t:t}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return"true"===localStorage.getItem(e)}catch(e){return t}}function R(e){try{var t=localStorage.getItem(e);return"null"==t?null:t}catch(e){return null}}var j={debug:{active:!0},isLoggedIn:!1,allDirectLinks:[],allItemsEverSeen:{},displayedState:{itemsHash:"",path:""},filters:{likedVideos:!1,favoriteVideos:!1,state:"INIT"},downloadedURLs:[],sessionHasConfirmedDownloads:!1,currentTierProgress:L(localStorage.getItem(o),{downloads:0,recommendations:0}),leaderboard:{newlyConfirmedMedia:[],currentlyUpdating:!1,lastUpdateHash:"",allTimeDownloadsCount:Number(R(p)||0),weekDownloadsData:L(localStorage.getItem(F),{count:0,weekId:"missing"})},recommendationsLeaderboard:{newlyRecommendedUrls:[],currentlyUpdating:!1,lastUpdateHash:"",allTimeRecommendationsCount:Number(localStorage.getItem(C)||0),weekRecommendationsData:L(localStorage.getItem(g),{count:0,weekId:"missing"})},likedVideos:{},downloading:{isActive:!1,isDownloadingAll:!1,pausedAll:!1},ui:{downloaderPositionType:"custom"==R(i)&&R(l)?"custom":"bottom-right",live_ETTPD_CUSTOM_POS:R(l),isPreferenceBoxOpen:!1,isScrapperBoxOpen:!1,isDownloaderClosed:M(e),isRatePopupOpen:!1,isDragging:!1,hasSeenShowButtonHint:M(c),themeMode:R(d)||"system",autoSwipeConfigurations:{nextClickTimeout:null,countdownInterval:null,remainingTime:0}},downloadPreferences:{skipFailedDownloads:!1,skipAds:!0,autoScrollMode:"off",autoScrollModePrev:"",includeCSV:!1,fullPathTemplate:L(localStorage.getItem(a),x.find(e=>e.isDefault)),showFolderPicker:M(t),disableConfetti:M(u)},rateDonate:function(e){var t=L(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return{lastDonatedAt:O(t.lastDonatedAt),lastRatedAt:O(t.lastRatedAt),lastShownAt:O(t.lastShownAt),shownCount:Number.isFinite(t.shownCount)?t.shownCount:0}}(localStorage.getItem(r),{lastDonatedAt:null,lastRatedAt:null,lastShownAt:null,shownCount:0}),scrapperDetails:function(e){var t=L(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),u=e=>{var t=Number(e);return Number.isFinite(t)?t:null};return{locked:!1,scrappingStage:"initiated"!=t.scrappingStage?"completed":t.scrappingStage,paused:"boolean"==typeof t.paused&&t.paused,skipDownloaded:"boolean"==typeof t.skipDownloaded&&t.skipDownloaded,startedAt:u(t.startedAt),lastSuccessfullScrollAt:u(t.lastSuccessfullScrollAt),selectedTab:"initiated"==t.scrappingStage?t.selectedTab:null,selectedCollectionName:"initiated"==t.scrappingStage?t.selectedCollectionName:null,originalPath:"initiated"==t.scrappingStage?t.originalPath:null,originalUsername:"initiated"==t.scrappingStage?t.originalUsername:null,originalCollectionName:"initiated"==t.scrappingStage?t.originalCollectionName:null,scrappedPostsCount:"number"==typeof t.scrappedPostsCount?t.scrappedPostsCount:0,downloadedInBatches:"number"==typeof t.downloadedInBatches?t.downloadedInBatches:0,currentBatch:"number"==typeof t.currentBatch?t.currentBatch:0,isAutoBatchDownloading:!1}}(localStorage.getItem(D),{locked:!1,paused:null,lastSuccessfullScrollAt:null,startedAt:null,selectedTab:null,selectedCollectionName:null,scrappingStage:null,scrappedPostsCount:null,downloadedInBatches:0,currentBatch:0,isAutoBatchDownloading:!1,skipDownloaded:!1})};try{window.AppStateETTVD=j,j.debug.active}catch(e){}const U=j;function _(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function q(e){return function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){_(o,n,a,r,l,"next",e)}function l(e){_(o,n,a,r,l,"throw",e)}r(void 0)})}}var H=null,V=0;function J(e,t){return new Promise((u,n)=>{var a="".concat(Date.now(),"-").concat(Math.random()),o=setTimeout(()=>{window.removeEventListener("message",r),n(new Error("Progress message timeout"))},1e4);function r(t){if(t.source===window){var l=t.data;(null==l?void 0:l.type)==="PROGRESS_RESPONSE_".concat(e)&&(null==l?void 0:l.id)===a&&(clearTimeout(o),window.removeEventListener("message",r),!1===l.success?n(new Error(l.error||"Unknown error")):u(l))}}window.addEventListener("message",r),window.postMessage({type:"PROGRESS_REQUEST_".concat(e),id:a,data:t},"*")})}function z(){return W.apply(this,arguments)}function W(){return(W=q(function*(){try{var e=(yield J("GET",null)).progress||{};return H=e,V=Date.now(),e}catch(e){return{}}})).apply(this,arguments)}function Y(e){return $.apply(this,arguments)}function $(){return($=q(function*(e){try{yield J("SET",{progress:e}),H=e,V=Date.now()}catch(e){throw e}})).apply(this,arguments)}function G(e){return e&&"string"==typeof e?e.toLowerCase().trim():""}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return"";if(null!=t){var u=t+1;return"".concat(e,":").concat(u)}return e}function K(e,t){return Z.apply(this,arguments)}function Z(){return(Z=q(function*(e,t){try{var u,n=G(e);return n&&t&&(null===(u=(H&&V?H:yield z())[n])||void 0===u?void 0:u[t])||[]}catch(e){return[]}})).apply(this,arguments)}function Q(){return Q=q(function*(e,t,u){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var a=G(e);if(!a||!t)return;var o=H&&V?H:yield z();if(o[a]||(o[a]={}),o[a][t]=Array.isArray(u)?u:[],n){var r="_".concat(t,"_url");o[a]._metadata||(o[a]._metadata={}),o[a]._metadata[r]=n}yield Y(o)}catch(e){}}),Q.apply(this,arguments)}function ee(){return ee=q(function*(e,t,u){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var a=G(e);if(!a||!t||!u)return;var o=X(u,n);if(!o)return;var r=H&&V?H:yield z();r[a]||(r[a]={}),r[a][t]||(r[a][t]=[]),r[a][t].includes(o)?(H=r,V=Date.now()):(r[a][t].push(o),yield Y(r),H=r,V=Date.now())}catch(e){}}),ee.apply(this,arguments)}function te(e,t,u){return ue.apply(this,arguments)}function ue(){return ue=q(function*(e,t,u){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{var a,o=G(e);if(!o||!t||!u)return!1;var r=X(u,n);return!!r&&((null===(a=(H&&V?H:yield z())[o])||void 0===a?void 0:a[t])||[]).includes(r)}catch(e){return!1}}),ue.apply(this,arguments)}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=q(function*(){try{return yield z()}catch(e){return{}}})).apply(this,arguments)}function oe(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function re(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),u.push.apply(u,n)}return u}function le(e,t,u){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var u=t.call(e,"string");if("object"!=typeof u)return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):e[t]=u,e}var ie="tik.tok::extensionEnabled",de=null;function se(e){try{localStorage.setItem(ie,e?"true":"false")}catch(e){}de=e}function ce(e){return De.apply(this,arguments)}function De(){return(e=function*(e){var t,u=!1,n=!!e;if("undefined"!=typeof chrome&&null!==(t=chrome.runtime)&&void 0!==t&&t.sendMessage)try{var a,o=yield new Promise(t=>{chrome.runtime.sendMessage({action:"toggleState",enabled:!!e},e=>t(e))});null!==(a=chrome.runtime)&&void 0!==a&&a.lastError||!1===(null==o?void 0:o.success)||(u=!0,n=void 0!==(null==o?void 0:o.enabled)?!!o.enabled:!!e)}catch(e){}if(!u){var r=yield function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"undefined"==typeof window||void 0===window.postMessage?Promise.resolve(null):new Promise(u=>{var n="".concat(Date.now(),"-").concat(Math.random()),a=setTimeout(()=>{window.removeEventListener("message",o),u(null)},8e3);function o(e){if(e.source===window){var t=e.data;"EXT_STATE_RESPONSE"===(null==t?void 0:t.type)&&(null==t?void 0:t.id)===n&&(clearTimeout(a),window.removeEventListener("message",o),u(t))}}window.addEventListener("message",o),window.postMessage(function(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?re(Object(u),!0).forEach(function(t){le(e,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):re(Object(u)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))})}return e}({type:"EXT_STATE_REQUEST",action:e,id:n},t),"*")})}("SET",{enabled:!!e});r&&!1!==r.success&&(u=!0,n=void 0!==r.enabled?!!r.enabled:!!e)}u&&se(n)},De=function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){oe(o,n,a,r,l,"next",e)}function l(e){oe(o,n,a,r,l,"throw",e)}r(void 0)})}).apply(this,arguments);var e}function pe(){if(null!==de)return de;try{var e=localStorage.getItem(ie);if("false"===e)return!1;if("true"===e)return!0}catch(e){}return!0}function Fe(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function me(e){return function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){Fe(o,n,a,r,l,"next",e)}function l(e){Fe(o,n,a,r,l,"throw",e)}r(void 0)})}}(()=>{try{var e;"undefined"!=typeof chrome&&null!==(e=chrome.runtime)&&void 0!==e&&e.onMessage&&chrome.runtime.onMessage.addListener(e=>{"stateBroadcast"===(null==e?void 0:e.action)&&void 0!==e.enabled&&se(!!e.enabled)})}catch(e){}})();var ve=null;function Ce(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4500,n=document.getElementById("ettpd-toast-container");n&&n.remove();var a=document.createElement("div");if(a.id="ettpd-toast-container","dark"===fe()?a.classList.add("ettpd-theme-dark"):a.classList.add("ettpd-theme-classic"),!document.getElementById("ettpd-toast-styles")){var o=document.createElement("style");o.id="ettpd-toast-styles",o.textContent="\n      #ettpd-toast-container {\n        position: fixed;\n        top: 16px;\n        right: 16px;\n        z-index: 100000;\n        max-width: 420px;\n        padding: 12px 16px;\n        border-radius: 12px;\n        background: var(--ettpd-bg-tertiary, #333);\n        color: var(--ettpd-text-primary, #fff);\n        border: 1px solid var(--ettpd-border-color, rgba(0, 0, 0, 0.2));\n        box-shadow: 0 14px 32px var(--ettpd-shadow, rgba(15, 23, 42, 0.45));\n        font-size: 13px;\n        line-height: 1.5;\n        display: grid;\n        grid-template-columns: 1fr auto;\n        column-gap: 12px;\n        row-gap: 4px;\n        align-items: flex-start;\n        animation: slideInRight 0.25s ease-out;\n        pointer-events: auto;\n      }\n\n      #ettpd-toast-container .ettpd-toast-content {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n        min-width: 0;\n      }\n\n      #ettpd-toast-container .ettpd-toast-title {\n        font-weight: 600;\n        font-size: 14px;\n        color: var(--ettpd-text-primary, #fff);\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      #ettpd-toast-container .ettpd-toast-message {\n        color: var(--ettpd-text-secondary, rgba(255, 255, 255, 0.9));\n        font-size: 13px;\n        word-wrap: break-word;\n        overflow-wrap: anywhere;\n      }\n\n      #ettpd-toast-container .ettpd-toast-close {\n        border: none;\n        background: transparent;\n        color: var(--ettpd-text-secondary, rgba(255, 255, 255, 0.8));\n        padding: 0;\n        margin: 0;\n        cursor: pointer;\n        font-size: 16px;\n        line-height: 1;\n      }\n\n      #ettpd-toast-container .ettpd-toast-close:hover {\n        color: var(--ettpd-text-primary, #fff);\n      }\n\n      @keyframes slideInRight {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n      @keyframes slideOutRight {\n        from {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(o)}var r=document.createElement("div");r.className="ettpd-toast-content";var l=document.createElement("div");l.className="ettpd-toast-title",l.textContent=e;var i=document.createElement("div");i.className="ettpd-toast-message",t&&/<[a-z][\s\S]*>/i.test(t)?i.innerHTML=t:i.textContent=t,r.appendChild(l),r.appendChild(i);var d=document.createElement("button");d.type="button",d.className="ettpd-toast-close",d.setAttribute("aria-label","Dismiss notification"),d.textContent="Ã—";var s=()=>{a&&a.parentNode&&(a.style.animation="slideOutRight 0.2s ease-in forwards",setTimeout(()=>{a&&a.parentNode&&a.remove()},200))};d.onclick=e=>{e.stopPropagation(),s()},a.onclick=()=>{s()},a.setAttribute("role","status"),a.setAttribute("aria-live","polite"),a.appendChild(r),a.appendChild(d),document.body.appendChild(a),setTimeout(s,u)}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("width",t),u.setAttribute("height",t),u.setAttribute("viewBox","0 0 24 24"),u.setAttribute("fill","none"),u.setAttribute("stroke","currentColor"),u.setAttribute("stroke-width","2"),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("aria-hidden","true"),u.setAttribute("focusable","false"),u.style.verticalAlign="middle",u.style.display="inline-block";var n={download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',refresh:'<path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M3 21v-5h5"></path>',play:'<polygon points="10 8 16 12 10 16 10 8" fill="currentColor"></polygon>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',check:'<polyline points="20 6 9 17 4 12"></polyline>',warning:'<path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',error:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',settings:'<path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',delete:'<path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',video:'<path d="m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5"></path><rect x="2" y="6" width="14" height="12" rx="2"></rect>',repost:'<path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path><path d="m15 5 4 4"></path>',heart:'<path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.29 1.51 4.04 3 5.5l7 7Z"></path>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',folder:'<path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"></path>',sun:'<circle cx="12" cy="12" r="4"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',computer:'<rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',fire:'<path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.5-1.5-2-1.5-5C9.5 4 8.5 5 8.5 7c0 1.5.5 2.5.5 3.5s-.5 2.5-1 4"></path><path d="M12.5 13.5A2.5 2.5 0 0 0 15 11c0-1.5-1.5-2-1.5-5C13.5 3 12.5 4 12.5 6c0 1.5.5 2.5.5 3.5s-.5 2.5-1 4"></path><path d="M16.5 12.5A2.5 2.5 0 0 0 19 10c0-1.5-1.5-2-1.5-5C17.5 2 16.5 3 16.5 5c0 1.5.5 2.5.5 3.5s-.5 2.5-1 4"></path>',sparkles:'<path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M19 17v4"></path><path d="M3 5h4"></path><path d="M17 19h4"></path>',hourglass:'<path d="M5 22h14"></path><path d="M5 2h14"></path><path d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"></path><path d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"></path>',stop:'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',skip:'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',down:'<path d="M12 5v14"></path><path d="m19 12-7 7-7-7"></path>'}[e];return n?(u.innerHTML=n,u):u}function he(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"before";if(e.textContent="",u){var a=ge(u,16);a.style.marginRight="before"===n?"4px":"0",a.style.marginLeft="after"===n?"4px":"0","before"===n?(e.appendChild(a),e.appendChild(document.createTextNode(t))):(e.appendChild(document.createTextNode(t)),e.appendChild(a))}else e.textContent=t}function Ee(e,t){he(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}function fe(){var e=U.ui.themeMode||"system",t="classic"===e?"light":e;if("system"===t)return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if(t!==e&&"system"!==e){U.ui.themeMode=t;try{localStorage.setItem(d,t)}catch(e){}}return t}function Ae(){var e=document.createElement("div");e.id=f,e.className="ettpd-wrapper","dark"===fe()?e.classList.add("ettpd-theme-dark"):e.classList.add("ettpd-theme-classic");var t=document.createElement("div");t.className="ettpd-drag-handle",t.title="Press & hold, then drag to move",t.innerHTML='<svg class="ettpd-drag-handle-icon" style="display:flex;align-items:center;justify-content:center;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false">\n    <g fill="currentColor">\n      <circle cx="9" cy="8" r="1.1" />\n      <circle cx="9" cy="12" r="1.1" />\n      <circle cx="9" cy="16" r="1.1" />\n      <circle cx="15" cy="8" r="1.1" />\n      <circle cx="15" cy="12" r="1.1" />\n      <circle cx="15" cy="16" r="1.1" />\n    </g>\n  </svg>',t.style.marginRight="0px";var u=document.createElement("select");u.className="ettpd-corner-select",u.name="corner",u.title="Snap to corner",["","top-left","top-right","bottom-left","bottom-right"].forEach(e=>{var t=document.createElement("option");t.value=e,t.textContent=e?e.replace("-"," "):"â‡±",u.appendChild(t)});var n=function(){var e=document.createElement("button");e.type="button",e.className="ettpd-icon-btn ettpd-power-btn",e.title="Turn extension off",e.setAttribute("aria-label","Turn extension off"),e.innerHTML='\n    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">\n      <g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">\n        <line x1="12" y1="4" x2="12" y2="11" />\n        <path d="M8.5 6.5A7 7 0 1 0 15.5 6.5" />\n      </g>\n    </svg>\n  ';var t=t=>{e.classList.toggle("ettpd-power-btn-on",t),e.classList.toggle("ettpd-power-btn-off",!t),e.setAttribute("aria-pressed",t?"true":"false"),e.title=t?"Turn extension off":"Turn extension on",e.setAttribute("aria-label",t?"Turn extension off":"Turn extension on")};return t(pe()),e.onclick=function(){var e=me(function*(e){if(e.stopPropagation(),pe())return new Promise(e=>{var u=document.createElement("div");u.className="alert",u.innerHTML="âš ï¸ <b>Disable Extension?</b><br><br>The extension will be completely disabled. No scripts will run, no polling will occur, and no downloads will be processed.<br><br>To re-enable, click the extension icon and select 'Turn On'.";var n=document.createElement("div");n.style.cssText="\n          display: flex;\n          gap: 10px;\n          margin-top: 20px;\n          justify-content: center;\n        ";var a=document.createElement("button");a.className="ettpd-modal-button secondary",a.textContent="Cancel",a.onclick=()=>{var t=document.getElementById(b);t&&t.remove(),e(!1)};var o=document.createElement("button");o.className="ettpd-modal-button danger",o.textContent="Disable",o.onclick=me(function*(){yield ce(!1),t(!1),Ce("Extension disabled","Reloading the page to stop the downloader...");var u=document.getElementById(b);u&&u.remove(),setTimeout(()=>{try{window.location.reload()}catch(e){}},300),e(!0)}),n.appendChild(a),n.appendChild(o),Ve({children:[u,n],onClose:()=>e(!1)})});yield ce(!0),t(!0),Ce("Extension enabled","Reload the page for changes to take effect.")});return function(t){return e.apply(this,arguments)}}(),e}(),a=document.createElement("button");a.type="button",a.className="ettpd-icon-btn ettpd-leaderboard-btn",a.title="View Leaderboard",a.setAttribute("aria-label","View leaderboard"),a.innerHTML='\n    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">\n      <rect x="4" y="11" width="3" height="7" rx="1.5" fill="currentColor" />\n      <rect x="10.5" y="7" width="3" height="11" rx="1.5" fill="currentColor" />\n      <rect x="17" y="9" width="3" height="9" rx="1.5" fill="currentColor" />\n    </svg>\n  ',a.onclick=He;var o=document.createElement("button");o.type="button",o.className="ettpd-icon-btn ettpd-share-btn",o.title="Share Extension!",o.setAttribute("aria-label","Share extension"),o.innerHTML='\n    <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">\n      <g fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">\n        <circle cx="17" cy="5" r="2.3" />\n        <circle cx="7" cy="12" r="2.3" />\n        <circle cx="17" cy="19" r="2.3" />\n        <path d="M9.3 11l5.4-3.2M9.3 13l5.4 3.2" />\n      </g>\n    </svg>\n  ',o.onclick=Du;var r=document.createElement("div");if(r.className="ettpd-handle-controls",r.appendChild(u),r.appendChild(t),r.appendChild(a),r.appendChild(o),r.appendChild(n),e.appendChild(r),e&&e.style){var d=localStorage.getItem(i)||"bottom-right";if("custom"===d){var s=U.ui.live_ETTPD_CUSTOM_POS&&"string"==typeof U.ui.live_ETTPD_CUSTOM_POS?JSON.parse(U.ui.live_ETTPD_CUSTOM_POS):{};null!=s.left&&null!=s.top&&(e.style.left="".concat(s.left,"px"),e.style.top="".concat(s.top,"px"),e.style.bottom="auto",e.style.right="auto")}else d&&Pe(e,d);return function(e,t){var u=0,n=0;t.addEventListener("mousedown",t=>{U.ui.isDragging=!0;var a=e.getBoundingClientRect();u=t.clientX-a.left,n=t.clientY-a.top,document.body.style.userSelect="none"}),document.addEventListener("mousemove",t=>{if(localStorage.getItem(l)!==U.ui.live_ETTPD_CUSTOM_POS&&(U.ui.downloaderPositionType="custom",localStorage.setItem(i,U.ui.downloaderPositionType),localStorage.setItem(l,U.ui.live_ETTPD_CUSTOM_POS)),U.ui.isDragging){var a=window.innerWidth,o=window.innerHeight,r=e.getBoundingClientRect(),d=t.clientX-u,s=t.clientY-n;d=Math.max(0,Math.min(a-r.width,d)),s=Math.max(0,Math.min(o-r.height,s)),e.style.left="".concat(d,"px"),e.style.top="".concat(s,"px"),e.style.bottom="auto",e.style.right="auto",U.ui.live_ETTPD_CUSTOM_POS=JSON.stringify({left:r.left,top:r.top})}}),document.addEventListener("mouseup",()=>{U.ui.isDragging=!1,document.body.style.userSelect=""})}(e,t),u.onchange=()=>{var t=u.value;t&&(U.ui.downloaderPositionType=t,localStorage.setItem(i,t),Pe(e,t))},e}}function ye(){return(ye=me(function*(e,t){try{var u=at();if(!u||"ğŸ˜ƒ"===u)return null;var n=(yield ne())[u.toLowerCase().trim()];if(!n)return null;var a={videos:"Videos",reposts:"Reposts",liked:"Likes",favorites:"Favorites"},o=[],r=function*(u){if(Array.isArray(i)&&i.length>0)if(a[u])t.find(e=>e.key===u)&&o.push({key:u,label:a[u],count:i.length,isCollection:!1});else{if(!e.isCollection)return 1;if(t.find(e=>"collection"===e.key)&&e.collectionName){var n=u;try{n=decodeURIComponent(u)}catch(e){n=u}if((n=n.replace(/-\d+$/,""))===e.collectionName.replace(/-\d+$/,"")){var r=u;try{r=decodeURIComponent(u)}catch(e){r=u}(r=r.replace(/-\d+$/,""))&&"collection"!==r&&o.push({key:"collection",label:r,count:i.length,isCollection:!0,collectionName:u})}}}};for(var[l,i]of Object.entries(n))yield*r(l);if(0===o.length)return null;var d=document.createElement("div");d.className="ettpd-resume-downloads-container";var s=document.createElement("div");s.className="ettpd-resume-downloads-title",s.textContent="Resume Downloads:",d.appendChild(s);var c=document.createElement("div");c.className="ettpd-resume-downloads-list";var D=function*(t){var u=document.createElement("div");u.className="ettpd-resume-download-item";var n=document.createElement("span");n.className="ettpd-resume-download-label",n.textContent="".concat(t.label," (saved ").concat(t.count,")"),u.appendChild(n);var a=document.createElement("button");he(a,"Resume","play"),a.className="ettpd-pref-btn primary ettpd-resume-downloads-btn",a.onclick=me(function*(){U.scrapperDetails.selectedTab=t.key,t.isCollection&&t.collectionName&&(U.scrapperDetails.selectedCollectionName=t.collectionName),yield be(t.key,e)}),u.appendChild(a),c.appendChild(u)};for(var p of o)yield*D(p);return d.appendChild(c),d}catch(e){return null}})).apply(this,arguments)}function we(){return(we=me(function*(){var e=document.createElement("div");e.className="ettpd-scrapper-completion";var t=at(),u=U.scrapperDetails.originalUsername;if(null!==u&&t!==u&&"ğŸ˜ƒ"!==t)return U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ne(),document.createElement("div");var n=U.scrapperDetails.selectedTab;if(!n||!(yield Se(t,n)))return U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ne(),document.createElement("div");var a=document.createElement("button");a.className="ettpd-scrapper-continue-btn",he(a,"Continue Scrapping","play"),a.style.cssText="\n    background: #007AFF;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 6px;\n    font-size: 13px;\n    cursor: pointer;\n    font-weight: 600;\n    width: 100%;\n    margin-bottom: 8px;\n    transition: background 0.2s;\n  ",a.onmouseover=()=>{a.style.background="#0056CC"},a.onmouseout=()=>{a.style.background="#007AFF"},a.onclick=()=>{U.scrapperDetails.scrappingStage="ongoing",U.scrapperDetails.paused=!1,U.downloadPreferences.autoScrollMode="always",U.downloading.isDownloadingAll=!1,U.downloading.isActive=!1,U.scrapperDetails.isAutoBatchDownloading=!1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Pu(),Ne()};var o=document.createElement("button");o.className="ettpd-scrapper-continue-btn",he(o,"Download CSV","download"),o.style.cssText="\n    background: #f0f0f0;\n    color: #333;\n    border: 1px solid #ddd;\n    padding: 8px 16px;\n    border-radius: 6px;\n    font-size: 13px;\n    cursor: pointer;\n    font-weight: 600;\n    width: 100%;\n    margin-bottom: 8px;\n    transition: background 0.2s;\n  ",o.onmouseover=()=>{o.style.background="#e0e0e0"},o.onmouseout=()=>{o.style.background="#f0f0f0"},o.onclick=()=>{var e=(U.allDirectLinks||[]).filter(e=>U.downloadedURLs.includes(e.url));0!==e.length?(ft(e),Ce("CSV Export Started","Exporting ".concat(e.length," downloaded items to CSV file."))):Ce("No items to export","No downloaded items found to export to CSV.")};var r=document.createElement("button");return r.className="ettpd-scrapper-continue-btn",r.textContent="End Scrapping",r.style.cssText="\n    background: #ff3b30;\n    color: white;\n    border: none;\n    padding: 8px 16px;\n    border-radius: 6px;\n    font-size: 13px;\n    cursor: pointer;\n    font-weight: 600;\n    width: 100%;\n    transition: background 0.2s;\n  ",r.onmouseover=()=>{r.style.background="#d32f2f"},r.onmouseout=()=>{r.style.background="#ff3b30"},r.onclick=()=>{U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.isAutoBatchDownloading=!1,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.paused=!1,U.downloadPreferences.autoScrollMode="off",U.downloading.isDownloadingAll=!1,U.downloading.isActive=!1,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ne(),Me()},e.appendChild(a),e.appendChild(o),e.appendChild(r),e})).apply(this,arguments)}function be(e,t){return Be.apply(this,arguments)}function Be(){return Be=me(function*(e,t){var u=at(),n="collection"===e?U.scrapperDetails.selectedCollectionName||t.collectionName||"collection":e;if(u&&"ğŸ˜ƒ"!==u)try{var a=yield K(u,n);if(a&&a.length>0){var o=yield function(e,t,u){return Ie.apply(this,arguments)}(u,n,a.length);if("cancel"===o)return;U.scrapperDetails.skipDownloaded="skip"===o}else U.scrapperDetails.skipDownloaded=!1}catch(e){U.scrapperDetails.skipDownloaded=!1}else U.scrapperDetails.skipDownloaded=!1;if(U.scrapperDetails.startedAt=Date.now(),U.scrapperDetails.scrappingStage="initiated",U.scrapperDetails.paused=!1,U.scrapperDetails.locked=!0,U.scrapperDetails.originalPath=window.location.pathname,U.scrapperDetails.originalUsername=at(),t.isCollection){U.scrapperDetails.originalCollectionName=t.collectionName;var r=at(),l=t.collectionName;r&&"ğŸ˜ƒ"!==r&&l&&K(r,l).then(e=>{!function(e,t,u){Q.apply(this,arguments)}(r,l,e||[],window.location.pathname)})}localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),window.location.href=window.location.pathname}),Be.apply(this,arguments)}function xe(){return xe=me(function*(e,t,u){var n=document.createElement("div");if(n.className="ettpd-stepper-container",!e.isProfile){var a=document.createElement("div");a.className="ettpd-stepper-warning",a.style.cssText="\n      padding: 15px;\n      margin-bottom: 15px;\n      background: #fff3cd;\n      border: 1px solid #ffc107;\n      border-radius: 6px;\n      text-align: center;\n    ";var o=document.createElement("p");return o.style.cssText="\n      margin: 0;\n      font-size: 13px;\n      color: #856404;\n      line-height: 1.5;\n    ",o.innerHTML="<strong>âš ï¸ Heads up:</strong> Please navigate to a profile or collection page first. If you download from other pages, you may end up downloading random posts. Reload the page if you don't see any tabs.",a.appendChild(o),n.appendChild(a),n}var r=document.createElement("div");r.className="ettpd-stepper-indicator";var l,i=yield function(e,t){return ye.apply(this,arguments)}(e,t),d=null!==i,s=null!==U.scrapperDetails.selectedTab,c=d?3:2;if(l=s?d?3:2:1,r.innerHTML='\n    <div class="ettpd-stepper-dots">\n      '.concat(Array.from({length:c},(e,t)=>'<span class="ettpd-stepper-dot '.concat(t+1===l?"active":t+1<l?"completed":"",'"></span>')).join(""),"\n    </div>\n  "),n.appendChild(r),d&&!s&&1===l){var p=document.createElement("div");p.className="ettpd-stepper-step",p.appendChild(i);var F=t.filter(e=>{var{key:t}=e,n=u[t];return!!n&&("string"==typeof n?n.trim().length>0:!!n.offsetParent)}),m=yield ne(),v=at(),C=null==v?void 0:v.toLowerCase().trim(),g=C?m[C]:null,h=new Set;if(g)for(var[E,f]of Object.entries(g))if(Array.isArray(f)&&f.length>0)if(["videos","reposts","liked","favorites"].includes(E))h.add(E);else if(e.isCollection&&e.collectionName){var A=E;try{A=decodeURIComponent(E)}catch(e){}(A=A.replace(/-\d+$/,""))===e.collectionName.replace(/-\d+$/,"")&&h.add("collection")}var y=F.filter(e=>!h.has(e.key));if(y.length>0){var w=document.createElement("div");w.style.margin="16px 0 8px 0",w.style.paddingTop="10px",w.style.borderTop="1px solid var(--ettpd-border-color, #e0e0e0)";var b=document.createElement("div");b.className="ettpd-resume-downloads-title",b.textContent="Download Other Tabs:",b.style.marginBottom="10px",w.appendChild(b);var B=document.createElement("div");B.className="ettpd-tabs-compact",y.forEach(t=>{var{key:n,label:a,icon:o}=t,r=document.createElement("button");r.className="ettpd-tab-btn ettpd-tab-btn-".concat(n),r.dataset.tabKey=n;var l=o?ge(o,16).outerHTML:"";r.innerHTML='\n          <span class="ettpd-tab-check" aria-hidden="true">âœ“</span>\n          <span class="ettpd-tab-label">'.concat(l?'<span style="display:inline-block;margin-right:4px;vertical-align:middle;">'.concat(l,"</span>"):"").concat(a,"</span>\n        "),r.setAttribute("aria-pressed","false"),r.addEventListener("click",()=>{B.querySelectorAll(".ettpd-tab-btn.active").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),r.classList.add("active"),r.setAttribute("aria-pressed","true"),"collection"===n&&(U.scrapperDetails.selectedCollectionName=e.collectionName||u.collection||"Collection"),U.scrapperDetails.selectedTab=n,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ne()}),B.appendChild(r)}),w.appendChild(B),p.appendChild(w)}if(F.length!==t.length&&e.isProfile){var x=document.createElement("button");he(x,"Check for More Tabs","refresh"),x.className="ettpd-refresh-tabs-btn",x.style.cssText="\n        background: #f0f0f0;\n        color: #333;\n        border: 1px solid #ddd;\n        padding: 8px 16px;\n        border-radius: 6px;\n        font-size: 13px;\n        cursor: pointer;\n        font-weight: 500;\n        transition: background 0.2s;\n        margin-top: 15px;\n        width: 100%;\n      ",x.onmouseover=()=>{x.style.background="#e0e0e0"},x.onmouseout=()=>{x.style.background="#f0f0f0"};var S=!1;x.onclick=me(function*(){if(!S){S=!0,x.disabled=!0,Ee(x,"Checking...","hourglass"),x.style.background="#999";try{var e=yield Zt(5e3,100);if(t.filter(t=>{var{key:u}=t,n=e[u];return!!n&&("string"==typeof n?n.trim().length>0:!!n.offsetParent)}).length>F.length)Ee(x,"Found More!","check"),setTimeout(()=>{Ne()},500);else{Ee(x,"Check for More Tabs","refresh"),x.style.background="#f0f0f0";var u=x.cloneNode(!0);x.textContent="No new tabs found",setTimeout(()=>{x.replaceWith(u)},2e3)}}catch(e){Ee(x,"Check for More Tabs","refresh"),x.style.background="#f0f0f0"}finally{S=!1,x.disabled=!1}}}),p.appendChild(x),setTimeout(()=>{x&&null!==x.offsetParent&&!x.disabled&&x.click()},2e3)}n.appendChild(p)}if(!s&&(d&&2===l||!d&&1===l)){var k=document.createElement("div");k.className="ettpd-stepper-step";var N=document.createElement("div");N.className="ettpd-stepper-step-title",N.textContent="Select Tab:",k.appendChild(N);var T=document.createElement("div");T.className="ettpd-tabs-compact";var I=t.filter(e=>{var{key:t}=e,n=u[t];return!!n&&("string"==typeof n?n.trim().length>0:!!n.offsetParent)}),P=I.length>0,L=I.length===t.length;if(P&&!L&&e.isProfile){var O=document.createElement("button");he(O,"Check for More Tabs","refresh"),O.className="ettpd-refresh-tabs-btn",O.style.cssText="\n        background: #f0f0f0;\n        color: #333;\n        border: 1px solid #ddd;\n        padding: 6px 12px;\n        border-radius: 6px;\n        font-size: 12px;\n        cursor: pointer;\n        font-weight: 500;\n        transition: background 0.2s;\n        margin-top: 10px;\n        width: 100%;\n      ",O.onmouseover=()=>{O.style.background="#e0e0e0"},O.onmouseout=()=>{O.style.background="#f0f0f0"};var M=!1;O.onclick=me(function*(){if(!M){M=!0,O.disabled=!0,Ee(O,"Checking...","hourglass"),O.style.background="#999";try{var e=yield Zt(5e3,100);if(t.filter(t=>{var{key:u}=t,n=e[u];return!!n&&("string"==typeof n?n.trim().length>0:!!n.offsetParent)}).length>I.length)Ee(O,"Found More!","check"),setTimeout(()=>{Ne()},500);else{Ee(O,"Check for More Tabs","refresh"),O.style.background="#f0f0f0";var u=O.cloneNode(!0);O.textContent="No new tabs found",setTimeout(()=>{O.replaceWith(u)},2e3)}}catch(e){Ee(O,"Check for More Tabs","refresh"),O.style.background="#f0f0f0"}finally{M=!1,O.disabled=!1}}}),k.appendChild(O),setTimeout(()=>{O&&null!==O.offsetParent&&!O.disabled&&O.click()},2e3)}if(!P&&e.isProfile){var R=document.createElement("div");R.className="ettpd-stepper-no-tabs",R.style.cssText="\n        padding: 15px;\n        text-align: center;\n        background: #f0f0f0;\n        border-radius: 6px;\n        margin-top: 10px;\n      ";var j=document.createElement("div");j.style.cssText="\n        font-size: 13px;\n        color: #666;\n        margin-bottom: 10px;\n      ",j.innerHTML="<strong>ğŸ” Auto-checking for tabs...</strong>";var _=document.createElement("button");he(_,"Refresh Tabs","refresh"),_.style.cssText="\n        background: #007AFF;\n        color: white;\n        border: none;\n        padding: 8px 16px;\n        border-radius: 6px;\n        font-size: 13px;\n        cursor: pointer;\n        font-weight: 500;\n        transition: background 0.2s;\n      ",_.onmouseover=()=>{_.style.background="#0056CC"},_.onmouseout=()=>{_.style.background="#007AFF"};var q=!1;_.onclick=me(function*(){if(!q){q=!0,_.disabled=!0,Ee(_,"Checking...","hourglass"),_.style.background="#999";try{var e=yield Zt(5e3,100);t.filter(t=>{var{key:u}=t,n=e[u];return!!n&&("string"==typeof n?n.trim().length>0:!!n.offsetParent)}).length>0?(Ee(_,"Found!","check"),setTimeout(()=>{Ne()},500)):(Ee(_,"Refresh Tabs","refresh"),_.style.background="#007AFF",j.innerHTML="<strong>No tabs found yet. Try scrolling the page or wait a moment.</strong>")}catch(e){Ee(_,"Refresh Tabs","refresh"),_.style.background="#007AFF",j.innerHTML="<strong>Error checking for tabs. Please try again.</strong>"}finally{q=!1,_.disabled=!1}}}),R.appendChild(j),R.appendChild(_),k.appendChild(R)}I.forEach(t=>{var{key:n,label:a,icon:o}=t,r=document.createElement("button");r.className="ettpd-tab-btn ettpd-tab-btn-".concat(n),r.dataset.tabKey=n;var l=o?ge(o,16).outerHTML:"";r.innerHTML='\n        <span class="ettpd-tab-check" aria-hidden="true">âœ“</span>\n        <span class="ettpd-tab-label">'.concat(l?'<span style="display:inline-block;margin-right:4px;vertical-align:middle;">'.concat(l,"</span>"):"").concat(a,"</span>\n      "),r.setAttribute("aria-pressed","false"),r.addEventListener("click",()=>{document.querySelectorAll(".ettpd-tab-btn.active").forEach(e=>{e.classList.remove("active"),e.setAttribute("aria-pressed","false")}),r.classList.add("active"),r.setAttribute("aria-pressed","true"),"collection"===n&&(U.scrapperDetails.selectedCollectionName=e.collectionName||u.collection||"Collection"),U.scrapperDetails.selectedTab=n,Ne()}),T.appendChild(r)}),k.appendChild(T),n.appendChild(k)}if(s&&(3===l||!d&&2===l)){var H,V=document.createElement("div");V.className="ettpd-stepper-step";var J=U.scrapperDetails.selectedTab,z=(null===(H=t.find(e=>e.key===J))||void 0===H?void 0:H.label)||eu(J),W=document.createElement("div");W.className="ettpd-stepper-step-title",W.textContent="Selected: ".concat(z),V.appendChild(W);var Y=document.createElement("div");Y.className="ettpd-stepper-actions";var $=document.createElement("button");$.className="ettpd-scrapper-start",he($,"Start","play"),$.onclick=me(function*(){yield be(J,e)});var G=document.createElement("button");G.className="ettpd-scrapper-learn",he(G,"Info","info"),G.onclick=()=>{!function(e){var t=document.createElement("div");t.className="ettpd-scrapper-info",t.innerHTML='\n    <div class="alert">\n      <div class="ettpd-scrapper-message-title">\n        ğŸ’¡ Let the Scrapper handle it\n      </div>\n      <div class="ettpd-scrapper-steps">\n        <div class="ettpd-scrapper-message-body">\n          <span class="ettpd-scrapper-message-step">1.</span>\n          <span>Choose a tab above (for example <strong>Scrape Videos</strong>).</span>\n        </div>\n        <div class="ettpd-scrapper-message-body">\n          <span class="ettpd-scrapper-message-step">2.</span>\n          <span>Click <strong>Start</strong> to reload the page and auto-scroll every post under\n          <strong>@'.concat(at()," <em>").concat(e,'</em></strong>.</span>\n        </div>\n        <div class="ettpd-scrapper-message-body">\n          <span class="ettpd-scrapper-message-step">3.</span>\n          <span>Use <strong>Pause</strong> or <strong>Download Now</strong> anytime if you want to jump in early.</span>\n        </div>\n      </div>\n    </div>\n    <blockquote class="black-text" style="margin: 10px 0;">\n      If you can\'t <strong>see</strong> the posts, you can\'t <strong>download</strong> them. <br/>\n      If a tab (Likes, Reposts, etc.) is missing, click it once or refresh the page.\n    </blockquote>\n    <p class="alert">\n      Want full control? Customize where your downloads go under\n      <strong>Settings â†’ File Paths</strong> with your own <strong>File Path Templates</strong>. ğŸ› ï¸\n    </p>\n  ');var u=document.createElement("div");u.style.cssText="\n    background: var(--ettpd-bg-tertiary, #f0f0f0);\n    border: 1px solid var(--ettpd-border-color, #ddd);\n    border-radius: 8px;\n    padding: 12px 16px;\n    margin-bottom: 12px;\n  ";var n=document.createElement("div");n.style.cssText="\n    font-size: 13px;\n    font-weight: 600;\n    color: var(--ettpd-text-primary, #333);\n    margin-bottom: 8px;\n  ",n.textContent="";var a=ge("sparkles",16);a.style.marginRight="4px",n.appendChild(a),n.appendChild(document.createTextNode("Recommended Template"));var o=document.createElement("div");o.style.cssText="\n    font-size: 11px;\n    color: var(--ettpd-text-secondary, #666);\n    font-family: monospace;\n    margin-bottom: 10px;\n    word-break: break-all;\n  ",o.textContent=Ut().example;var r=document.createElement("button");r.className="ettpd-action-btn primary",he(r,"Use This Template","sparkles"),r.style.cssText="\n    width: 100%;\n    margin-bottom: 0;\n  ";var l=document.createElement("div");l.style.cssText="\n    font-size: 12px;\n    color: var(--ettpd-accent, #3391ff);\n    margin-top: 8px;\n    text-align: center;\n    font-weight: 500;\n    display: none;\n  ",r.onclick=()=>{U.downloadPreferences.fullPathTemplate=Ut();var e=Rt().filter(e=>e.label!==U.downloadPreferences.fullPathTemplate.label);e.push(U.downloadPreferences.fullPathTemplate),_t(e),qt(),l.textContent="";var t=ge("check",16);t.style.marginRight="4px",l.appendChild(t),l.appendChild(document.createTextNode("Template applied successfully!")),l.style.display="block",r.disabled=!0,r.style.opacity="0.7"},u.appendChild(n),u.appendChild(o),u.appendChild(r),u.appendChild(l);var i=document.createElement("button");i.className="ettpd-action-btn secondary",he(i,"Customize File Paths","settings"),i.style.cssText="\n    width: 100%;\n  ",i.onclick=()=>{Je()};var d=document.createElement("div");d.style.cssText="\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n  ",d.appendChild(u),d.appendChild(i);var s=document.createElement("button");s.className="ettpd-action-btn secondary",s.textContent="âœ• Close",s.style.cssText="\n    width: 100%;\n  ",d.appendChild(s);var c=Ve({children:[t,d]});s.onclick=()=>{null==c||c.remove()}}(eu(J))},Y.appendChild($),Y.appendChild(G),V.appendChild(Y),n.appendChild(V)}return n}),xe.apply(this,arguments)}function Se(e,t){return ke.apply(this,arguments)}function ke(){return(ke=me(function*(e,t){if(!e||"ğŸ˜ƒ"===e||!t)return!1;try{var u=yield K(e,t);return!!(u&&Array.isArray(u)&&u.length>0)||U.allDirectLinks&&U.allDirectLinks.length>0}catch(e){return U.allDirectLinks&&U.allDirectLinks.length>0}})).apply(this,arguments)}function Ne(){return Te.apply(this,arguments)}function Te(){return Te=me(function*(){var e=document.getElementById(A);if(e&&(e.style.display=U.ui.isScrapperBoxOpen?"flex":"none",U.ui.isPreferenceBoxOpen="none"==e.style.display&&U.ui.isPreferenceBoxOpen,e)){var t=document.createElement("div");t.className="ettpd-scrapper-controls";var u=ot(),n=yield Zt(3e4),a=[{key:"videos",label:"Scrape Videos",icon:"video"},{key:"reposts",label:"Scrape Reposts",icon:"repost"},{key:"liked",label:"Scrape Likes",icon:"heart"},{key:"favorites",label:"Scrape Favorites",icon:"star"},{key:"collection",label:"Scrape: ".concat(n.collection||u.collectionName||"Collection"),icon:"folder"}],o="ongoing"==U.scrapperDetails.scrappingStage||"downloading"==U.scrapperDetails.scrappingStage||"initiated"==U.scrapperDetails.scrappingStage,r=at(),l=U.scrapperDetails.originalUsername,i=null===l||r===l||"ğŸ˜ƒ"===r,d=U.scrapperDetails.selectedTab,s=!!d&&(yield Se(r,d));"completed"!=U.scrapperDetails.scrappingStage||s||(U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)));var c,p="completed"==U.scrapperDetails.scrappingStage&&null!=d&&i&&s;if(o&&i?c=function(){var e=at(),t=U.scrapperDetails.originalUsername;if(null!==t&&e!==t&&"ğŸ˜ƒ"!==e)return U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ne(),document.createElement("div");var u=document.createElement("div");u.className="ettpd-progress-compact",u.id="ettpd-progress-compact-container";var n=document.createElement("div");n.className="ettpd-progress-compact-line",n.style.cssText="\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 8px;\n    font-size: 11px;\n    padding: 4px 8px;\n  ";var a=document.createElement("span");a.className="ettpd-progress-tab-name";var o=eu(U.scrapperDetails.selectedTab||"Scrapper");a.textContent=o.length>12?o.slice(0,12)+"...":o,o.length>12&&(a.title=o);var r=document.createElement("span");r.className="ettpd-progress-status-info",r.id="ettpd-progress-status-info";var l=document.createElement("button");l.className="ettpd-progress-pause-btn",he(l,"",U.scrapperDetails.paused?"play":"pause"),l.title=U.scrapperDetails.paused?"Resume":"Pause",l.style.cssText="\n    background: ".concat(U.scrapperDetails.paused?"#007AFF":"#FF9500",";\n    color: white;\n    border: none;\n    padding: 2px 8px;\n    border-radius: 4px;\n    font-size: 11px;\n    cursor: pointer;\n    height: 20px;\n    min-width: 32px;\n    transition: background 0.2s;\n    flex-shrink: 0;\n  "),l.onmouseover=()=>{l.style.background=U.scrapperDetails.paused?"#0056CC":"#E68500"},l.onmouseout=()=>{l.style.background=U.scrapperDetails.paused?"#007AFF":"#FF9500"},l.onclick=()=>{U.scrapperDetails.paused=!U.scrapperDetails.paused,U.scrapperDetails.paused?(U.downloadPreferences.autoScrollMode="off",he(l,"","play"),l.title="Resume",l.style.background="#007AFF"):(U.downloadPreferences.autoScrollMode="always",he(l,"","pause"),l.title="Pause",l.style.background="#FF9500"),localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),l.onmouseover=()=>{l.style.background=U.scrapperDetails.paused?"#0056CC":"#E68500"}};var i=null,d=null,s=!1,c=()=>{var e,t,u=U.allDirectLinks.length,n=U.scrapperDetails.currentBatch||1,a=U.downloading.isDownloadingAll,o=U.scrapperDetails.isAutoBatchDownloading,l=U.scrapperDetails.skipDownloaded,D="ongoing"===U.scrapperDetails.scrappingStage,p=U.scrapperDetails.originalUsername,F="collection"===U.scrapperDetails.selectedTab?U.scrapperDetails.selectedCollectionName:U.scrapperDetails.selectedTab,m="".concat(p,":").concat(F);if(d!==m&&(i=null,d=m,s=!1),l){if(null===i&&!s&&p&&"ğŸ˜ƒ"!==p&&F&&(s=!0,K(p,F).then(e=>{i=e||[],s=!1,c()}).catch(()=>{i=[],s=!1,c()})),e=U.downloadedURLs.length||U.scrapperDetails.downloadedInBatches||0,null!==i){var v=i.length;t=Math.max(v,u)}else t=u;e=Math.min(e,t)}else{var C=new Set(U.downloadedURLs);e=U.allDirectLinks.filter(e=>C.has(e.url)).length,t=u,e=Math.min(e,u)}var g="";if(U.scrapperDetails.paused)if(l&&D){var h=t>0?Math.round(e/t*100):0;h>=100&&(h=99),g="Paused | ".concat(e,"/").concat(t," (").concat(h,"%) discovering...")}else g="Paused | ".concat(e,"/").concat(u);else if(a&&o){var E=t>0?Math.round(e/t*100):0;l&&D?(E>=100&&(E=99),g="Batch #".concat(n," | ").concat(e,"/").concat(t," (").concat(E,"%) discovering...")):g="Batch #".concat(n," | ").concat(e,"/").concat(u," (").concat(E,"%)")}else if(u>0)if(l&&D){var f=t>0?Math.round(e/t*100):0;f>=100&&(f=99),g="".concat(e,"/").concat(t," (").concat(f,"%) discovering...")}else g="".concat(e,"/").concat(u);else g="Discovering...";r.textContent=g};c(),n.appendChild(a),n.appendChild(r),n.appendChild(l),u.appendChild(n);var p=setInterval(()=>{if(document.getElementById("ettpd-progress-compact-container")){if("completed"===U.scrapperDetails.scrappingStage&&U.ui.isScrapperBoxOpen)return clearInterval(p),void Ne();var e=U.scrapperDetails.paused;e!==(l.querySelector("svg")&&l.querySelector("svg").innerHTML.includes('polygon points="5 3 19 12 5 21 5 3"'))&&(he(l,"",e?"play":"pause"),l.title=e?"Resume":"Pause",l.style.background=e?"#007AFF":"#FF9500"),c()}else clearInterval(p)},2e3);return u}():p?c=yield function(){return we.apply(this,arguments)}():(o&&!i&&(U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails))),c=yield function(e,t,u){return xe.apply(this,arguments)}(u,a,n)),t.appendChild(c),e.querySelectorAll(".ettpd-scrapper-controls").forEach(e=>e.remove()),e.querySelectorAll(".ettpd-tab-btn").forEach(e=>e.remove()),e.querySelectorAll(".ettpd-resume-downloads-container").forEach(e=>e.remove()),e.appendChild(t),document.getElementById(w)&&Me(),r!==ve&&(ve=r,null!==U.scrapperDetails.originalUsername&&r!==U.scrapperDetails.originalUsername&&"ğŸ˜ƒ"!==r))return U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.scrappingStage=null,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,U.scrapperDetails.paused=!1,U.scrapperDetails.isAutoBatchDownloading=!1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),void Ne();var F=()=>{var e=ot(),t=at(),u=t!==ve;u&&(ve=t);var n=document.getElementById("tab-subtitle");e.isProfile?u&&Ne():(n&&(n.innerHTML="<strong>Heads up:</strong> Please navigate to a profile or collection page first. If you download from other pages, you may end up downloading random posts. Reload the page if you don't see any tabs."),Ne())};return window.addEventListener("locationchange",F),window.addEventListener("popstate",F),t}}),Te.apply(this,arguments)}function Ie(){return(Ie=me(function*(e,t,u){var n=at();return n!==e&&"ğŸ˜ƒ"!==n?Promise.resolve("cancel"):new Promise(n=>{var a=document.createElement("div");a.style.cssText="padding: 20px; text-align: center;",a.innerHTML='\n      <p style="margin-bottom: 15px; font-size: 14px;">\n        You\'ve previously scraped <strong>@'.concat(e,"</strong>'s <strong>").concat(eu(t),'</strong>.\n      </p>\n      <p style="margin-bottom: 20px; font-size: 14px;">\n        Found <strong>').concat(u,'</strong> previously downloaded items.\n      </p>\n      <p style="margin-bottom: 20px; font-size: 13px; color: #666;">\n        What would you like to do?\n      </p>\n    ');var o=document.createElement("div");o.style.cssText="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;";var r=document.createElement("button");r.className="ettpd-pref-btn",he(r,"Re-download All","refresh"),r.onclick=()=>{d.remove(),n("redownload")};var l=document.createElement("button");l.className="ettpd-pref-btn",he(l,"Skip Downloaded","skip"),l.onclick=()=>{d.remove(),n("skip")};var i=document.createElement("button");i.className="ettpd-pref-btn danger",he(i,"Cancel","error"),i.onclick=()=>{d.remove(),n("cancel")},o.appendChild(r),o.appendChild(l),o.appendChild(i);var d=Ve({children:[a,o],onClose:()=>n("cancel")})})})).apply(this,arguments)}function Pe(e,t){switch(e.style.top="",e.style.left="",e.style.right="",e.style.bottom="",t){case"top-left":e.style.top="20px",e.style.left="20px";break;case"top-right":e.style.top="20px",e.style.right="20px";break;case"bottom-left":e.style.bottom="80px",e.style.left="20px";break;case"bottom-right":e.style.bottom="80px",e.style.right="20px"}}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e){var u=U.ui.isScrapperBoxOpen,n=U.scrapperDetails.scrappingStage,a=U.scrapperDetails.selectedTab,o="completed"===n&&U.scrapperDetails.paused&&null!==U.scrapperDetails.originalPath,r="ongoing"===n||"downloading"===n,l=a&&"ongoing"!==n&&"downloading"!==n&&"completed"!==n,i=e.id===w+"-container"?e:e.closest("#"+w+"-container"),d=i?i.querySelector("#"+w):e.id===w?e:null,s=i?i.querySelector("#"+w+"-message"):null,c=i?i.querySelector("#"+w+"-pause"):null;if(d){if(i&&(i.style.display="block"),u&&!o&&(r||l))return d.style.display="none",c&&(c.style.display="none"),void(s&&(s.style.display="block"));if(u&&o&&(d.style.display="block",s&&(s.style.display="none")),l)return d.style.display="none",c&&(c.style.display="none"),void(s&&(s.style.display="block"));d.style.display="block",s&&(s.style.display="none");var D=t.length||U.allDirectLinks.length,p=U.downloadedURLs.length,F=U.downloading.isDownloadingAll,m=U.downloading.pausedAll;if(!D)return he(d,"Nothing to download","stop"),d.disabled=!0,void(c&&(c.style.display="none",c.disabled=!0));if(F){if(p<D){d.textContent="";var v=ge("hourglass",16);v.style.marginRight="4px",d.appendChild(v),d.appendChild(document.createTextNode("Downloading ".concat(p," of ").concat(D," post").concat(1!==D?"s":"","â€¦")))}else{d.textContent="";var C=ge("check",16);C.style.marginRight="4px",d.appendChild(C),d.appendChild(document.createTextNode("All ".concat(D," post").concat(1!==D?"s":""," downloaded")))}return d.disabled=!0,void(c&&(c.style.display="inline-flex",c.disabled=!1,he(c,m?"Resume":"Pause",m?"play":"stop"),c.title=m?"Resume downloading":"Pause downloading"))}he(d,"Download ".concat(D>1?"all ".concat(D):"1"," post").concat(1!==D?"s":""),"down"),d.disabled=!1,c&&(c.style.display="none",c.disabled=!0)}}}function Oe(e,t){var u=e||document.getElementById(w);U.debug.active&&u&&(u.innerText=t)}function Me(){var e=document.getElementById(w);if(e){var t=U.scrapperDetails.scrappingStage,u=U.ui.isScrapperBoxOpen,n="ongoing"===t||"downloading"===t,a=U.scrapperDetails.selectedTab&&"ongoing"!==t&&"downloading"!==t&&"completed"!==t,o=e.parentElement,r=o?o.querySelector("#"+w+"-message"):null,l=o?o.querySelector("#"+w+"-pause"):null;if(o&&(o.style.display="block"),u&&(n||a))return e.style.display="none",l&&(l.style.display="none"),void(r&&(r.style.display="block"));e.style.display="block",r&&(r.style.display="none");var i=U.allDirectLinks.length,d=U.downloadedURLs.length,s=U.downloading.isDownloadingAll;if("ongoing"===U.scrapperDetails.scrappingStage&&U.scrapperDetails.isAutoBatchDownloading){var c=Math.min(d+1,i);return e.textContent=d>=i?"Downloaded: ".concat(d," of ").concat(i," items discovered"):"Downloading item ".concat(c," of ").concat(i," items discovered"),e.disabled=!0,void(l&&(l.style.display="none",l.disabled=!0))}if(i)if(s)if(d<i){e.textContent="";var D=ge("hourglass",16);D.style.marginRight="4px",e.appendChild(D),e.appendChild(document.createTextNode("Downloading ".concat(d," of ").concat(i," Post").concat(1!==i?"s":"","â€¦"))),e.disabled=!0,l&&(l.style.display="inline-flex",l.disabled=!1,he(l,U.downloading.pausedAll?"Resume":"Pause",U.downloading.pausedAll?"play":"stop"),l.title=U.downloading.pausedAll?"Resume downloading":"Pause downloading")}else{e.textContent="";var p=ge("check",16);p.style.marginRight="4px",e.appendChild(p),e.appendChild(document.createTextNode("Downloaded all ".concat(i," Post").concat(1!==i?"s":""))),l&&(l.style.display="none",l.disabled=!0)}else he(e,"Download ".concat(i>1?"All "+i:"1"," Post").concat(1!==i?"s":""),"down"),e.disabled=!1,l&&(l.style.display="none",l.disabled=!0);else he(e,"Nothing to download","stop"),e.disabled=!0,l&&(l.style.display="none",l.disabled=!0)}}function Re(e){var t=Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(e);return'<span title="'.concat(e.toLocaleString(),'">').concat(t,"</span>")}function je(e,t,u,n){var a=Re(t),o=function(e,t){var u=t(e);return u?"".concat(u.emoji,' <span class="ettpd-tier">').concat(u.name,"</span>"):""}(t,n);return'<div class="ettpd-stat-line-'.concat(u,'">').concat(o," <strong>").concat(a,"</strong> ").concat(e,"</div>")}function Ue(){var e,t=document.getElementById(f);if(t){var u,n=U.recommendationsLeaderboard.allTimeRecommendationsCount,a=(null===(e=U.leaderboard.weekDownloadsData)||void 0===e?void 0:e.count)||0;u=a===n&&n>0?"\n      ".concat(je("This week?!",n,"top",Wt),'\n      <div class="ettpd-stat-line-bottom" title="You\'re in a downloading mood ğŸ˜">ğŸ“¦ Fresh streak</div>\n    '):"\n      ".concat(je("Downloads this week",a,"top",zt),"\n      ").concat(je("All time recommendations",n,"bottom",Wt),"\n    ");var o=t.querySelector(".ettpd-stats");if(!o||o.innerHTML.trim()!==u.trim()){o&&o.remove();var r=document.createElement("span");r.className="ettpd-span ettpd-stats",r.innerHTML=u,r.onclick=He;var l=r.querySelector("a");l&&l.addEventListener("click",e=>e.stopPropagation()),t.appendChild(r)}}}function _e(r,l){var s;if(!U.downloading.isActive&&!U.downloading.isDownloadingAll){var c=f,D=document.getElementById(c),p=!1;D||(D=Ae(),p=!0),!p&&D._structureInitialized||(function(o){var r=function(){var o=document.createElement("div");o.className="ettpd-preferences-box",o.style.display=U.ui.isPreferenceBoxOpen?"flex":"none";var r=document.createElement("div");r.className="ettpd-pref-label",r.textContent="Options:";var l=document.createElement("div");l.className="ettpd-options-buttons";var s=document.createElement("button");s.className="ettpd-pref-btn danger",he(s,"Factory Reset","refresh"),s.onclick=function(){var u=me(function*(u){u.stopPropagation(),localStorage.removeItem(i),localStorage.removeItem(e),localStorage.removeItem(a),localStorage.removeItem(n),localStorage.removeItem(t),localStorage.removeItem(d),j.debug.active=!1,j.isLoggedIn=!1,j.allItemsEverSeen={},j.allDirectLinks=[],j.displayedState={itemsHash:"",path:""},j.filters={likedVideos:!1,favoriteVideos:!1,state:"INIT"},j.downloadedURLs=[],j.likedVideos={},j.downloading={isActive:!1,isDownloadingAll:!1,pausedAll:!1},j.ui={downloaderPositionType:null,live_ETTPD_CUSTOM_POS:null,isPreferenceBoxOpen:!1,isDownloaderClosed:!1,isRatePopupOpen:!1,isDragging:!1,hasSeenShowButtonHint:!1,themeMode:"dark",autoSwipeConfigurations:{nextClickTimeout:null,countdownInterval:null,remainingTime:0}},j.downloadPreferences={skipFailedDownloads:!1,skipAds:!0,autoScrollMode:"off",includeCSV:!1,fullPathTemplate:{},showFolderPicker:!1},localStorage.setItem(a,JSON.stringify(x.find(e=>e.isDefault))),j.downloadPreferences.fullPathTemplate=x.find(e=>e.isDefault),yield E("âœ… Downloader state has been reset."),setTimeout(()=>{U.ui.isPreferenceBoxOpen=!1,U.ui.isScrapperBoxOpen=!1,Ot({forced:!0})},1e3)});return function(e){return u.apply(this,arguments)}}();var c=document.createElement("button");c.className="ettpd-pref-btn",c.textContent="ğŸ§¹ Clean List",c.onclick=e=>{e.stopPropagation(),U.downloading.isActive||U.downloading.isDownloadingAll?Ce("Download in progress","Please wait for the download to be over or refresh!"):(U.downloadedURLs=[],U.allDirectLinks=[],U.allItemsEverSeen={},U.displayedState.itemsHash="",U.displayedState.path=window.location.pathname,U.ui.isPreferenceBoxOpen=!1,U.ui.isScrapperBoxOpen=!1,Ce("ğŸ”„ All set!","The download list now shows only the posts visible on the main screen â€” nothing from the sidebar.<br><br>ğŸ’¡ <b>Tip:</b> To scrape this page, scroll all the way down, then click <b>Download All</b> once you're happy with your list."),setTimeout(()=>{Ot({forced:!0})},1e3))},l.appendChild(s),l.appendChild(c);var D=document.createElement("div");D.className="ettpd-pref-label",D.textContent="Downloader Preferences:";var p=A("Skip Failed Downloads","skipFailedDownloads",()=>{U.downloadPreferences.skipFailedDownloads=!U.downloadPreferences.skipFailedDownloads},U.downloadPreferences.skipFailedDownloads),F=A("Skip Ads","skipAds",()=>{U.downloadPreferences.skipAds=!U.downloadPreferences.skipAds},U.downloadPreferences.skipAds,"Will not download ads, buy you will still see ads."),m=A("Include CSV File","includeCSV",()=>{U.downloadPreferences.includeCSV=!U.downloadPreferences.includeCSV},U.downloadPreferences.includeCSV),v=A("Hide Confetti ğŸ‰","disableConfetti",()=>{U.downloadPreferences.disableConfetti=!U.downloadPreferences.disableConfetti,localStorage.setItem(u,U.downloadPreferences.disableConfetti)},U.downloadPreferences.disableConfetti);var C=function(){var e=document.createElement("div");e.className="ettpd-theme-toggle-container",e.style.display="flex",e.style.alignItems="center",e.style.gap="10px",e.style.marginTop="8px";var t=document.createElement("label");t.className="ettpd-label",t.textContent="Theme:",t.style.marginRight="8px";var u=document.createElement("select");u.name="themeMode",u.className="ettpd-select",u.style.cursor="pointer";var n=U.ui.themeMode||"dark",a="classic"===n?"light":n;if([{value:"dark",label:"ğŸŒ™ Dark"},{value:"light",label:"â˜€ï¸ Light"},{value:"system",label:"ğŸ–¥ï¸ System"}].forEach(e=>{var{value:t,label:n}=e,o=document.createElement("option");o.value=t,o.textContent=n,t===a&&(o.selected=!0),u.appendChild(o)}),u.onchange=e=>{var t=e.target.value;U.ui.themeMode=t,localStorage.setItem(d,t);var u="system"===t?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":t,n=document.getElementById(f);n&&("dark"===u?(n.classList.add("ettpd-theme-dark"),n.classList.remove("ettpd-theme-classic")):(n.classList.add("ettpd-theme-classic"),n.classList.remove("ettpd-theme-dark"))),document.querySelectorAll(".ettpd-modal-overlay").forEach(e=>{"dark"===u?(e.classList.add("ettpd-theme-dark"),e.classList.remove("ettpd-theme-classic")):(e.classList.add("ettpd-theme-classic"),e.classList.remove("ettpd-theme-dark"))}),E("Theme set to ".concat("system"===t?"System":"dark"===t?"Dark":"Light"," mode"))},"system"===a){var o=e=>{if("system"===U.ui.themeMode){var t=e.matches?"dark":"light",u=document.getElementById(f);u&&("dark"===t?(u.classList.add("ettpd-theme-dark"),u.classList.remove("ettpd-theme-classic")):(u.classList.add("ettpd-theme-classic"),u.classList.remove("ettpd-theme-dark")))}};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o),u._systemThemeHandler=o}return e.appendChild(t),e.appendChild(u),e}(),g=function(){var e=document.createElement("label");e.className="ettpd-label",e.textContent="Auto Scroll Mode (".concat(!Ct()||ht()?"Available":"Unavailable",")");var t=document.createElement("select");t.name="scrollMode",t.className="ettpd-select",[{value:"onVideoEnd",label:"On Video End",icon:"repost"},{value:"always",label:"Anytime (Load More)",icon:"refresh"},{value:"off",label:"Off",icon:"stop"}].forEach(e=>{var{value:u,label:n}=e,a=document.createElement("option");a.value=u,a.textContent=n,t.appendChild(a)}),t.value=U.downloadPreferences.autoScrollMode,t.onchange=e=>{U.downloadPreferences.autoScrollMode=e.target.value,E('Auto Scroll Mode set to "'.concat(e.target.selectedOptions[0].text,'"'))};var u=document.createElement("div");return u.className="ettpd-scroll-settings",u.appendChild(e),u.appendChild(t),u}(),h=document.createElement("div");function E(e){return h.innerHTML="<span>Applying...</span>",o.appendChild(h),new Promise((t,u)=>{setTimeout(()=>{h.innerHTML="<span>".concat(e,"</span>"),setTimeout(()=>{h.remove(),Ot({forced:!0})},1500)},1500)})}function A(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=document.createElement("label");o.className="ettpd-checkbox-container";var r=document.createElement("input");r.type="checkbox",r.checked=null!=n&&n,r.name=t,r.onchange=n=>{u?u(n):U[t]=r.checked,E("".concat(e," saved!"))};var l=document.createElement("span");return l.textContent=e,l.title=a,o.appendChild(r),o.appendChild(l),o}h.className="ettpd-reset-feedback";var y=document.createElement("button");return y.className="ettpd-pref-btn",y.textContent="ğŸ“ File Paths Preferences",y.onclick=e=>{e.stopPropagation(),Je()},o.append(D,p,F,m,v,C,g,r,y,l),o}(),{container:l,settingsBtn:s,userPostsBtn:c}=function(e){var t=document.createElement("div");t.className="ettpd-settings-scrapper-controls-container",t.style.display="flex",t.style.justifyContent="space-between";var u=function(e){var t=document.createElement("button");function u(){U.ui.isPreferenceBoxOpen?(U.ui.isScrapperBoxOpen=!1,document.getElementById(A)&&(document.getElementById(A).style.display=U.ui.isScrapperBoxOpen?"flex":"none"),t.classList.add("ettpd-settings-open"),document.querySelectorAll(".ettpd-settings-toggle").forEach(e=>{e!==t&&e.textContent.includes("Scrapper")&&e.classList.remove("ettpd-settings-open")})):t.classList.remove("ettpd-settings-open")}return t.className="ettpd-settings-toggle",he(t,"Settings","settings"),t.title="Click to toggle settings",t.onclick=n=>{n.stopPropagation(),U.ui.isScrapperBoxOpen=!1,document.getElementById(A)&&(document.getElementById(A).style.display="none"),e.style.display="none"===e.style.display?"flex":"none",U.ui.isPreferenceBoxOpen="flex"===e.style.display,u(),document.querySelectorAll(".ettpd-settings-toggle").forEach(e=>{e!==t&&e.textContent.includes("Scrapper")&&e.classList.remove("ettpd-settings-open")})},u(),t}(e);u.style.flex="1";var n=document.createElement("button");return n.className="ettpd-settings-toggle",he(n,"Scrapper","folder"),n.title="Download/Archive likes, reposts, favorites or collections",n.style.flex="1",t.appendChild(u),t.appendChild(n),{container:t,settingsBtn:u,userPostsBtn:n}}(r),D=document.createElement("div");D.id=A;var p,F=function(){var e=document.createElement("div");e.id=w+"-container",e.className="ettpd-download-all-container";var t=document.createElement("button");t.id=w,t.className="ettpd-btn download-all-btn",he(t,"Download","down"),t.disabled=!0,t.onclick=e=>{e.stopPropagation(),t.disabled||function(e){Mt.apply(this,arguments)}(t)};var u=document.createElement("button");u.id=w+"-pause",u.className="ettpd-btn download-all-btn-pause",he(u,"Pause","stop"),u.disabled=!0,u.style.display="none",u.title="Pause downloading",u.onclick=e=>{e.stopPropagation(),U.downloading.isDownloadingAll&&(U.downloading.pausedAll=!U.downloading.pausedAll,U.downloading.pausedAll?(he(u,"Resume","play"),u.title="Resume downloading"):(he(u,"Pause","stop"),u.title="Pause downloading"))};var n=document.createElement("div");return n.id=w+"-message",n.className="ettpd-scrapper-message",n.style.display="none",n.innerHTML='\n    <strong>ğŸ’¡ Use the Scrapper instead!</strong><br>\n    <span style="font-size: 11px;">Pick a tab (e.g., Scrape Videos), then click Start to begin automated downloading.</span>\n  ',n.style.fontSize="12px",n.style.color="#666",n.style.marginTop="5px",n.style.textAlign="center",n.style.padding="10px",n.style.borderRadius="5px",n.style.backgroundColor="#f0f0f0",n.style.border="1px solid #ccc",n.style.lineHeight="1.5",e.appendChild(t),e.appendChild(u),e.appendChild(n),e}(),m=F.querySelector("#"+w),v=((p=document.createElement("button")).className="ettpd-btn ettpd-current-video-btn",p.textContent="Download Current",p.disabled=!0,p.onclick=()=>{},p.style.width="100%",p.style.marginBottom="5px",p.style.marginTop="10px",p.style.display="none",p),C=function(){var e=document.createElement("button");e.className="ettpd-btn ettpd-report-bug",e.innerText="Report Bugs (Quick fix: Refresh/Login/LogoutğŸ˜‰)";var t=document.createElement("a");return t.target="_blank",t.href="https://support.briceka.com",t.appendChild(e),t}(),g=function(){var e=document.createElement("span");e.className="ettpd-span ettpd-copyright";var t=(new Date).getFullYear();return e.innerHTML="&copy; ".concat(t,' <a href="https://briceka.com/donate" target="_blank">Buy the team a coffee â˜•</a> <strong>Fuels new projects.</strong>'),e.querySelector("a").addEventListener("click",e=>{e.stopPropagation()}),e.onclick=qe,e}(),h=document.createElement("ol");h.className="ettpd-ol";var E=function(){var t=document.createElement("button");return t.textContent="Ã—",t.id="ettpd-close",t.onclick=()=>{U.ui.isDownloaderClosed=!0,localStorage.setItem(e,"true"),qe()},t}();o.append(l,D,r,F,v,C,g,h,E);var y={preferencesBox:r,settingsBtn:s,userPostsBtn:c,scrapperContainer:D,downloadAllBtn:m,currentVideoBtn:v,list:h},b=()=>{U.ui.isScrapperBoxOpen&&U.ui.isPreferenceBoxOpen&&(U.ui.isScrapperBoxOpen=!0,U.ui.isPreferenceBoxOpen=!1),D&&(D.style.display=U.ui.isScrapperBoxOpen?"flex":"none"),r&&(r.style.display=U.ui.isPreferenceBoxOpen?"flex":"none"),s&&s.classList.toggle("ettpd-settings-open",U.ui.isPreferenceBoxOpen),c&&c.classList.toggle("ettpd-settings-open",U.ui.isScrapperBoxOpen),m&&Le(m)};y.updateVisibleBox=b,b(),c.onclick=e=>{e.stopPropagation(),U.ui.isPreferenceBoxOpen=!1,U.ui.isScrapperBoxOpen=!U.ui.isScrapperBoxOpen,b()},o._ettpdRefs=y}(D),D._structureInitialized=!0);var F=D._ettpdRefs;if(null==F||null===(s=F.updateVisibleBox)||void 0===s||s.call(F),Le(null==F?void 0:F.downloadAllBtn,r),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e){var u=document.location.pathname.split("/")[3],n=t.find(e=>u&&e.videoId===u);if(!n)return e.style.display="none",e.disabled=!0,e.textContent="Download Current",void(e.onclick=()=>{});e.style.display="block",e.disabled=!1,e.textContent=n.isImage?"Download Current Images":"Download Current",n.isImage?e.onclick=e=>wt(e,n):e.onclick=function(){var t=me(function*(t){var u;null==t||null===(u=t.stopPropagation)||void 0===u||u.call(t),e.disabled=!0,e.cloneNode(!0),e.textContent="";var a=ge("hourglass",16);a.style.marginRight="4px",e.appendChild(a),e.appendChild(document.createTextNode("Downloading..."));try{yield Bt(n),e.textContent="";var o=ge("check",16);o.style.marginRight="4px",e.appendChild(o),e.appendChild(document.createTextNode("Done!"))}catch(t){e.textContent="";var r=ge("error",16);r.style.marginRight="4px",e.appendChild(r),e.appendChild(document.createTextNode("Failed"))}finally{setTimeout(()=>{e.disabled=!1,e.textContent=originalText},1500)}});return function(e){return t.apply(this,arguments)}}()}}(null==F?void 0:F.currentVideoBtn,r),r.length>0){U.recommendationsLeaderboard.newlyRecommendedUrls=r;try{setTimeout(()=>{!function(e){if(U.recommendationsLeaderboard.currentlyUpdating)U.debug.active;else if(U.recommendationsLeaderboard.lastUpdateHash&&U.recommendationsLeaderboard.lastUpdateHash===e)U.debug.active;else{U.recommendationsLeaderboard.currentlyUpdating=!0,U.recommendationsLeaderboard.lastUpdateHash=e;try{var t=Jt(),u=U.recommendationsLeaderboard.newlyRecommendedUrls||[],n=u.length,a=Number(localStorage.getItem(C)||0)+n,r=localStorage.getItem(g),l={count:0,weekId:t};if(r)try{var i=JSON.parse(r);i.weekId===t&&(l=i)}catch(e){}if(l.count+=n,U.recommendationsLeaderboard.allTimeRecommendationsCount=a,U.recommendationsLeaderboard.weekRecommendationsData=l,localStorage.setItem(C,a),"missing"==l.weekId)throw Error("Tried to save missing to db::");localStorage.setItem(g,JSON.stringify(l));var d=JSON.parse(localStorage.getItem(h)||"{}"),s=JSON.parse(localStorage.getItem(E)||"{}");u.forEach(e=>{if(!e.isTrackedAsRecommended){e.isTrackedAsRecommended=!0;var u=e.authorId||"--unknown--",n=u;d[u]?(d[u].count+=1,d[u].lastUpdatedAt=t):d[u]={count:1,username:n,lastUpdatedAt:t},s[t]||(s[t]={}),s[t][u]?s[t][u].count+=1:s[t][u]={count:1,username:n}}});var c=Object.keys(s).sort();if(c.length>12){var D=c.slice(0,c.length-12);for(var p of D)delete s[p]}for(var[F,m]of Object.entries(d)){var{count:v,lastUpdatedAt:f}=m,A=v<5,y=Vt(f,t)>12;if(A&&y){for(var w of(delete d[F],Object.keys(s)))delete s[w][F];U.debug.active}}localStorage.setItem(h,JSON.stringify(d)),localStorage.setItem(E,JSON.stringify(s));var b=U.currentTierProgress.recommendations||0,B=Wt(U.recommendationsLeaderboard.allTimeRecommendationsCount),x=B.min;if(x>b)try{U.currentTierProgress.recommendations=x,localStorage.setItem(o,JSON.stringify(U.currentTierProgress)),Xt("tier",function(e){var{emoji:t,name:u,min:n}=e;return su(cu(I),{emoji:t,name:u,min:Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(n)})}(B),B.min)}catch(e){}U.debug.active}catch(e){U.debug.active}finally{U.recommendationsLeaderboard.currentlyUpdating=!1}}}(l)},0)}catch(e){}}else U.recommendationsLeaderboard.newlyRecommendedUrls=[];return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e){if(!t.length)return e.replaceChildren(((u=document.createElement("li")).className="ettpd-li ettpd-empty",u.textContent="No videos found to display ğŸ˜”",u)),void e.style.setProperty("--list-length","0");var u,n=new Map(Array.from(e.children).map(e=>[e.dataset.videoId,e])),a=document.createDocumentFragment(),o=[...t].reverse(),r=document.location.pathname.split("/")[3],l=!1;o.forEach(e=>{var t=e.videoId||e.id;if(t){var u=function(e){return[e.videoId||e.id||"",e.authorId||"",e.desc||"",e.downloaderHasLowConfidence?"1":"0",e.isAd?"1":"0",e.isImage?"img:".concat((e.imagePostImages||[]).join("|")):"vid:".concat(e.url||"")].join("|")}(e),o=!l&&r&&r===(null==e?void 0:e.videoId),i=n.get(t);if(i&&i.dataset.entryHash===u){n.delete(t);var d=i.querySelector(".ettpd-author-wrapper");if(d){var s=d.querySelector('.ettpd-emoji[data-role="current-video"]');if(s&&s.remove(),o){var c=document.createElement("span");c.title="Currently playing video",c.className="ettpd-emoji",c.dataset.role="current-video";var D=ge("play",14);c.appendChild(D),d.insertBefore(c,d.firstChild)}}}else i&&(n.delete(t),i.remove()),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{markAsCurrent:u=!1}=t,n=document.createElement("li");n.className="ettpd-li",n.dataset.videoId=e.videoId||e.id||"";var a=document.createElement("div");a.className="ettpd-text-container";var o=document.createElement("div");if(o.className="ettpd-author-wrapper",u){var r=document.createElement("span");r.title="Currently playing video",r.className="ettpd-emoji",r.dataset.role="current-video";var l=ge("play",14);r.appendChild(l),o.appendChild(r)}if(null!=e&&e.downloaderHasLowConfidence){var i=document.createElement("span");i.title="Low confidence data",i.className="ettpd-emoji";var d=ge("info",14);i.appendChild(d),o.appendChild(i)}if(null!=e&&e.isAd){var s=document.createElement("span");s.textContent="ğŸ“£",s.title="Sponsored or ad content",s.className="ettpd-emoji",o.appendChild(s)}var c=document.createElement("a");c.className="ettpd-a ettpd-author-link",c.target="_blank",c.href="https://www.tiktok.com/@".concat(null==e?void 0:e.authorId),c.innerText=null!=e&&e.authorId?"@".concat(e.authorId):"Unknown Author",o.appendChild(c);var D=document.createElement("span");D.className="ettpd-desc-span";var p=(null==e?void 0:e.desc)||"",F=p.length>100?p.slice(0,100)+"...":p,m=!1;D.innerText=F,p.length>100?(D.classList.add("ettpd-desc-expandable"),D.style.cursor="pointer",D.title="Click to expand/collapse"):(D.style.cursor="default",D.title="Description"),D.onclick=()=>{m=!m,D.innerText=m?p:F,m?(D.classList.remove("ettpd-desc-expandable"),D.classList.add("ettpd-desc-expanded")):(D.classList.remove("ettpd-desc-expanded"),D.classList.add("ettpd-desc-expandable"))},a.append(o,D);var v=document.createElement("div");if(v.className="ettpd-download-btn-holder",e.isImage&&Array.isArray(e.imagePostImages)){var C=document.createElement("div");C.className="ettpd-images-download-all-container";var g=document.createElement("button"),h=document.createElement("div");h.className="ettpd-download-btn ettpd-tiktok-btn",h.title="Open on TikTok",h.onclick=t=>{t.stopPropagation(),null!=e&&e.videoId&&null!=e&&e.authorId&&window.open("https://tiktok.com/@".concat(e.authorId,"/photo/").concat(e.videoId),"_blank")};var E=document.createElement("span");h.appendChild(E),C.appendChild(h),he(g,"Download All Images","down"),g.className="ettpd-download-btn",g.style.marginBottom="10px",g.style.marginTop="5px",g.onclick=t=>wt(t,e),C.appendChild(g),v.appendChild(C);var f=document.createElement("ol");f.className="ettpd-image-download-list",e.imagePostImages.forEach((t,u)=>{var n=document.createElement("li");n.className="ettpd-image-download-item";var a=document.createElement("button"),o=document.createElement("span");a.className="ettpd-download-btn ettpd-view-btn",a.onclick=e=>{e.stopPropagation(),t&&window.open(t,"_blank")},a.appendChild(o);var r=document.createElement("button");r.textContent="Download",r.className="ettpd-download-btn",r.onclick=function(){var t=me(function*(t){t.stopPropagation();var n=r.cloneNode(!0);r.textContent="";var a=ge("hourglass",16);a.style.marginRight="4px",r.appendChild(a),r.appendChild(document.createTextNode("Downloading..."));var o=Date.now();yield new Promise(e=>setTimeout(e,600));try{yield Bt(e,{imageIndex:u});var l=Date.now()-o,i=Math.max(0,1e3-l);setTimeout(()=>{r.textContent="";var e=ge("check",16);e.style.marginRight="4px",r.appendChild(e),r.appendChild(document.createTextNode("Done!")),setTimeout(()=>{r.replaceWith(n.cloneNode(!0))},3e3)},i)}catch(e){var d=Date.now()-o,s=Math.max(0,1e3-d);setTimeout(()=>{r.textContent="";var e=ge("error",16);e.style.marginRight="4px",r.appendChild(e),r.appendChild(document.createTextNode("Failed!")),setTimeout(()=>{r.replaceWith(n.cloneNode(!0))},3e3)},s)}});return function(e){return t.apply(this,arguments)}}(),n.append(a,r),f.appendChild(n)}),v.appendChild(f)}else{var A=document.createElement("div");A.className="ettpd-download-btn ettpd-tiktok-btn",A.title="Open on TikTok";var y=document.createElement("span");y.onclick=t=>{t.stopPropagation(),null!=e&&e.videoId&&null!=e&&e.authorId&&window.open("https://tiktok.com/@".concat(e.authorId,"/video/").concat(e.videoId),"_blank")},A.appendChild(y);var w=document.createElement("div");w.className="ettpd-download-btn ettpd-view-btn",w.title="Open Direct Link";var b=document.createElement("span");b.onclick=t=>{t.stopPropagation(),null!=e&&e.url&&window.open(e.url,"_blank")},w.appendChild(b);var B=document.createElement("button");B.textContent="Download",B.className="ettpd-download-btn",B.onclick=function(){var t=me(function*(t){t.stopPropagation();var u=B.cloneNode(!0);B.textContent="";var n=ge("hourglass",16);n.style.marginRight="4px",B.appendChild(n),B.appendChild(document.createTextNode("Downloading..."));var a=Date.now();yield new Promise(e=>setTimeout(e,600));try{yield Bt(e);var o=Date.now()-a,r=Math.max(0,1e3-o);setTimeout(()=>{B.textContent="";var e=ge("check",16);e.style.marginRight="4px",B.appendChild(e),B.appendChild(document.createTextNode("Done!")),setTimeout(()=>{B.replaceWith(u.cloneNode(!0))},3e3)},r)}catch(e){var l=Date.now()-a,i=Math.max(0,1e3-l);setTimeout(()=>{B.textContent="";var e=ge("error",16);e.style.marginRight="4px",B.appendChild(e),B.appendChild(document.createTextNode("Failed!")),setTimeout(()=>{B.replaceWith(u.cloneNode(!0))},3e3)},i)}});return function(e){return t.apply(this,arguments)}}();var x=document.createElement("div");x.className="ettpd-download-btns-container",x.append(A,w,B),v.append(x)}return n.append(a,v),n}(e,{markAsCurrent:o}),i.dataset.entryHash=u;o&&(l=!0),i.dataset.videoId=t,a.appendChild(i)}}),n.forEach(e=>e.remove()),e.replaceChildren(a),e.style.setProperty("--list-length",String(o.length))}}(null==F?void 0:F.list,r),p&&!D.dataset.statsInitialized&&(setTimeout(me(function*(){Ue(),yield Ne()})),D.dataset.statsInitialized="true"),U.displayedState.itemsHash=l,U.displayedState.path=window.location.pathname,D}}function qe(){var t,u;if(null===(t=document.getElementById(f))||void 0===t||t.remove(),!document.getElementById(y)){var n=document.createElement("button");n.id=y,n.className="ettpd-show-btn",n.title="Drag to move me anywhere",n.setAttribute("aria-label","Open downloader (drag to move me anywhere)");var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width","16"),a.setAttribute("height","16"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("fill","none"),a.setAttribute("stroke","currentColor"),a.setAttribute("stroke-width","2"),a.setAttribute("stroke-linecap","round"),a.setAttribute("stroke-linejoin","round"),a.style.verticalAlign="middle",a.style.marginRight="4px";var o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("fill","currentColor"),[[9,7],[9,11],[9,15],[13,7],[13,11],[13,15]].forEach(e=>{var[t,u]=e,n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("cx",String(t)),n.setAttribute("cy",String(u)),n.setAttribute("r","0.7"),o.appendChild(n)}),a.appendChild(o),n.appendChild(a);var r=document.createElement("span");if(r.textContent="Open",n.appendChild(r),!U.ui.hasSeenShowButtonHint){n.classList.add("ettpd-show-btn-pop"),U.ui.hasSeenShowButtonHint=!0;try{localStorage.setItem(c,"true")}catch(e){}setTimeout(()=>{n.classList.remove("ettpd-show-btn-pop")},900)}"dark"===fe()&&n.classList.add("ettpd-theme-dark");var l=localStorage.getItem(s);if(l)try{var i=JSON.parse(l);if(null!=i.left&&null!=i.top){var d=window.innerWidth,D=window.innerHeight;n.style.left="".concat(i.left,"px"),n.style.top="".concat(i.top,"px"),n.style.bottom="auto",n.style.right="auto",setTimeout(()=>{var e=n.getBoundingClientRect(),t=d-e.width,u=D-e.height,a=Math.max(0,Math.min(t,i.left)),o=Math.max(0,Math.min(u,i.top));a===i.left&&o===i.top||(n.style.left="".concat(a,"px"),n.style.top="".concat(o,"px"),localStorage.setItem(s,JSON.stringify({left:a,top:o})))},0)}}catch(e){}n.addEventListener("click",t=>{setTimeout(()=>{if("true"!==n.dataset.wasDragging){var t;if(!pe())return void alert("Extension is disabled. Please enable it from the extension popup to use the downloader.");localStorage.setItem(e,"false"),U.ui.isDownloaderClosed=!1,U.ui.isPreferenceBoxOpen=!1,null===(t=document.getElementById(y))||void 0===t||t.remove(),Ot({forced:!0})}},50)}),function(e){var t=0,u=0,n=!1,a=0,o=0;e.addEventListener("mousedown",r=>{n=!0;var l=e.getBoundingClientRect();t=r.clientX-l.left,u=r.clientY-l.top,a=r.clientX,o=r.clientY,document.body.style.userSelect="none",e.style.cursor="grabbing",e.classList.add("ettpd-show-dragging"),e.dataset.wasDragging="false"});var r=()=>{var t=window.innerWidth,u=window.innerHeight,n=e.getBoundingClientRect(),a=n.left,o=n.top,r=t-n.width,l=u-n.height;return a=Math.max(0,Math.min(r,a)),o=Math.max(0,Math.min(l,o)),e.style.left="".concat(a,"px"),e.style.top="".concat(o,"px"),e.style.bottom="auto",e.style.right="auto",{left:a,top:o}},l=r=>{if(n){var l=Math.abs(r.clientX-a),i=Math.abs(r.clientY-o);(l>2||i>2)&&(e.dataset.wasDragging="true");var d=window.innerWidth,c=window.innerHeight,D=e.getBoundingClientRect(),p=r.clientX-t,F=r.clientY-u,m=d-D.width,v=c-D.height;p=Math.max(0,Math.min(m,p)),F=Math.max(0,Math.min(v,F)),e.style.left="".concat(p,"px"),e.style.top="".concat(F,"px"),e.style.bottom="auto",e.style.right="auto",e._savePositionTimeout||(e._savePositionTimeout=setTimeout(()=>{var t=JSON.stringify({left:p,top:F});localStorage.setItem(s,t),e._savePositionTimeout=null},100))}},i=()=>{if(e&&e.parentElement){r();var t=r();localStorage.setItem(s,JSON.stringify(t))}};window.addEventListener("resize",i),document.addEventListener("mousemove",l);var d=()=>{if(n){n=!1,document.body.style.userSelect="",e.style.cursor="grab",e.classList.remove("ettpd-show-dragging"),e._savePositionTimeout&&(clearTimeout(e._savePositionTimeout),e._savePositionTimeout=null);var t=e.getBoundingClientRect(),u=JSON.stringify({left:t.left,top:t.top});localStorage.setItem(s,u),setTimeout(()=>{e.dataset.wasDragging="false"},100)}};document.addEventListener("mouseup",d),e._cleanupDraggable=()=>{window.removeEventListener("resize",i),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",d)}}(n),null===(u=document.body)||void 0===u||u.appendChild(n)}}function He(){if(U.downloading.isDownloadingAll||U.downloading.isActive)Ce("Download in progress","Wait for the download to be over or refresh ğŸ™‚");else{(U.downloadedURLs.length||U.sessionHasConfirmedDownloads)&&Xt("tier","",U.downloadedURLs.length);var e=document.createElement("div");e.className="ettpd-tab-content-wrapper",e.classList.add("ettpd-stats-modal");var t=document.createElement("div");t.className="ettpd-tab-nav";var u=[{key:"downloads",label:"Downloads",icon:"down"},{key:"recommendations",label:"Recommendations",icon:"star"}].map(e=>{var{key:t,label:u,icon:n}=e,a=document.createElement("button");return a.className="ettpd-tab-btn",n?he(a,u,n):a.textContent=u,a.dataset.key=t,a});u.forEach(e=>t.appendChild(e));var n=document.createElement("div");n.className="ettpd-stats-modal-body";var a=e=>{var t,u,a,o,r,l;"downloads"===e?(t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=localStorage.getItem(m);if(!t)return[];try{var u=JSON.parse(t);return Object.entries(u).map(e=>{var[t,u]=e;return{authorId:t,username:u.username||t,count:Number(u.count)||0}}).sort((e,t)=>t.count-e.count).slice(0,e)}catch(e){return[]}}(),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,u=localStorage.getItem(v);if(!u)return[];try{var n=JSON.parse(u)[e]||{};return Object.entries(n).map(e=>{var[t,u]=e;return{authorId:t,username:u.username||t,count:Number(u.count)||0}}).sort((e,t)=>t.count-e.count).slice(0,t)}catch(e){return[]}}(),a=U.leaderboard.allTimeDownloadsCount,o=U.leaderboard.weekDownloadsData.count,l=zt(a)):(t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=localStorage.getItem(h);if(!t)return[];try{var u=JSON.parse(t);return Object.entries(u).map(e=>{var[t,u]=e;return{authorId:t,username:u.username||t,count:Number(u.count)||0}}).sort((e,t)=>t.count-e.count).slice(0,e)}catch(e){return[]}}(),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,u=localStorage.getItem(E);if(!u)return[];try{var n=JSON.parse(u)[e]||{};return Object.entries(n).map(e=>{var[t,u]=e;return{authorId:t,username:u.username||t,count:Number(u.count)||0}}).sort((e,t)=>t.count-e.count).slice(0,t)}catch(e){return[]}}(),a=U.recommendationsLeaderboard.allTimeRecommendationsCount||0,o=U.recommendationsLeaderboard.weekRecommendationsData.count||0,l=Wt(a));var i=a;r='<span class="ettpd-tier">'.concat(l.emoji," ").concat(l.name,"</span>");var d=function(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=t.length?t.map((e,t)=>{var u=e.username||"tiktok";return'\n            <li class="ettpd-leaderboard-item">\n              <div class="ettpd-leaderboard-rank">'.concat(t+1,'</div>\n              <div class="ettpd-leaderboard-meta">\n                <a class="ettpd-leaderboard-name" href="https://tiktok.com/@').concat(u,'" target="_blank" rel="noopener noreferrer">@').concat(u,'</a>\n                <span class="ettpd-leaderboard-handle">tiktok.com/@').concat(u,'</span>\n              </div>\n              <div class="ettpd-leaderboard-count" title="').concat(e.count.toLocaleString(),'">\n                ').concat(Re(e.count),'\n                <span class="ettpd-leaderboard-count-label">posts</span>\n              </div>\n            </li>')}).join(""):'<li class="ettpd-leaderboard-empty">No entries yet</li>';return'\n        <section class="ettpd-stats-card">\n          <div class="ettpd-stats-card__header">\n            <div class="ettpd-stats-card__title">'.concat(e,'</div>\n            <div class="ettpd-stats-card__total" title="').concat(u.toLocaleString(),'">\n              <span class="ettpd-total-label">Total</span>\n              <span class="ettpd-total-value">').concat(Re(u),'</span>\n            </div>\n          </div>\n          <ol class="ettpd-leaderboard-list">\n            ').concat(n,"\n          </ol>\n        </section>\n      ")},s=o===a&&a>0,c=s?'<div class="ettpd-stats-banner">You peaked this week ğŸ˜®â€ğŸ’¨</div>':"";n.innerHTML='\n    <div class="ettpd-summary-line black-text">\n      You\'ve '.concat("downloads"===e?"downloaded":"been recommended",' <strong title="').concat(i.toLocaleString(),'">').concat(Re(i),"</strong> posts. Level: ").concat(r,"\n    </div>\n    ").concat(s?d("ğŸ”¥ Weekly Top (also All Time)",u,o)+c:d("ğŸ”¥ Weekly Top",u,o)+d("ğŸ† All Time",t,a),'\n    <p class="alert ettpd-disclaimer">ğŸ“Œ Stats are local to your browser. You\'re in control. ğŸ¤</p>\n  ')};u.forEach(e=>{e.addEventListener("click",()=>{u.forEach(e=>e.classList.remove("active")),e.classList.add("active"),a(e.dataset.key)})}),u[0].classList.add("active"),a("downloads");var r=document.createElement("div");r.className="ettpd-modal-buttons-container";var l=document.createElement("a");l.href="https://briceka.com/tikdown",l.target="_blank",l.className="ettpd-modal-button",he(l,"TikDown Web Version","globe");var i=document.createElement("a");i.href="https://briceka.com/donate",i.target="_blank",i.className="ettpd-modal-button",i.textContent="â˜• Tip/Coffee Jar";var d=document.createElement("button");d.className="ettpd-modal-button reset-leaderboard",d.textContent="ğŸ§¹ Reset",d.addEventListener("click",()=>{var e;confirm("âš ï¸ This will wipe your local leaderboard stats (downloads + recommendations). Nothing else will be touched. Want to proceed with the reset?")&&confirm("ğŸš¨ Just making sure â€” this can't be undone. All your leaderboard stats will be gone. Still want to do it?")&&([p,F,m,v,C,g,h,E,o].forEach(e=>localStorage.removeItem(e)),U.leaderboard.allTimeDownloadsCount=0,U.leaderboard.weekDownloadsData={weekId:"missing",count:0},U.recommendationsLeaderboard.allTimeRecommendationsCount=0,U.recommendationsLeaderboard.weekRecommendationsData={weekId:"missing",count:0},U.currentTierProgress={downloads:0,recommendations:0},Ce("Success","âœ… All leaderboard data has been reset."),null===(e=document.getElementById(b))||void 0===e||e.remove(),Ot({forced:!0}))}),r.appendChild(d),r.appendChild(l),r.appendChild(i),e.appendChild(t),e.appendChild(n),Ve({children:[e,r],onClose:()=>{}})}}function Ve(e){var t,{children:u=[],onClose:n=null}=e,a=document.createElement("div");a.id=b,a.className="ettpd-modal-overlay",a.classList.add("dark"===fe()?"ettpd-theme-dark":"ettpd-theme-classic");var o=document.createElement("div");o.className="ettpd-modal-box-container";var r=document.createElement("button");r.textContent="Ã—",r.id="ettpd-close",r.setAttribute("aria-label","Close modal"),r.classList.add("ettpd-modal-close"),r.onclick=()=>{a.remove(),"function"==typeof n&&n()};var l=document.createElement("div");return l.className="ettpd-modal-box",u.forEach(e=>{"string"==typeof e?l.insertAdjacentHTML("beforeend",e):e instanceof HTMLElement&&l.appendChild(e)}),a.onclick=e=>{e.target===a&&(a.remove(),"function"==typeof n&&n())},o.appendChild(r),o.appendChild(l),a.appendChild(o),null===(t=document.body)||void 0===t||t.appendChild(a),a}function Je(){var e,t=Rt(),u=jt(),n=U.downloadPreferences.fullPathTemplate||{},a=n.template||"",o=n.label||"",r=document.createElement("div");r.className="layout",r.classList.add("ettpd-template-modal");var l=["videoId","authorUsername","authorNickname","desc","createTime","downloadTime","musicTitle","musicAuthor","views","duration","hashtags","sequenceNumber","ad","mediaType","tabName"],i=document.createElement("div");i.className="ettpd-template-instructions";var d=document.createElement("div");d.className="ettpd-template-tabs";var s=document.createElement("div");s.className="ettpd-template-panel";var c=[{key:"guide",label:"Guide",body:'\n        <p class="ettpd-template-subtitle">Use <code>{field}</code>, <code>{field|fallback}</code>, or <code>{field:maxLen|fallback}</code>. Defaults use <code>missing-{field}</code>. Click to see the full playbook.</p>\n        <details class="ettpd-template-accordion">\n          <summary style="cursor: pointer;">Read more</summary>\n          <ul class="ettpd-template-list">\n            <li><strong>Extensions</strong>: auto-added (<code>.jpeg</code> / <code>.mp4</code>).</li>\n            <li><strong>Numbering</strong>: <code>{sequenceNumber}</code> only on multi-image unless forced with <code>{sequenceNumber|required}</code>.</li>\n            <li><strong>Length</strong>: trim with <code>{desc:40|no-desc}</code> or any field. Use negative numbers for last N chars: <code>{videoId:-4}</code> takes last 4 characters.</li>\n            <li><strong>Paths</strong>: keep them relative; no leading <code>/</code> or <code>..</code>.</li>\n            <li><strong>Ads & media</strong>: <code>{ad}</code> adds "ad"; <code>{mediaType}</code> is <em>image</em>/<em>video</em>.</li>\n            <li><strong>Context</strong>: <code>{tabName}</code> follows the scrapper tab (Video, Reposts, Liked, Favorited).</li>\n          </ul>\n        </details>\n      '},{key:"fields",label:"Supported fields",body:'\n        <p><strong>Fields:</strong></p>\n        <code class="ettpd-template-code">'.concat(l.join(", "),'</code>\n        <div class="ettpd-template-grid">\n          <div><strong>{videoId}</strong><span>Unique post ID</span></div>\n          <div><strong>{authorUsername}</strong><span>@handle of the creator</span></div>\n          <div><strong>{authorNickname}</strong><span>Display name when available</span></div>\n          <div><strong>{desc}</strong><span>Caption/description text</span></div>\n          <div><strong>{createTime}</strong><span>Original post timestamp</span></div>\n          <div><strong>{downloadTime}</strong><span>When you downloaded it</span></div>\n          <div><strong>{musicTitle}</strong><span>Track title</span></div>\n          <div><strong>{musicAuthor}</strong><span>Track artist</span></div>\n          <div><strong>{views}</strong><span>View count if available</span></div>\n          <div><strong>{duration}</strong><span>Length in seconds</span></div>\n          <div><strong>{hashtags}</strong><span>Comma-separated tags</span></div>\n          <div><strong>{sequenceNumber}</strong><span>Index for multi-assets</span></div>\n          <div><strong>{ad}</strong><span>â€œadâ€ when marked as ad</span></div>\n          <div><strong>{mediaType}</strong><span>image or video</span></div>\n          <div><strong>{tabName}</strong><span>Video/Reposts/Liked/Favorited</span></div>\n        </div>\n      ')}],D=e=>{p.forEach(t=>t.classList.toggle("active",t.dataset.key===e));var t=c.find(t=>t.key===e);s.innerHTML=(null==t?void 0:t.body)||""},p=c.map(e=>{var t=document.createElement("button");return t.className="ettpd-template-tab",t.dataset.key=e.key,t.textContent=e.label,t.onclick=()=>D(e.key),d.appendChild(t),t});i.appendChild(d),i.appendChild(s),D("guide");var F=document.createElement("select");F.className="ettpd-template-select";var m=document.createElement("option");if(m.text="âš™ï¸ Select template...",m.value="",F.appendChild(m),t.forEach((e,t)=>{var u=document.createElement("option");u.value="user-".concat(t),u.text=e.label===o?"(Active) ".concat(e.label):e.label,e.label===o&&(u.selected=!0),F.appendChild(u)}),u.length){var v=document.createElement("option");v.text="-- Presets --",v.disabled=!0,F.appendChild(v),u.forEach((e,t)=>{var u=document.createElement("option");u.value="preset-".concat(t),u.text=e.label===o?"(Active) ".concat(e.label):e.label,e.label===o&&(u.selected=!0),u.title=e.example,F.appendChild(u)})}var C=document.createElement("input");C.type="text",C.name="label",C.placeholder="Template name (e.g. Default, ShortDesc)",C.value=o,C.className="ettpd-modal-input";var g=document.createElement("input");g.type="text",g.name="template",g.placeholder="downloads/{authorUsername}/{videoId}-{desc|no-desc}.mp4",g.value=a,g.className="ettpd-modal-input";var h=document.createElement("div");h.className="ettpd-modal-error";var E=document.createElement("div");E.className="ettpd-template-preview";var f=document.createElement("div");f.className="ettpd-template-active",o&&o==(null===(e=U.downloadPreferences.fullPathTemplate)||void 0===e?void 0:e.label)&&(f.textContent="Active template: ".concat(o));var A=document.createElement("code");A.style="font-size:12px;display:block;margin-top:4px;color:#888;";var y=document.createElement("button");y.className="ettpd-pref-btn",y.textContent="ğŸ’¾ Save & Apply";var w=document.createElement("button");function b(){var e,t=g.value.trim(),u=(e=>{var t=[];e.startsWith("/")&&!e.startsWith("@/@")&&t.push("Path must be relative (no leading / or drive letters)"),/\.\.|^[a-zA-Z]:/.test(e)&&t.push("No '..' or drive letters allowed");for(var u,n=/\{(\w+)(\|[^}]+)?\}/g;u=n.exec(e);)l.includes(u[1])||t.push("Unknown field: ".concat(u[1]));return t})(t);if(u.length){h.textContent="";var n=ge("warning",16);return n.style.marginRight="4px",h.appendChild(n),h.appendChild(document.createTextNode(u.join("; "))),void(E.textContent="")}h.textContent="";var a,o,r=e=>(null!=e?e:"").toString().replace(/(?:[\0-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u3191\u3196-\u319F\u31C0-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE3F\uDE49-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD24-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD6E\uDD86-\uDE5F\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF28-\uDF2F\uDF46-\uDF50\uDF55-\uDF6F\uDF82-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B-\uDF2F\uDF3C-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDF4F\uDF5A-\uDFAF\uDFB1-\uDFBF\uDFD5-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD836\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDD2F\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE97-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDFFF]|\uD834[\uDC00-\uDEBF\uDED4-\uDEDF\uDEF4-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDEEF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDCEF\uDCFA-\uDDCF\uDDEE\uDDEF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4A\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCAC\uDCB0\uDCB5-\uDD00\uDD2E\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/g,"-").slice(0,100),i=(null===(e=["img1","img2","img3","img4"])||void 0===e?void 0:e.length)>1,d=(a=new RegExp("\\{".concat("desc",":(-?\\d+)")),(o=t.match(a))?Number(o[1]):void 0),s=void 0!==d,c={videoId:r("7557564294825626893"),authorUsername:r("user456"),authorNickname:r("coolguy"),desc:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,u=(null!=e?e:"").toString().replace(/(?:[\0-,\/:-@\[-\^`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u3191\u3196-\u319F\u31C0-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE3F\uDE49-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD24-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD6E\uDD86-\uDE5F\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF28-\uDF2F\uDF46-\uDF50\uDF55-\uDF6F\uDF82-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B-\uDF2F\uDF3C-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDF4F\uDF5A-\uDFAF\uDFB1-\uDFBF\uDFD5-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD836\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDD2F\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE97-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDFFF]|\uD834[\uDC00-\uDEBF\uDED4-\uDEDF\uDEF4-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDEEF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDCEF\uDCFA-\uDDCF\uDDEE\uDDEF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4A\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCAC\uDCB0\uDCB5-\uDD00\uDD2E\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/g,"-");return u.length>t?u.slice(0,t):u}("My best post ever that should be trimmed",s&&d>0?d:100),createTime:"2020-08-23_1201",musicTitle:r("Chill Vibes"),musicAuthor:r("DJ Flow"),views:r("10234"),duration:r("30"),hashtags:([{name:"fun"},{name:"relax"}]||[]).map(e=>r(e.name||e)).join("-"),downloadTime:"2025-08-23_1201",isAd:!1,isImage:!1},D=dt(t,c,{sequenceNumber:4,isMultiImage:i}),p=st(D);p.startsWith("@/")&&(p=p.replace("@",B)),E.textContent="Example: ".concat(p,".mp4")}w.className="ettpd-pref-btn danger",he(w,"Delete Template","delete"),w.style="margin-right:15px;",F.onchange=()=>{var e=F.value;if(e){var t,[u,n]=e.split("-"),a=parseInt(n,10),o=Rt(),r=jt();"user"===u?(t=o[a],w.disabled=!1):(t=r[a],w.disabled=!1),t&&(g.value=t.template||t.fullPathTemplate,C.value=t.label,f.textContent="Selected: ".concat(t.label),A.textContent=t.example?"e.g. ".concat(t.example):"",b())}},b();var x=document.createElement("div");function S(e){return x.innerHTML="<span>Applying...</span>",r.appendChild(x),new Promise((t,u)=>{setTimeout(()=>{x.innerHTML="<span>".concat(e,"</span>"),setTimeout(()=>{x.remove(),Ot({forced:!0}),t()},1500)},1500)})}x.className="ettpd-reset-feedback",x.style.textAlign="center",y.onclick=me(function*(){if(b(),h.textContent)Ce("Error","Fix errors before saving.");else if(C.value.trim()){var e=C.value.trim(),n=Ut();n&&e===n.label&&Ce("âš ï¸ Template Name Warning",'The name "'.concat(e,'" will be automatically updated on next reload. Please rename your template to avoid automatic overrides.'),8e3);var a={label:e,template:g.value.trim()},o=t.filter(e=>e.label!==a.label);o.push(a),U.downloadPreferences.fullPathTemplate=a,_t(o),qt(),f.textContent="Applied & saved: ".concat(a.template),F.querySelectorAll("option").forEach(e=>e.remove());var r=Rt(),l=document.createDocumentFragment(),i=document.createElement("option");if(i.text="âš™ï¸ Select template...",i.value="",l.appendChild(i),r.forEach((e,t)=>{var u=document.createElement("option");u.value="user-".concat(t),u.text=e.label===a.label?"(Active) ".concat(e.label):e.label,e.label===a.label&&(u.selected=!0),l.appendChild(u)}),u.length){var d=document.createElement("option");d.text="-- Presets --",d.disabled=!0,l.appendChild(d),u.forEach((e,t)=>{var u=document.createElement("option");u.value="preset-".concat(t),u.text=e.label===a.label?"(Active) ".concat(e.label):e.label,e.label===a.label&&(u.selected=!0),u.title=e.example,l.appendChild(u)})}F.appendChild(l),yield S("âœ… Template saved and applied!")}else Ce("Error","Please enter a name.")}),w.onclick=me(function*(){var e=F.value;if(e){var[u,n]=e.split("-"),a=parseInt(n,10);if("user"===u){var o=t.splice(a,1)[0];_t(t),F.querySelector('option[value="'.concat(u,"-").concat(a,'"]')).remove(),C.value="",g.value="",f.textContent="",yield S("ğŸ—‘ï¸ Deleted template '".concat(o.label,"'."))}else Ce("Error","Cannot delete built-in presets.")}else Ce("Error","Select a user template to delete.")});var k=document.createElement("span");k.style.cssText="\n    color: var(--ettpd-text-primary, #333);\n    text-align: left;\n    display: block;\n    margin-bottom: 5px;\n  ",k.textContent="ğŸ¤¤ Create your own or copy existing template!",g.addEventListener("input",b),g.className="ettpd-modal-input",C.addEventListener("input",()=>w.disabled=!1);var N=document.createElement("div");N.style.cssText="\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 15px;\n    margin-top: 10px;\n    flex-wrap: wrap;\n  ",N.appendChild(f),N.appendChild(w),N.appendChild(y),r.append(i,F,A,k,C,g,h,E,N),Ve({children:[r],onClose:()=>S("Closed template editor.")})}function ze(e){var{wrapperId:t,author:u,videoId:n,getVideoSrc:a,parentEl:o,isSmallView:l,isImage:i,photoIndex:d,from:s}=e;if(o){var c="download-btn ".concat(n),D=i?"Image":"Video";if(!o.querySelector(".".concat(CSS.escape(n)))){var p=document.createElement("div");p.className="download-btn-container";var F=document.createElement("button");F.type="button",F.className=c,F.dataset.wrapperId=t,F.title="Download ".concat(D),F.setAttribute("aria-label","Download ".concat(D));var m=()=>{F.disabled=!1,F.innerHTML='<span class="download-btn-icon" aria-hidden="true"></span><span class="download-btn-label">'.concat("Save","</span>")};m(),F.addEventListener("click",function(){var e=me(function*(e){var t,o;e.preventDefault(),e.stopPropagation();var l=null!==(t=At(U.allItemsEverSeen[n]))&&void 0!==t?t:{videoId:n,authorId:u},s=null!==(o=null==l?void 0:l.url)&&void 0!==o?o:a();if(null!=s&&s.startsWith("http")){F.disabled=!0,F.textContent="Savingâ€¦";var c=!1;try{yield Pt(s,it(l,{imageIndex:d})),F.textContent="";var D=ge("check",16);D.style.marginRight="4px",F.appendChild(D),F.appendChild(document.createTextNode("Saved")),Xt("downloads",Kt(i?"photo":"video")),U.downloadPreferences.skipFailedDownloads||setTimeout(()=>{!function(){if(function(){var e,t,{lastRatedAt:u,lastShownAt:n}=U.userMeta||{},{leaderboard:a}=U,o=du(u);if(du(n)<90)return!1;if(Number.isFinite(o)&&o<90)return!1;var r=a.allTimeDownloadsCount||0,l=(null===(e=a.weekDownloadsData)||void 0===e?void 0:e.count)||0;if(!([25,50,100,200,500,1e3,2500,5e3].includes(r)||l>=25&&l%25==0))return!1;for(var i=(null===(t=a.weekDownloadsData)||void 0===t?void 0:t.weekId)||(new Date).toISOString().slice(0,10),d="".concat(i,":").concat(r,":").concat(l),s=0,c=0;c<d.length;c++)s=31*s+d.charCodeAt(c)>>>0;return s%100/100<.2}()){U.ui.isRatePopupOpen=!0,qe();var e=document.createElement("div");Object.assign(e.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.4)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999});var t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.zIndex="999",t.style.backgroundColor="rgba(31, 26, 26, 0.5)",t.innerHTML='\n  <div style="\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 400px;\n    max-width: 90%;\n    background-color: #ffffff;\n    color: #333333;\n    border-radius: 12px;\n    padding: 20px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    font-family: Arial, sans-serif;\n    text-align: center;\n  ">\n    <h2 style="margin-bottom: 15px; font-size: 1.5em; color: #1da1f2;">Download Complete! ğŸ‰</h2>\n    <p style="margin-bottom: 20px; font-size: 1em; line-height: 1.5; color: #555555;">\n      Your video has been successfully downloaded! ğŸ¥<br>\n      Use TikDown web version! ğŸ¥°\n    </p>\n    <a\n      href="https://briceka.com/tikdown"\n      target="_blank"\n      style="\n        display: inline-block;\n        background-color: #1da1f2;\n        color: white;\n        padding: 12px 20px;\n        font-size: 1em;\n        border-radius: 8px;\n        text-decoration: none;\n        font-weight: bold;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: background-color 0.3s ease;\n      "\n      onmouseover="this.style.backgroundColor=\'#0a84d6\';"\n      onmouseout="this.style.backgroundColor=\'#1da1f2\';"\n    >\n      Rate Now\n    </a>\n  </div>\n',e.appendChild(t),e.onclick=()=>{U.ui.isRatePopupOpen=!1,e.remove()},U.rateDonate.lastShownAt=Date.now(),U.rateDonate.shownCount+=1,localStorage.setItem(r,JSON.stringify(U.rateDonate)),document.body.appendChild(e)}}()},8e3)}catch(e){U.debug.active,c=!0}finally{c&&(F.textContent="Save Failed"),setTimeout(()=>{m()},5e3)}}else U.debug.active});return function(t){return e.apply(this,arguments)}}()),p.appendChild(F),o.appendChild(p)}}}function We(e,t){var u,n;if(e&&t){var a=!e.querySelector("video"),o=mt(t)||(null===(u=e.querySelector('a[href*="/@"]'))||void 0===u||null===(u=u.textContent)||void 0===u?void 0:u.slice(1))||pt()||(null===(n=lt(e))||void 0===n?void 0:n.username)||at()||"username";ze({wrapperId:e.id,author:o,videoId:t,getVideoSrc:()=>{var u,n,o,r;return a?(null===(u=e.querySelector("img"))||void 0===u?void 0:u.src)||(null===(n=e.querySelector("source[type='image/avif']"))||void 0===n||null===(n=n.srcset)||void 0===n?void 0:n.split(" ")[0]):ct(t)||(null===(o=e.querySelector("video source"))||void 0===o?void 0:o.src)||(null===(r=e.querySelector("video"))||void 0===r?void 0:r.src)},parentEl:e,isSmallView:Ft(),isImage:a,from:"createMediaDownloadButtonForWrapper"})}}function Ye(e){if(e)for(;e&&e!==document.body;){if("DIV"===e.nodeName&&(e.className.includes("DivPlayerContainer")||e.className.includes("DivVideoWrapper")))return e;e=e.parentElement}}function $e(e){var t,u=Ze(e,e=>"SECTION"===e.tagName)||e.querySelector("div.swiper-slide.swiper-slide-active");if(u){var n=window.location.href,a=n.includes("/photo/"),o=Number((null===(t=document.querySelector(".swiper-slide-active"))||void 0===t?void 0:t.getAttribute("data-swiper-slide-index"))||"0"),r="feed-video"===u.getAttribute("data-e2e");if(a||r||"SECTION"!==u.tagName){var l=Xe(n),i=Ke(n);l&&i&&(u.querySelector(".download-btn.".concat(CSS.escape(l)))||ze({wrapperId:e.id||l,author:i,videoId:l,getVideoSrc:()=>{var t=e.querySelector(".swiper-slide-active img");return(null==t?void 0:t.src)||""},parentEl:a?Ye(u):u,isSmallView:!1,isImage:!0,photoIndex:o,from:"handleSwiper"}))}}}function Ge(){var e=Array.from(document.querySelectorAll("div.swiper")),t=document.querySelector("div.swiper.swiper-initialized");if(/^\/@[^\/]+\/(photo|video)\/[A-Za-z0-9]+$/.test(window.location.pathname)&&t&&(/^\/@[^\/]+\/(photo|video)\/[A-Za-z0-9]+$/.test(window.location.pathname)&&document.querySelectorAll(".photo-download-btn-container, .download-btn-container").forEach(e=>e.remove()),e.length=0,e.push(t)),e.forEach($e),!t){var u=Array.from(document.querySelectorAll("picture")).length?Array.from(document.querySelectorAll("picture"))[0]:null;u&&function(e){var t=e.querySelector("img");if(null!=t&&t.src){var u=Ze(e,e=>"user-post-item"===e.getAttribute("data-e2e"));if(u){var n=window.location.pathname;if(null!=n&&n.includes("/photo/")){var a=Xe(n),o=Ke(n);a&&o&&(u.querySelector(".download-btn.".concat(CSS.escape(a)))||ze({wrapperId:u.id||a,author:o,videoId:a,getVideoSrc:()=>t.src,parentEl:u,isSmallView:!0,isImage:!0,from:"handleSingleImage"}))}}}}(u)}}function Xe(e){var t=null==e?void 0:e.match(/\/(?:photo|video)\/([A-Za-z0-9]+)/);return(null==t?void 0:t[1])||null}function Ke(e){var t=null==e?void 0:e.match(/\/@([^\/]+)/);return(null==t?void 0:t[1])||null}function Ze(e,t){for(;e;){if(t(e))return e;e=e.parentElement}return null}function Qe(e,t){var u=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),u.push.apply(u,n)}return u}function et(e){for(var t=1;t<arguments.length;t++){var u=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(u),!0).forEach(function(t){tt(e,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):Qe(Object(u)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))})}return e}function tt(e,t,u){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var u=t.call(e,"string");if("object"!=typeof u)return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):e[t]=u,e}function ut(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function nt(e){return function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){ut(o,n,a,r,l,"next",e)}function l(e){ut(o,n,a,r,l,"throw",e)}r(void 0)})}}function at(){var e=window.location.pathname.split("/").find(e=>e.startsWith("@"));return e?e.slice(1):"ğŸ˜ƒ"}function ot(){var e=window.location.pathname,t=/^\/@[^/]+/.test(e),u=e.match(/\/@[^/]+\/collection\/([^/]+)/),n=!!u,a="";if(n&&u)try{a=decodeURIComponent(u[1]).replace(/-\d+$/,"")}catch(e){}return{isProfile:t||n,isCollection:n,collectionName:a}}function rt(){if(U.scrapperDetails.selectedTab){if("collection"===U.scrapperDetails.selectedTab){var e=U.scrapperDetails.selectedCollectionName||ot().collectionName;if(e)return e}return U.scrapperDetails.selectedTab}var t=ot();if(t.isCollection&&t.collectionName)return t.collectionName;var u=window.location.pathname.match(/\/@[^/]+\/collection\/([^/]+)/);if(u)try{return decodeURIComponent(u[1]).replace(/-\d+$/,"")}catch(e){}try{var n=Array.from(document.querySelectorAll('p[role="tab"]')).find(e=>"Liked"===e.textContent.trim());if(n&&n.offsetParent)return"liked"}catch(e){}return t.isProfile,"videos"}function lt(e,t){function u(e){if(!e)return{};var t=function(e){var t,u,n,a;if(!e)return null;if("A"===e.tagName&&null!==(t=e.href)&&void 0!==t&&t.includes("/@")){var o,r=null===(o=e.getAttribute("href"))||void 0===o?void 0:o.match(/\/@([\w._-]+)/)[1];if(r)return r[1],r[1]}return("video-author-uniqueid"===(null===(u=e.dataset)||void 0===u?void 0:u.e2e)||"explore-card-user-unique-id"===(null===(n=e.dataset)||void 0===n?void 0:n.e2e))&&(null===(a=e.textContent)||void 0===a?void 0:a.trim())||null}(e),n=function(e){var t;if(!e)return null;var u=e.querySelector('[data-e2e="explore-card-desc"]')||e.querySelector('[data-e2e="new-desc-span"]')||e.querySelector('[data-e2e="video-desc"]')||e.querySelector(".css-1clj8ti-DivVideoExploreCardDesc");return(null==u||null===(t=u.textContent)||void 0===t?void 0:t.trim())||null}(e);for(var a of e.children||[])if(!t||!n){var o=u(a);t||(t=o.username),n||(n=o.description)}return{username:t,description:n}}var n=e;n||(n=e);for(var a=function(e){if(e){var t=e.querySelector('a[data-e2e="browse-user-avatar"]');if(!t)return null;var u=t.closest("div"),n=null==u?void 0:u.querySelector('a[href^="/@"]'),a=null==n?void 0:n.getAttribute("href"),o=null==a?void 0:a.match(/^\/@([\w.-]+)$/);return o?o[1]:null}}(n),o=function(e){var t;if(e){var u=e.querySelector('[data-e2e="video-author-uniqueid"]');return(null==u||null===(t=u.textContent)||void 0===t?void 0:t.trim())||null}}(n);n&&(null===(r=n.dataset)||void 0===r||null===(r=r.e2e)||void 0===r||!r.includes("explore-item"));){var r;n=n.parentElement}n||(n=e);for(var l=[n],i=null,d=null;l.length&&(!i||!d);){var s=l.shift();if(s){var c=u(s);for(var D of(i||(i=c.username),d||(d=c.description),s.children||[]))l.push(D)}}return{username:i||a||o||null,description:d}}function it(e){var{imageIndex:t=0,options:u={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n,a,o=(null===(n=U.downloadPreferences.fullPathTemplate)||void 0===n?void 0:n.template)||x.find(e=>e.isDefault);function v(e,t){var u=new RegExp("\\{".concat(t,":(\\d+)")),n=null==e?void 0:e.match(u);return n?Number(n[1]):void 0}var r=e=>(null!=e?e:"").toString().replace(/(?:[\0-,\/:-@\[-\^`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u3191\u3196-\u319F\u31C0-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE3F\uDE49-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD24-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD6E\uDD86-\uDE5F\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF28-\uDF2F\uDF46-\uDF50\uDF55-\uDF6F\uDF82-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B-\uDF2F\uDF3C-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDF4F\uDF5A-\uDFAF\uDFB1-\uDFBF\uDFD5-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD836\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDD2F\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE97-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDFFF]|\uD834[\uDC00-\uDEBF\uDED4-\uDEDF\uDEF4-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDEEF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDCEF\uDCFA-\uDDCF\uDDEE\uDDEF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4A\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCAC\uDCB0\uDCB5-\uDD00\uDD2E\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/g,"-").slice(0,100),l=e=>{if(e&&"object"==typeof e)return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"_"+String(e.getHours()).padStart(2,"0")+String(e.getMinutes()).padStart(2,"0")},i=null!=e&&e.isImage?".jpeg":".mp4",d=t+1,s=(null==e||null===(a=e.imagePostImages)||void 0===a?void 0:a.length)>1,c=v(o,"desc"),D=void 0!==c,p={videoId:r(e.videoId||e.id),authorUsername:e.authorId,authorNickname:r(e.authorNickname),desc:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,u=(null!=e?e:"").toString().replace(/(?:[\0-,\/:-@\[-\^`\{-\xA9\xAB-\xB1\xB4\xB6-\xB8\xBB\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u065F\u066A-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07BF\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u088F-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0965\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09E5\u09F2\u09F3\u09FA\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A65\u0A70\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AE5\u0AF0-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B65\u0B70\u0B78-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0BE5\u0BF3-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5C\u0C5E\u0C5F\u0C62-\u0C65\u0C70-\u0C77\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDC\u0CDF\u0CE2-\u0CE5\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57\u0D62-\u0D65\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DE5\u0DF0-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F1F\u0F34-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u104A-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u1368\u137D-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u17DF\u17EA-\u17EF\u17FA-\u180F\u181A-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19FF\u1A17-\u1A1F\u1A55-\u1A7F\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B4F\u1B5A-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BFF\u1C24-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u206F\u2072\u2073\u207A-\u207E\u208A-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A-\u245F\u249C-\u24E9\u2500-\u2775\u2794-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFC\u2CFE\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u3191\u3196-\u319F\u31C0-\u31EF\u3200-\u321F\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6F0-\uA716\uA720\uA721\uA789\uA78A\uA7CE\uA7CF\uA7D2\uA7D4\uA7DD-\uA7F1\uA802\uA806\uA80B\uA823-\uA82F\uA836-\uA83F\uA874-\uA881\uA8B4-\uA8CF\uA8DA-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9DA-\uA9DF\uA9E5\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD06\uDD34-\uDD3F\uDD79-\uDD89\uDD8C-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEE0\uDEFC-\uDEFF\uDF24-\uDF2C\uDF4B-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56\uDC57\uDC77\uDC78\uDC9F-\uDCA6\uDCB0-\uDCDF\uDCF3\uDCF6-\uDCFA\uDD1C-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBB\uDDD0\uDDD1\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE3F\uDE49-\uDE5F\uDE7F\uDEA0-\uDEBF\uDEC8\uDEE5-\uDEEA\uDEF0-\uDEFF\uDF36-\uDF3F\uDF56\uDF57\uDF73-\uDF77\uDF92-\uDFA8\uDFB0-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCF9\uDD24-\uDD2F\uDD3A-\uDD3F\uDD66-\uDD6E\uDD86-\uDE5F\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC5-\uDEFF\uDF28-\uDF2F\uDF46-\uDF50\uDF55-\uDF6F\uDF82-\uDFAF\uDFCC-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC51\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDD02\uDD27-\uDD35\uDD40-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDCF\uDDDB\uDDDD-\uDDE0\uDDF5-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDEEF\uDEFA-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC4F\uDC5A-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEBF\uDECA-\uDECF\uDEE4-\uDEFF\uDF1B-\uDF2F\uDF3C-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCF3-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFEF\uDFFA-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC4F\uDC6D-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDF4F\uDF5A-\uDFAF\uDFB1-\uDFBF\uDFD5-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD832\uD836\uD83D\uD83F\uD87C\uD87D\uD87F\uD889-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDD2F\uDD3A-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDE6F\uDEBF\uDECA-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF4F\uDF5A\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDD6F\uDD7A-\uDE3F\uDE97-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD09-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD833[\uDC00-\uDCEF\uDCFA-\uDFFF]|\uD834[\uDC00-\uDEBF\uDED4-\uDEDF\uDEF4-\uDF5F\uDF79-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDEEF\uDEFA-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDCEF\uDCFA-\uDDCF\uDDEE\uDDEF\uDDFB-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5\uDCC6\uDCD0-\uDCFF\uDD44-\uDD4A\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDC70\uDCAC\uDCB0\uDCB5-\uDD00\uDD2E\uDD3E-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86D[\uDF3A-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD888[\uDFB0-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+/g,"-");return u.length>t?u.slice(0,t):u}(e.desc,D?c:100),musicTitle:r(e.musicTitle),musicAuthor:r(e.musicAuthor),views:r(e.views),duration:r(e.duration),hashtags:((null==e?void 0:e.hashtags)||[]).map(e=>r(e.name||e)).join("-"),createTime:r(e.createTime?l(e.createTime):"-"),downloadTime:l(new Date),isImage:e.isImage,isAd:e.isAd},F=null==o?void 0:o.trim(),m=F?dt(F.startsWith("@/")?"".concat(B).concat(F.slice(1)):F,p,{sequenceNumber:d,isMultiImage:s,collectionName:r(U.scrapperDetails.selectedCollectionName||"collection")}):"".concat(B,"@").concat(p.authorUsername||"unknown","/").concat(p.authorUsername||"user","-").concat(p.videoId);return"".concat(st(m)||"download").concat(i)}catch(C){return"tiktok-".concat(null!=e&&e.isImage?"image.jpeg":"video.mp4")}}window.addEventListener("message",e=>{if(e.source===window){var t=e.data;if("RESUME_DOWNLOAD"===(null==t?void 0:t.type)){var{payload:u}=t,{username:n,tabName:a,isCollection:o,collectionUrl:r}=u||{};if(o&&r&&window.location.pathname!==r)return U.scrapperDetails.selectedTab="collection",U.scrapperDetails.selectedCollectionName=a,U.scrapperDetails.originalUsername=n,U.scrapperDetails.scrappingStage="initiated",localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),void(window.location.href="https://www.tiktok.com".concat(r));var l=function(e,t,u){try{var n=ot(),a=at();if(a!==e&&"ğŸ˜ƒ"!==a)return{success:!1,error:"Wrong profile page. Current: ".concat(a,", Expected: ").concat(e),needsNavigation:!0};var o=t,r=null;return u&&(o="collection",n.isCollection&&n.collectionName?(r=n.collectionName,U.scrapperDetails.selectedCollectionName=r):(r=t,U.scrapperDetails.selectedCollectionName=t)),{success:!0,tabKey:o,pageInfo:n,collectionName:r}}catch(e){return{success:!1,error:(null==e?void 0:e.message)||"Unknown error"}}}(n,a,o);if(!l.success)return void Ce("Resume Failed",l.needsNavigation?"Please navigate to @".concat(n,"'s profile first."):l.error);U.scrapperDetails.selectedTab=l.tabKey,o&&l.collectionName&&(U.scrapperDetails.selectedCollectionName=l.collectionName),localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),be(l.tabKey,l.pageInfo).catch(e=>{Ce("Resume Failed","Failed to start download process.")})}}});var dt=(e,t,u)=>{var{sequenceNumber:n,isMultiImage:a,collectionName:o}=u,r=/\{tabName(?:[:|}])/.test(e);return e.replace(/\{(\w+)(?::(-?\d+))?(?:\|([^}]+))?\}/g,(e,u,l,i)=>{var d=l?Number(l):void 0;if("sequenceNumber"===u)return"sequenceNumber"===u&&"required"===i||t.isImage&&a?n:"";if("ad"===u)return t.isAd?"ad":"";if("mediaType"===u)return t.isImage?"image":"video";if("tabName"===u&&U.scrapperDetails.isAutoBatchDownloading&&("downloading"==U.scrapperDetails.scrappingStage||"ongoing"==U.scrapperDetails.scrappingStage)){var s=eu(U.scrapperDetails.selectedTab||"")||i||"";return"collection"==U.scrapperDetails.selectedTab?"".concat(s,"s/").concat(o):s}if("tabName"===u)return"";var c=t[u];return"authorUsername"===u&&":profile:"===i&&r&&U.scrapperDetails.isAutoBatchDownloading&&("downloading"==U.scrapperDetails.scrappingStage||"ongoing"==U.scrapperDetails.scrappingStage)&&(c=at()||c),null!=c&&""!==c||(c=null!=i?i:"missing-".concat(u)),void 0!==d&&(c=d<0?c.slice(d):c.slice(0,d)),c})},st=e=>e.replace(/\/?([^/]+)\.(jpeg|jpg|png|gif|webp|mp4|mov|avi|mkv|webm|tiff|bmp|svg)$/i,"/$1").replace(/\/+/g,"/").replace(/--+/g,"-").replace(/__+/g,"_").replace(/[-_]+/g,e=>e[0]).replace(/(^|\/)[-_]+/g,"$1").replace(/[-_]+($|\/)/g,"$1").replace(/^\/+|\/+$/g,"");function ct(e){try{var t=Object.values(U.allItemsEverSeen).flat().find(t=>t.id==e);if(t&&t.video&&t.video.playAddr&&t.video.playAddr.startsWith("http"))return t.video.playAddr}catch(e){U.debug.active}try{var u,n,a=null===(u=window)||void 0===u||null===(u=u.__$UNIVERSAL_DATA$__)||void 0===u?void 0:u.__DEFAULT_SCOPE__,o=null==a?void 0:a["webapp.video-detail"],r=null==o||null===(n=o.itemInfo)||void 0===n?void 0:n.itemStruct;if((null==r?void 0:r.id)==e)return r.video.playAddr}catch(e){U.debug.active}try{var l,i=null===(l=window)||void 0===l||null===(l=l.MultiMediaPreloader)||void 0===l||null===(l=l.preloader)||void 0===l?void 0:l.video,d=null==i?void 0:i.offsetParent;if(d){var s,c=d[Object.keys(d).find(e=>e.startsWith("__reactFiber$"))],D=null==c||null===(s=c.child)||void 0===s?void 0:s.pendingProps;if(U.debug.active,(null==D?void 0:D.id)==e&&D&&D.url)return D.url;U.debug.active}}catch(e){U.debug.active}return U.debug.active,null}function Dt(){var e=document.querySelector('div[role="slider"][aria-valuenow]:not([aria-valuenow="0"])');if(e)return e.closest("article");var t=document.querySelector('video[src^="blob:"]');if(t)return t.closest("article");var u=document.querySelector('div[data-e2e="video-sound"][aria-pressed="true"]');return u?u.closest("article"):(U.debug.active,null)}function pt(){var e;return null===(e=lt(Dt()))||void 0===e?void 0:e.username}function Ft(){try{var e=window.location.pathname.replace(/\/+$/,"").split("/").filter(Boolean);return 0!==e.length&&!(e.length>1&&e[0].startsWith("@"))}catch(e){return U.debug.active,!1}}function mt(e){try{var t,u=null===(t=U.allDirectLinks)||void 0===t?void 0:t.find(t=>t.videoId===e);return(null==u?void 0:u.authorId)||null}catch(e){return U.debug.active,null}}function vt(e){var t=document.querySelector('[data-e2e="user-post-item-list"]');if(t){var u=t.querySelectorAll('[data-e2e="user-post-item"]');if(u.length>0)return{list:t,items:u,strategy:"user-post-list"}}if(t=document.querySelector('[data-e2e="challenge-item-list"]')){var n=t.querySelectorAll('[data-e2e="challenge-item"]');if(n.length>0)return{list:t,items:n,strategy:"challenge-list"}}if(t=document.querySelector('[data-e2e="explore-item-list"]')){var a=t.querySelectorAll('[data-e2e="explore-item"]');if(a.length>0)return{list:t,items:a,strategy:"explore-list"}}if(t=document.querySelector('[data-e2e="user-repost-item-list"]')){var o=t.querySelectorAll('[data-e2e="user-repost-item"]');if(o.length>0)return{list:t,items:o,strategy:"repost-list"}}if(t=document.querySelector('[data-e2e="user-liked-item-list"]')){var r=t.querySelectorAll('[data-e2e="user-liked-item"]');if(r.length>0)return{list:t,items:r,strategy:"liked-list"}}if(t=document.querySelector('[data-e2e="favorites-item-list"]')){var l=t.querySelectorAll('[data-e2e="favorites-item"]');if(l.length>0)return{list:t,items:l,strategy:"favorites-list"}}if(t=document.querySelector('[data-e2e="collection-item-list"]')){var i=t.querySelectorAll('[data-e2e="collection-item"]');if(i.length>0)return{list:t,items:i,strategy:"collection-list"}}return{list:null,items:[],strategy:null}}function Ct(){var{list:e,items:t}=vt();if(!e||0===t.length)return!0;var u=t[t.length-1].getBoundingClientRect(),n=u.top>=0&&u.bottom<=(window.innerHeight||document.documentElement.clientHeight),a=e.scrollHeight-e.scrollTop<=e.clientHeight+5;return n&&a&&!gt()}function gt(){var e=document.querySelector('[data-e2e="user-post-item-list"]');if(!e||!e.parentElement)return!1;var t,u=e.parentElement.querySelector('svg[class*="SvgContainer"]');return!!u&&(t=u.getBoundingClientRect()).top<window.innerHeight&&t.bottom>0}function ht(){var e=document.querySelectorAll("button.TUXButton--capsule.action-item");for(var t of e){var u,n=t.querySelector("svg path");if(null!=n&&null!==(u=n.getAttribute("d"))&&void 0!==u&&u.includes("13.17-13.17"))return!0}return!!document.querySelector('button[data-e2e="arrow-right"]')}function Et(){if("off"!=U.downloadPreferences.autoScrollMode&&ht()){var e=null;if(document.querySelectorAll("button.TUXButton--capsule.action-item").forEach(t=>{var u,n=t.querySelector("svg path");null!=n&&null!==(u=n.getAttribute("d"))&&void 0!==u&&u.includes("13.17-13.17")&&(e=t)}),e||(e=document.querySelector('button[data-e2e="arrow-right"]')),e){var t=Math.floor(900*Math.random())+300;setTimeout(()=>{e.click(),U.debug.active},t)}}else U.debug.active}function ft(e){if(e.length){var t,u=["filename","filepath"],n=["index",...Array.from(new Set(e.flatMap(e=>Object.keys(e)))).filter(e=>!u.includes(e)).sort(),...u],a=e.map(e=>{var t=it(e),u=t.split("/").pop();return n.map(n=>{var a="";if(n in e){var o=e[n];a=Array.isArray(o)?o.join(", "):o}else"filename"===n?a=u:"filepath"===n&&(a=t);return function(e){if(null==e)return'""';var t=String(e).replace(/"/g,'""').replace(/\r?\n/g," ");return'"'.concat(t,'"')}(a)}).join(",")}),o=[n.join(","),...a].join("\n"),r=new Blob([o],{type:"text/csv"}),l=(new Date).toISOString().split("T")[0],i=e.length,d=new Set(e.map(e=>e.authorId)),s=1===d.size?[...d][0]:null,c="video_export_".concat(l,"_").concat(i,"_items");s&&(c+="_".concat(s)),c+=".csv",t={blobUrl:URL.createObjectURL(r),filename:"".concat(U.downloadPreferences.folderName||B+"/").concat(c),showFolderPicker:U.downloadPreferences.showFolderPicker},window.postMessage({type:"BLOB_DOWNLOAD_REQUEST",payload:t},"*")}}function At(e,t){var u,n,a,o,r,l,i,d,s,c,D,p,F,m,v,C,g,h,E,f,A,y,w,b,B,x,S,k;if(e){var N=(null==e||null===(u=e.textExtra)||void 0===u?void 0:u.map(e=>null==e?void 0:e.hashtagName).filter(Boolean))||[],T=(null==e||null===(n=e.video)||void 0===n||null===(n=n.subtitleInfos)||void 0===n?void 0:n.map(e=>null==e?void 0:e.LanguageCodeName).filter(Boolean))||[];return{index:t,videoId:null==e?void 0:e.id,url:(null==e||null===(a=e.video)||void 0===a?void 0:a.playAddr)||(null===(o=U.allItemsEverSeen[null==e?void 0:e.id])||void 0===o||null===(o=o.video)||void 0===o?void 0:o.playAddr)||(null==e||null===(r=e.video)||void 0===r?void 0:r.originCover)||(null==e||null===(l=e.video)||void 0===l?void 0:l.cover),authorId:"string"==typeof(null==e?void 0:e.author)?null==e?void 0:e.author:null==e||null===(i=e.author)||void 0===i?void 0:i.uniqueId,authorNickname:"string"==typeof(null==e?void 0:e.author)?null==e?void 0:e.author:null==e||null===(d=e.author)||void 0===d?void 0:d.nickname,desc:null==e?void 0:e.desc,isImage:Boolean(e.imagePost),hashtags:N,createTime:null!=e&&e.createTime?new Date(1e3*Number(e.createTime)):"",imagePostImages:null==e||null===(s=e.imagePost)||void 0===s?void 0:s.images.map(e=>{var t;return null===(t=e.imageURL.urlList)||void 0===t?void 0:t.at(0)}),duration:null==e||null===(c=e.video)||void 0===c?void 0:c.duration,videoRatio:null==e||null===(D=e.video)||void 0===D?void 0:D.ratio,videoBitrate:null==e||null===(p=e.video)||void 0===p?void 0:p.bitrate,definition:null==e||null===(F=e.video)||void 0===F?void 0:F.definition,coverImage:null==e||null===(m=e.video)||void 0===m?void 0:m.cover,dynamicCover:null==e||null===(v=e.video)||void 0===v?void 0:v.dynamicCover,originCover:null==e||null===(C=e.video)||void 0===C?void 0:C.originCover,loudness:null==e||null===(g=e.video)||void 0===g||null===(g=g.volumeInfo)||void 0===g?void 0:g.Loudness,peakVolume:null==e||null===(h=e.video)||void 0===h||null===(h=h.volumeInfo)||void 0===h?void 0:h.Peak,musicTitle:null==e||null===(E=e.music)||void 0===E?void 0:E.title,musicAuthor:null==e||null===(f=e.music)||void 0===f?void 0:f.authorName,musicUrl:null==e||null===(A=e.music)||void 0===A?void 0:A.playUrl,subtitleLanguages:T,location:null==e?void 0:e.locationCreated,views:null==e||null===(y=e.stats)||void 0===y?void 0:y.playCount,likes:null==e||null===(w=e.stats)||void 0===w?void 0:w.diggCount,comments:null==e||null===(b=e.stats)||void 0===b?void 0:b.commentCount,shares:null==e||null===(B=e.stats)||void 0===B?void 0:B.shareCount,authorFollowers:null==e||null===(x=e.authorStats)||void 0===x?void 0:x.followerCount,authorLikesTotal:null==e||null===(S=e.authorStats)||void 0===S?void 0:S.heart,downloadTime:null,isAd:null==e?void 0:e.isAd,downloaderHasLowConfidence:null!==(k=null==e?void 0:e.downloaderHasLowConfidence)&&void 0!==k&&k}}}var yt=e=>new Promise(t=>setTimeout(t,e));function wt(e,t){return bt.apply(this,arguments)}function bt(){return bt=nt(function*(e,t){return new Promise(function(){var u=nt(function*(u){e&&e.stopPropagation();var n,a=null==e?void 0:e.currentTarget;if(a){n=a.cloneNode(!0),a.textContent="";var o=ge("hourglass",16);o.style.marginRight="4px",a.appendChild(o),a.appendChild(document.createTextNode("Downloading...")),a.disabled=!0,U.downloading.isActive=!0,U.downloading.isDownloadingAll=!0}try{for(var r=0,l=0;l<t.imagePostImages.length;l++)try{if(a){a.textContent="";var i=ge("hourglass",16);i.style.marginRight="4px",a.appendChild(i),a.appendChild(document.createTextNode("Downloading ".concat(l,"/").concat(t.imagePostImages.length,"...")))}yield Bt(t,{imageIndex:l}),r+=1}catch(e){if(a){a.textContent="";var d=ge("error",16);d.style.marginRight="4px",a.appendChild(d),a.appendChild(document.createTextNode("Failed at ".concat(l,"/").concat(t.imagePostImages.length,"...")))}yield yt(2e3)}r&&!U.downloading.isDownloadingAll&&Xt("downloads",Kt("photo",r),r)}catch(e){}finally{if(a){U.downloading.isActive=!1,U.downloading.isDownloadingAll=!1,a.textContent="";var s=ge("check",16);s.style.marginRight="4px",a.appendChild(s),a.appendChild(document.createTextNode("All Done!")),setTimeout(()=>{a&&n&&(a.textContent=n.textContent||n.innerText||"",a.disabled=!1),Ot({forced:!0}),u()},3e3)}else u()}});return function(e){return u.apply(this,arguments)}}())}),bt.apply(this,arguments)}function Bt(e){return xt.apply(this,arguments)}function xt(){return xt=nt(function*(e){var{imageIndex:t=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{imageIndex:0};if(U.scrapperDetails.skipDownloaded)try{var u=e.id||e.videoId;if(u){var n,a=at(),o=U.scrapperDetails.selectedTab||rt();if("collection"===o&&U.scrapperDetails.selectedCollectionName&&(o=U.scrapperDetails.selectedCollectionName),a&&"ğŸ˜ƒ"!==a&&o)if(e.isImage&&(null===(n=e.imagePostImages)||void 0===n?void 0:n.length)>0){if(yield te(a,o,u,t))return}else if(yield te(a,o,u,null))return}}catch(e){}var r=it(e,{imageIndex:t});try{var l=e.url;e.isImage&&e.imagePostImages&&(l=e.imagePostImages[t]),yield Pt(l,r);try{var i=e.id||e.videoId;if(i){var d=at(),s=rt();d&&"ğŸ˜ƒ"!==d&&s&&(yield function(e,t,u){return ee.apply(this,arguments)}(d,s,i,e.isImage?t:null))}}catch(e){}U.downloading.isDownloadingAll||Xt("downloads",Kt(e.isImage?"photo":"video",1))}catch(e){U.debug.active}}),xt.apply(this,arguments)}function St(e,t){return kt.apply(this,arguments)}function kt(){return(kt=nt(function*(e,t){U.debug.active,U.downloading.isActive=!0,U.downloading.isDownloadingAll=!0,U.scrapperDetails.currentBatch=t;var u=0,n=!1;try{for(var a=0;a<e.length;a++){for(;U.scrapperDetails.paused;)yield yt(800);var o=e[a];if(!U.downloadedURLs.includes(o.url)){U.downloadedURLs.push(o.url);try{Me(),yield o.isImage?wt(null,o):Bt(o),U.leaderboard.newlyConfirmedMedia.push(o),o.isImage&&(n=!0),u+=1,U.scrapperDetails.downloadedInBatches+=1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails))}catch(e){U.debug.active}}}return U.debug.active,{success:!0,downloaded:u,hasImage:n}}catch(e){return{success:!1,downloaded:u,hasImage:n,error:e}}finally{U.downloading.isActive=!1,U.downloading.isDownloadingAll=!1}})).apply(this,arguments)}function Nt(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2,10))}function Tt(e){var t,{id:u,blobUrl:n,filename:a,showFolderPicker:o}=e;if(null!=U&&null!==(t=U.debug)&&void 0!==t&&t.active,!a||"string"!=typeof a||!a.trim()){var r=new Error("Invalid filename provided to postBlobDownloadRequest: ".concat(typeof a,' - "').concat(a,'"'));throw r.code="ERR_INVALID_FILENAME",r}var l=a.replace(/[{}]/g,"");window.postMessage({type:"BLOB_DOWNLOAD_REQUEST",id:u,payload:{blobUrl:n,filename:l,showFolderPicker:!!o}},"*")}function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e3;return new Promise(u=>{var n=!1,a=e=>{n||(n=!0,window.removeEventListener("message",o),clearTimeout(r),u(e))};function o(t){var u=null==t?void 0:t.data;t.source===window&&u&&"BLOB_DOWNLOAD_RESPONSE"===u.type&&u.id===e&&a(u)}var r=setTimeout(()=>{a({success:!1,code:"ERR_PAGE_TIMEOUT",error:"No content-script response within 25s"})},t);window.addEventListener("message",o)})}function Pt(e,t){return Lt.apply(this,arguments)}function Lt(){return Lt=nt(function*(e,t){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=u.retryCount||1,a=e=>{try{U.downloading.isActive=!!e,Ot({forced:!0})}catch(e){}};n<=3;){var o,r=null!==(o=u.omitCookies)&&void 0!==o?o:2===n;try{a(!0);var l=yield fetch(e,{credentials:r?"omit":"include"});if(a(!1),!l.ok){var i=new Error("HTTP ".concat(l.status," ").concat(l.statusText||"").trim());throw i.code="ERR_HTTP",i}var d=yield l.blob();if(!d||0===d.size){var s=new Error("Empty file");throw s.code="ERR_EMPTY_BLOB",s}var c=URL.createObjectURL(d),D=Nt();try{var p;Tt({id:D,blobUrl:c,filename:t,showFolderPicker:null==U||null===(p=U.downloadPreferences)||void 0===p?void 0:p.showFolderPicker});var F=yield It(D,25e3);try{URL.revokeObjectURL(c)}catch(e){var m;null!=U&&null!==(m=U.debug)&&void 0!==m&&m.active}if(null!=F&&F.success)return U.sessionHasConfirmedDownloads=!0,!0;var v=new Error((null==F?void 0:F.error)||"Unknown download error");throw v.code=(null==F?void 0:F.code)||"ERR_UNKNOWN",v}catch(e){try{URL.revokeObjectURL(c)}catch(e){}throw e}}catch(u){var C,g,h,E;if(a(!1),null!=U&&null!==(C=U.debug)&&void 0!==C&&C.active,n<3){n+=1;continue}if(null!=U&&null!==(g=U.downloadPreferences)&&void 0!==g&&g.skipFailedDownloads)throw u;if(!(yield tu("âš ï¸ <b>Download failed.</b><br><br>\nWe couldn't save this file automatically, but we'll open it in a new tab so you can use <b>Right-click â†’ Save As</b>.<br><br>\nThis often happens with <b>private</b> or <b>Only Me</b> posts.<br><br>\n<b>File:</b> ".concat(t.split("/").pop()||"Unknown","<br><br>\nTip: You can skip failed downloads automatically for the rest of this session."),"Skip Failed Downloads",()=>{U.downloadPreferences.skipFailedDownloads=!0,Ce("Settings updated","âœ… Failed downloads will now be skipped for this session.")})))throw new Error("Couldn't save this one file!");var f=document.createElement("a");f.href=e,f.download=t,f.target="_blank",null===(h=document.body)||void 0===h||h.appendChild(f),f.click(),null===(E=document.body)||void 0===E||E.removeChild(f);var A=new Error("Fell back to manual save");throw A.code="ERR_FALLBACK_MANUAL",A}}var y=new Error("Unreachable state");throw y.code="ERR_UNREACHABLE",y}),Lt.apply(this,arguments)}function Ot(){var{forced:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t;if(U.debug.active,!e&&document.getElementById(f)&&(null===(t=document.getElementById(f).querySelector("ol"))||void 0===t||!t.innerHTML)&&!U.allDirectLinks.length&&!Object.keys(U.allItemsEverSeen).length)return;if(e&&Me(),U.ui.isDownloaderClosed)return qe();if((U.downloading.isActive||U.downloading.isDownloadingAll)&&document.getElementById(f))return void U.debug.active;var u=Object.values(U.allItemsEverSeen).flat(),n=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(e=>!(U.downloadPreferences.skipAds&&e.isAd)).map(e=>e.id).join("")}(u),a=window.location.pathname;if(!e&&U.displayedState.itemsHash===n&&U.displayedState.path===a)return void U.debug.active;if(U.debug.active&&(U.displayedState.itemsHash!==n||U.displayedState.path),document.body instanceof Node){if(0===u.length){var o,r=_e([],n)||Ae();return void(r instanceof Node&&(null===(o=document.body)||void 0===o||o.appendChild(r)))}U.allDirectLinks=[];var l,i=_e(u.filter(e=>!(U.downloadPreferences.skipAds&&e.isAd)).map((e,t)=>{var u=At(e,t);return U.allDirectLinks.push(u),u}),n);i instanceof Node&&(null===(l=document.body)||void 0===l||l.appendChild(i))}}catch(e){}}function Mt(){return(Mt=nt(function*(e){U.debug.active;var t=!U.scrapperDetails.isAutoBatchDownloading;U.downloading.isActive=!0,U.downloading.isDownloadingAll=!0,U.downloading.pausedAll=!1,U.downloadPreferences.autoScrollMode="off";var u=U.allDirectLinks||[],n=0,a=!1;try{for(var o=0;o<u.length;o++){if(t)for(;U.downloading.pausedAll;)yield yt(800);else for(;U.scrapperDetails.paused;)yield yt(800);var l=u[o];if(!U.downloadedURLs.includes(l.url)){U.downloadedURLs.push(l.url);try{Me(),yield l.isImage?wt(null,l):Bt(l),U.leaderboard.newlyConfirmedMedia.push(l),l.isImage&&(a=!0),n+=1}catch(t){U.debug.active,Oe(e,"Error at ".concat(o+1,"/").concat(u.length))}}}U.downloading.isActive=!1,U.downloading.isDownloadingAll=!1,U.downloading.pausedAll=!1}catch(e){n&&Ht(U.displayedState.itemsHash),U.downloading.isActive=!1,U.downloading.isDownloadingAll=!1,U.downloading.pausedAll=!1,U.debug.active}!n&&U.downloadedURLs.length>0?Oe(e,"All ".concat(U.downloadedURLs.length," Post").concat(U.downloadedURLs.length>1?"s":""," Already Downloaded!")):(Oe(e,"Downloaded ".concat(U.downloadedURLs.length," Posts!")),U.downloadPreferences.includeCSV&&ft(U.allDirectLinks),Ht(U.displayedState.itemsHash),"downloading"!=U.scrapperDetails.scrappingStage&&n&&U.sessionHasConfirmedDownloads&&Xt("downloads",Kt(a?"post":"video",n),n)),U.downloading.isDownloadingAll=!1,U.downloading.isActive=!1,U.downloading.pausedAll=!1;var i=function(){if(U.ui.isRatePopupOpen)return!1;if(!U.leaderboard.newlyConfirmedMedia.length)return!1;var e=Date.now(),{lastRatedAt:t,lastDonatedAt:u,lastShownAt:n,shownCount:a}=U.rateDonate;if(!n)return!0;if(t&&e-t<12096e5)return!1;return!(u&&e-u<2592e6)&&e-n>=24*(a<=1?1:2===a?3:a<=4?7:14)*60*60*1e3}();i&&setTimeout(()=>{U.ui.isRatePopupOpen=!0,qe(),Xt("mindblown"),setTimeout(()=>{!function(){var e,{message:t="",onClose:u=null,redPillClick:n=()=>{},bluePillClick:a=()=>{}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=document.createElement("div");o.id="ettpd-morpheus-overlay",o.className="ettpd-modal-overlay morpheus-theme",o.classList.add("dark"===fe()?"ettpd-theme-dark":"ettpd-theme-classic");var r=document.createElement("div");r.className="ettpd-morpheus-modal";var l=document.createElement("button");l.textContent="x",l.className="ettpd-close-morpheus",l.setAttribute("aria-label","Close modal"),l.onclick=()=>{o.remove(),"function"==typeof u&&u()};var i=document.createElement("div");i.className="ettpd-morpheus-message",i.innerHTML=t||"You take the blue pillâ€¦ You wake up in your bed and believe whatever you want to believe.";var d=document.createElement("button");d.className="ettpd-morpheus-pill blue-pill",d.textContent="ğŸ”µ Rate",d.onclick=e=>a(e,o);var s=document.createElement("button");s.className="ettpd-morpheus-pill red-pill",s.textContent="ğŸ”´ Support",s.onclick=e=>n(e,o);var c=document.createElement("div");c.className="ettpd-morpheus-pill-container",c.appendChild(s),c.appendChild(d),r.appendChild(l),r.appendChild(i),r.appendChild(c),o.appendChild(r),null===(e=document.body)||void 0===e||e.appendChild(o)}({message:"<div class=\"ettpd-morpheus-message\">\n  You've just seen how good this downloader is.<br>\n  Now it's your turn to support the mission.<br><br>\n  <strong>Take the red pill â˜• â€” fuel us.<br>\n  Take the blue pill â­ â€” rate us.</strong>\n</div>",redPillClick:(e,t)=>{window.open("https://briceka.com/donate","_blank"),U.rateDonate.lastShownAt=Date.now(),U.rateDonate.lastDonatedAt=Date.now(),localStorage.setItem(r,JSON.stringify(U.rateDonate)),null==t||t.remove(),"function"==typeof onClose&&onClose()},bluePillClick:(e,t)=>{window.open("https://briceka.com/tikdown","_blank"),U.rateDonate.lastShownAt=Date.now(),U.rateDonate.lastRatedAt=Date.now(),localStorage.setItem(r,JSON.stringify(U.rateDonate)),null==t||t.remove(),"function"==typeof onClose&&onClose()},onClose:e=>{U.ui.isRatePopupOpen=!1,null==e||e.remove()}}),U.rateDonate.lastShownAt=Date.now(),U.rateDonate.shownCount+=1,localStorage.setItem(r,JSON.stringify(U.rateDonate))},3500)},1e4),Ue(),"downloading"==U.scrapperDetails.scrappingStage&&(U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.selectedTab=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),i||Xt("downloads",T[Math.floor(Math.random()*T.length)]))})).apply(this,arguments)}function Rt(){try{return JSON.parse(localStorage.getItem(n))||[]}catch(e){return[]}}function jt(){return x}function Ut(){return x.find(e=>e.isRecommended)}function _t(e){localStorage.setItem(n,JSON.stringify(e))}function qt(){localStorage.setItem(a,JSON.stringify(U.downloadPreferences.fullPathTemplate))}function Ht(e){if(U.leaderboard.currentlyUpdating)U.debug.active;else if(U.leaderboard.lastUpdateHash&&U.leaderboard.lastUpdateHash===e)U.debug.active;else{U.leaderboard.currentlyUpdating=!0,U.leaderboard.lastUpdateHash=e;try{var t=Jt(),u=U.leaderboard.newlyConfirmedMedia||[],n=u.length,a=Number(localStorage.getItem(p)||0)+n;U.leaderboard.allTimeDownloadsCount=a,localStorage.setItem(p,a);var r=localStorage.getItem(F),l={count:0,weekId:t};if(r)try{var i=JSON.parse(r);i.weekId===t&&(l=i)}catch(e){}l.count+=n,U.leaderboard.weekDownloadsData=l,localStorage.setItem(F,JSON.stringify(l));var d=JSON.parse(localStorage.getItem(m)||"{}"),s=JSON.parse(localStorage.getItem(v)||"{}");u.filter(e=>!e.isTrackedAsDownloaded).forEach(e=>{e.isTrackedAsDownloaded=!0;var u=e.authorId||"--unknown--",n=u;d[u]?(d[u].count+=1,d[u].lastUpdatedAt=t):d[u]={count:1,username:n,lastUpdatedAt:t},s[t]||(s[t]={}),s[t][u]?s[t][u].count+=1:s[t][u]={count:1,username:n}});var c=Object.keys(s).sort();if(c.length>12){var D=c.slice(0,c.length-12);for(var C of D)delete s[C]}for(var[g,h]of Object.entries(d)){var{count:E,lastUpdatedAt:f}=h,A=E<5,y=Vt(f,t)>12;if(A&&y){for(var w of(delete d[g],Object.keys(s)))delete s[w][g];U.debug.active}}localStorage.setItem(m,JSON.stringify(d)),localStorage.setItem(v,JSON.stringify(s));var b=U.currentTierProgress.downloads||0,B=zt(U.leaderboard.allTimeDownloadsCount),x=B.min;if(x>b)try{U.currentTierProgress.downloads=x,localStorage.setItem(o,JSON.stringify(U.currentTierProgress)),Xt("tier",function(e){var{emoji:t,name:u,min:n}=e;return su(cu(P),{emoji:t,name:u,min:Intl.NumberFormat("en",{notation:"compact",maximumFractionDigits:1}).format(n)})}(B),B.min)}catch(e){}U.debug.active}catch(e){U.debug.active}finally{U.leaderboard.currentlyUpdating=!1}}}function Vt(e,t){var[u,n]=e.split("-W").map(Number),[a,o]=t.split("-W").map(Number);return 52*(a-u)+(o-n)}function Jt(){var e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),u=Math.floor((e-t+864e5)/864e5),n=t.getUTCDay()||7,a=Math.ceil((u+n-1)/7);return"".concat(e.getUTCFullYear(),"-W").concat(String(a).padStart(2,"0"))}function zt(e){return[...S].reverse().find(t=>e>=t.min)||{name:"Novice ğŸ« ",emoji:"ğŸŒ±",min:0}}function Wt(e){return[...k].reverse().find(t=>e>=t.min)||{name:"Apprentice ğŸ« ",emoji:"ğŸ¤",min:0}}window.__dl=Pt;var Yt=null,$t=null;function Gt(e){if(!e)return null;var t=document.createElement("div");return t.className="ettpd-celebration-overlay",t.innerHTML=e,document.body.appendChild(t),t}function Xt(){var e,t,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tier",n=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;if(!U.downloadPreferences.disableConfetti){var o=function(){var e;($t=$t&&$t.isConnected?$t:document.getElementById("etvd-confetti")||Object.assign(document.createElement("canvas"),{id:"etvd-confetti"})).isConnected||(Object.assign($t.style,{position:"fixed",inset:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),document.documentElement.appendChild($t));try{var t,u;null===(t=window.confetti)||void 0===t||null===(u=t.reset)||void 0===u||u.call(t)}catch(e){}return Yt=Yt||(null===(e=window.confetti)||void 0===e?void 0:e.create($t,{resize:!0,useWorker:!1}))}();if(o)if(null!==(e=(t=window).matchMedia)&&void 0!==e&&e.call(t,"(prefers-reduced-motion: reduce)").matches){var r=Gt(n||"ğŸ‰");setTimeout(()=>null==r?void 0:r.remove(),2500)}else if("tier"===u)var l=Date.now()+5e3,i={startVelocity:30,spread:360,ticks:60,zIndex:99999},d=Gt(n||"ğŸ‰ Youâ€™ve unlocked a new tier!"),s=setInterval(()=>{var e=l-Date.now();if(e<=0)return clearInterval(s),void(null==d||d.remove());var t=Math.min(1e3,10*a),u=Math.max(1,Math.round(t*(e/5e3)));o(et(et({},i),{},{particleCount:u,origin:{x:.2*Math.random(),y:.4*Math.random()}})),o(et(et({},i),{},{particleCount:u,origin:{x:.8+.2*Math.random(),y:.4*Math.random()}}))},250);else if("downloads"===u){var c={spread:360,ticks:50,gravity:0,decay:.94,startVelocity:30,colors:["#FFE400","#FFBD00","#E89400","#FFCA6C","#FDFFB8"],zIndex:99999},D=Gt(n),p=()=>{o(et(et({},c),{},{particleCount:Math.min(5*a,1e3),scalar:1.2,shapes:["star"]})),o(et(et({},c),{},{particleCount:Math.min(2*a,4e3),scalar:.75,shapes:["circle"]}))};setTimeout(p,0),setTimeout(p,100),setTimeout(p,200),D&&setTimeout(()=>D.remove(),1e4)}else if("mindblown"===u)var F=Date.now()+4e3,m={spread:720,startVelocity:60,ticks:80,gravity:.5,decay:.91,scalar:1.4,zIndex:99999,shapes:["square","circle","star"],colors:["#00FFF7","#FF61F6","#FFE600","#FF5E3A","#7CFF4C","#00C6FF","#FF94C2","#D5FF00"]},v=setInterval(()=>{F-Date.now()<=0?clearInterval(v):o(et(et({},m),{},{particleCount:150,origin:{x:Math.random(),y:.5*Math.random()}}))},150)}}function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"file",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=[...N],n=u[Math.floor(Math.random()*u.length)],a=t>1,o=a?e.toLowerCase()+"s":e.toLowerCase(),r=a?"".concat(t):"1";return"string"==typeof n?n.replace("{media}",o).replace("{count}",r):n()}function Zt(){return Qt.apply(this,arguments)}function Qt(){return Qt=nt(function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,u=Date.now(),n=window.location.pathname,a=/^\/@[^/]+\/?$/.test(n),o=!1,r="";try{var l=at(),i=JSON.parse(window.__UNIVERSAL_DATA_FOR_REHYDRATION__.innerHTML).__DEFAULT_SCOPE__["webapp.app-context"].user,d=i?i.uniqueId:null;o=l===d;var s=n.match(/\/@[^/]+\/collection\/([^/]+)/);if(s){var c=decodeURIComponent(s[1]);r=c.replace(/-\d+$/,"")}}catch(e){}if(!a)return{videos:null,reposts:null,liked:null,favorites:null,collection:r};var D=e=>e.videos||e.reposts||e.liked||e.favorites||e.collection,p=()=>{var e={videos:null,reposts:null,liked:null,favorites:null,collection:r};return e.collection||document.querySelectorAll('[role="tab"]').forEach(t=>{var u,n=window.getComputedStyle(t);if("none"!==n.display&&"hidden"!==n.visibility&&"true"!==t.getAttribute("aria-disabled")){var a=t.querySelector("span");if(a){var r=(null===(u=t.querySelector("svg path"))||void 0===u?void 0:u.getAttribute("d"))||"";!e.videos&&r.includes("M11 8")?e.videos=a:!e.reposts&&r.includes("6.26 6.66")?e.reposts=a:!e.favorites&&r.includes("l9.67-5")&&(e.favorites=a),!e.liked&&r.includes("14.23-14.12")&&(e.liked=a),(r.includes("M8.71 10.56")||r.includes("L24 36.89"))&&(e.liked=o?a:null)}}}),e},F=p();return D(F)?F:(yield new Promise(e=>requestAnimationFrame(()=>requestAnimationFrame(e))),F=p(),D(F)?F:(yield new Promise(t=>{var u=!1,n=new MutationObserver(()=>{var e=p();D(e)&&(u=!0,n.disconnect(),t(e))});document.body&&n.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{u||(n.disconnect(),t(null))},Math.min(800,e))}))||new Promise(n=>{var a=()=>{var o=p();D(o)||Date.now()-u>=e?n(o):setTimeout(a,t)};setTimeout(a,t)}))}),Qt.apply(this,arguments)}function eu(e){return e.toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function tu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"OK",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((n,a)=>{var o=Object.assign(document.createElement("div"),{className:"alert",innerHTML:e}),r=Object.assign(document.createElement("button"),{className:"ettpd-action-btn",textContent:t}),l=Ve({children:[o,u?r:document.createElement("span")],onClose:()=>n(!1)});r.addEventListener("click",()=>{if("function"==typeof u)try{u()}catch(e){}l&&l.parentNode&&l.remove(),n(!0)})})}function uu(e){if(!e)return null;for(var t in e)if(t.startsWith("__reactFiber$"))return e[t];return null}function nu(e){return e?Array.isArray(e)?e:[e]:[]}function au(e){if(!e||"object"!=typeof e)return-1;var t=0;return"string"==typeof e.id&&e.id.length&&(t+=10),"AIGCDescription"in e&&(t+=5),"music"in e&&(t+=3),("stats"in e||"statsV2"in e)&&(t+=3),"video"in e&&(t+=2),"desc"in e&&(t+=1),t}function ou(e){var t=[];return null!=e&&e.pendingProps&&t.push({obj:e.pendingProps,path:".pendingProps"}),null!=e&&e.memoizedProps&&t.push({obj:e.memoizedProps,path:".memoizedProps"}),null!=e&&e.props&&t.push({obj:e.props,path:".props"}),null!=e&&e.children&&t.push({obj:e.children,path:".children"}),t.push({obj:e,path:""}),t}function ru(e){var t;return e&&"object"==typeof e&&((null===(t=e.props)||void 0===t?void 0:t.item)||e.item)||null}function lu(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!e)return null;var n=[],a=0;ou(e).forEach(e=>{var{obj:t,path:u}=e;t&&n.push({node:t,path:u})});for(var o,r=function(){var{node:e,path:u}=n.pop();a++;var o=ru(e);if((null==o?void 0:o.id)===t)return{v:{item:o,path:"".concat(u,".props.item")}};var r,{children:l}=function(e){var t,u,n,a,o,r;if(!e||"object"!=typeof e)return{children:[],basePath:""};var l=null!==(t=null!==(u=null!==(n=null===(a=e.props)||void 0===a?void 0:a.children)&&void 0!==n?n:e.children)&&void 0!==u?u:null===(o=e.pendingProps)||void 0===o?void 0:o.children)&&void 0!==t?t:null;return!l&&e.props&&(l=null!==(r=e.props.children)&&void 0!==r?r:null),{children:nu(l),basePath:""}}(e),i=function(e){var t=nu(e),u=[];return[6,5].forEach(e=>{var n=t[e];n&&u.push({c:n,idx:e,bonus:100})}),t.forEach((e,t)=>{var n;if(6!==t&&5!==t){var a=e&&((null===(n=e.props)||void 0===n?void 0:n.item)||e.item||e.props&&e.props)||e;u.push({c:e,idx:t,bonus:au(a)})}}),u.sort((e,t)=>t.bonus-e.bonus),u.map(e=>({node:e.c,idx:e.idx}))}(l),d=function(e){if(!s||"object"!=typeof s)return 0;var a=ru(s);if((null==a?void 0:a.id)===t)return{v:{v:{item:a,path:"".concat(u,".children[").concat(e,"].props.item")}}};ou(s).forEach(t=>{var{obj:a,path:o}=t;a&&n.push({node:a,path:"".concat(u,".children[").concat(e,"]").concat(o)})})};for(var{node:s,idx:c}of i)if(0!==(r=d(c))&&r)return r.v};n.length&&a<u;)if(o=r())return o.v;return null}function iu(e){var t,u,n;if(!e)return null;var a=((null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"id"))||"").match(/xgwrapper-\d+-(\d+)/);if(a)return a[1];var o="A"===e.tagName?e:null===(u=e.querySelector)||void 0===u?void 0:u.call(e,"a[href*='/video/']");if(a=((null==o||null===(n=o.getAttribute)||void 0===n?void 0:n.call(o,"href"))||"").match(/\/video\/(\d{10,})/))return a[1];var r=e.dataset||{};for(var l of Object.values(r)){var i;if("string"==typeof l&&(a=null===(i=l.match)||void 0===i?void 0:i.call(l,/(\d{10,})/)))return a[1]}return null}function du(e){if(!e)return 1/0;var t=Date.now();return e>t?0:(t-e)/864e5}function su(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/\{\{(\w+)\}\}/g,(e,u)=>{var n=t[u];return null==n?"":String(n)})}function cu(e){return e[Math.floor(Math.random()*e.length)]}function Du(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={url:"https://chromewebstore.google.com/detail/fclobfmgolhdcfcmpbjahiiifilhamcg?utm_source=tiktok-ext",title:"Dude, you have to check out this TikTok downloader...",text:"Simply beautiful!"},u=document.createElement("div");u.className="ettpd-share-content";var n=document.createElement("div");n.className="ettpd-share-heading",n.textContent="Share Extension ğŸ˜ƒ",u.appendChild(n);var a=document.createElement("ul");a.className="ettpd-share-list",u.appendChild(a),function(e,t){var{url:u,title:n,text:a,mediaUrl:o}=e,r=encodeURIComponent,l=a||n||"",i="".concat(l?r(l)+"%0A%0A":"").concat(r(u)),d={telegram:{key:"telegram",label:"Share on Telegram",href:"https://t.me/share/url?url=".concat(r(u),"&text=").concat(r(l||n))},linkedin:{key:"linkedin",label:"Share on LinkedIn",href:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(r(u))},reddit:{key:"reddit",label:"Share on Reddit",href:"https://www.reddit.com/submit?url=".concat(r(u),"&title=").concat(r(n))},pinterest:{key:"pinterest",label:"Share on Pinterest",href:"https://www.pinterest.com/pin/create/button/?url=".concat(r(u)).concat(o?"&media=".concat(r(o)):"","&description=").concat(r(l||n))},line:{key:"line",label:"Share on Line",href:"https://social-plugins.line.me/lineit/share?url=".concat(r(u))},email:{key:"email",label:"Share on Email",href:"mailto:?subject=".concat(r(n),"&body=").concat(i)},whatsapp:{key:"whatsapp",label:"Share on WhatsApp",href:"https://api.whatsapp.com/send?text=".concat(r(l?l+" "+u:u))},facebook:{key:"facebook",label:"Share on Facebook",href:"https://www.facebook.com/sharer/sharer.php?u=".concat(r(u))},x:{key:"x",label:"Share on X",href:"https://twitter.com/intent/tweet?url=".concat(r(u),"&text=").concat(r(l||n))},messenger:{key:"messenger",label:"Share on Messenger",href:"https://www.facebook.com/dialog/send?link=".concat(r(u),"&redirect_uri=").concat(r(u))}};return(Array.isArray(t)&&t.length?t:["telegram","linkedin","reddit","pinterest","line","email"]).filter(e=>d[e]).map(e=>d[e])}(t,e.platforms).forEach(e=>{var t=document.createElement("li"),u=document.createElement("a");u.className="ettpd-share-item",u.href=e.href,u.target="_blank",u.rel="noopener noreferrer",u.setAttribute("aria-label",e.label);var n=document.createElement("span");n.className="ettpd-share-icon icon-".concat(e.key);var o=document.createElement("span");o.className="ettpd-share-text",o.textContent=e.label,u.appendChild(n),u.appendChild(o),t.appendChild(u),a.appendChild(t)});var o=document.createElement("div");o.className="ettpd-share-actions";var r=document.createElement("button");if(r.type="button",r.className="ettpd-share-action ettpd-tab-btn",r.textContent="Copy link",r.addEventListener("click",nt(function*(){yield function(e){return pu.apply(this,arguments)}(t.url),r.textContent="Copied!",setTimeout(()=>r.textContent="Copy link",1200)})),o.appendChild(r),navigator.share){var l=document.createElement("button");l.type="button",l.className="ettpd-share-action ettpd-tab-btn",l.textContent="System shareâ€¦",l.addEventListener("click",nt(function*(){try{yield navigator.share({url:t.url,title:t.title,text:t.text})}catch(e){}})),o.appendChild(l)}Ve({children:[u,o],onClose:()=>{}})}function pu(){return(pu=nt(function*(e){try{yield navigator.clipboard.writeText(e)}catch(u){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}})).apply(this,arguments)}window.rerender=Ot;var Fu,mu,vu=e=>{var t,u;return String(null!==(t=null!==(u=null==e?void 0:e.id)&&void 0!==u?u:null==e?void 0:e.videoId)&&void 0!==t?t:"")},Cu=e=>!(!e||e.downloaderHasLowConfidence),gu=e=>{var t;return!!(null!=e&&null!==(t=e.video)&&void 0!==t&&t.playAddr||null!=e&&e.url)};function hu(e,t){return!(t&&(!Cu(e)||Cu(t))&&(!Cu(e)&&Cu(t)||(!gu(e)||gu(t))&&(!gu(e)&&gu(t),1)))}function Eu(e){var t=vu(e);return!!t&&hu(e,U.allItemsEverSeen[t])}function fu(e){try{var t,u;if(!Array.isArray(e)||0===e.length)return;var n=!1;for(var a of e){var o=vu(a);o&&Eu(a)&&(U.allItemsEverSeen[o]=a,n=!0)}var r=null===(t=window)||void 0===t||null===(t=t.__$UNIVERSAL_DATA$__)||void 0===t?void 0:t.__DEFAULT_SCOPE__,l=null==r||null===(u=r["webapp.video-detail"])||void 0===u||null===(u=u.itemInfo)||void 0===u?void 0:u.itemStruct;if(vu(l)){var i=vu(l);hu(l,U.allItemsEverSeen[i])&&(U.allItemsEverSeen[i]=l,n=!0)}var d=(null==r?void 0:r["webapp.updated-items"])||[];for(var s of d){var c=vu(s);c&&hu(s,U.allItemsEverSeen[c])&&(U.allItemsEverSeen[c]=s,n=!0)}if(!n)return void Ot({forced:!1});Ot({forced:!0})}catch(e){U.debug.active}}function Au(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function yu(e){return function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){Au(o,n,a,r,l,"next",e)}function l(e){Au(o,n,a,r,l,"throw",e)}r(void 0)})}}function wu(){return pe()}function bu(){var e=U.scrapperDetails;if(("ongoing"===e.scrappingStage||"downloading"===e.scrappingStage||"initiated"===e.scrappingStage)&&e.originalPath&&e.originalUsername){var t=window.location.pathname,u=at(),n=ot(),a=t!==e.originalPath,o=u!==e.originalUsername,r=!1;"collection"===e.selectedTab&&e.selectedCollectionName&&(r=n.collectionName!==e.selectedCollectionName),(a||o||r)&&(U.downloadPreferences.autoScrollMode="off",U.scrapperDetails.isAutoBatchDownloading=!1,U.downloading.isDownloadingAll=!1,U.downloading.isActive=!1,U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.paused=!0,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ce("Scrapping Abandoned","You navigated away from the original target (".concat(e.originalUsername||e.originalPath,"). Auto-scrolling and automatic downloads have been stopped. You can manually download items if needed.")),U.ui.isScrapperBoxOpen&&Ne(),Me())}}document.addEventListener("DOMContentLoaded",()=>{Ot({forced:!0})}),window.ettpd__handleFoundItems=fu,Fu=history.pushState,mu=history.replaceState,history.pushState=function(){Fu.apply(this,arguments),window.dispatchEvent(new Event("locationchange"))},history.replaceState=function(){mu.apply(this,arguments),window.dispatchEvent(new Event("locationchange"))},window.addEventListener("popstate",()=>window.dispatchEvent(new Event("locationchange"))),window.addEventListener("locationchange",()=>{Ge(),bu()});var Bu=(e,t,u,n)=>({name:e,run:t,interval:u,shouldRun:n,lastRun:-1/0}),xu=[Bu("download-btn-cleanup",function(){var e=window.location.pathname.match(/^\/@[^/]+\/(photo|video)\/([A-Za-z0-9]+)$/),t=null==e?void 0:e[2];document.querySelectorAll(".download-btn-container").forEach(e=>{e.querySelector("button.download-btn.".concat(CSS.escape(t)))||e.remove()})},5e3),Bu("download-btn-inject",function(){document.querySelectorAll('div[data-e2e="explore-item"]').forEach(e=>{var t,u=null===(t=e.querySelector("a[href*='/video/']"))||void 0===t?void 0:t.getAttribute("href"),n=null==u?void 0:u.match(/\/video\/(\d+)/);n&&!e.querySelector(".ettpd-download-btn")&&function(e,t){var u,n,a,o=e.querySelector(".xgplayer-container");if(o){var r=mt(t)||(null===(u=e.querySelector('[data-e2e="explore-card-user-unique-id"]'))||void 0===u||null===(u=u.textContent)||void 0===u?void 0:u.trim())||(null===(n=lt(null===(a=e.closest('[data-e2e="explore-item"]'))||void 0===a?void 0:a.parentElement))||void 0===n?void 0:n.username)||pt()||at()||"username";ze({wrapperId:"explore-".concat(t),author:r,videoId:t,getVideoSrc:()=>{var e,u;return ct(t)||(null===(e=o.querySelector("video source"))||void 0===e?void 0:e.src)||(null===(u=o.querySelector("video"))||void 0===u?void 0:u.src)},parentEl:o,isSmallView:Ft(),from:"createExploreDownloadButton"})}}(e,n[1])}),document.querySelectorAll("div[id^='xgwrapper-']").forEach(e=>{var t=e.id.match(/xgwrapper-\d+-(\d+)/);t&&!e.querySelector(".ettpd-download-btn")&&We(e,t[1])}),document.querySelectorAll("div[id^='column-item-video-container-']").forEach(e=>{var t,u;if(e.querySelector("div[class*='DivPlayerContainer']")){var n=null===(t=e.querySelector("a[href*='/video/'], a[href*='/photo/']"))||void 0===t?void 0:t.getAttribute("href"),a=null==n?void 0:n.match(/\/(video|photo)\/(\d+)/);if(a){var o=a[2];e.querySelector(".ettpd-download-btn")||e.matches(":hover")&&We(null===(u=Array.from(e.children))||void 0===u?void 0:u.at(0),o)}}}),[...document.querySelectorAll("a[href*='/video/']")].map(e=>e.closest("div")).filter(e=>"DIV"===(null==e?void 0:e.tagName)).forEach(e=>{var t=e.querySelector("a[href*='/video/']"),u=null==t?void 0:t.getAttribute("href"),n=null==u?void 0:u.match(/\/video\/(\d+)/),a=null==n?void 0:n[1];if(a){var o=function(e){if(!(e&&e instanceof Element))return null;for(var t=[e];t.length;){var u=t.shift();if("DIV"===u.nodeName&&(u.className.includes("DivPlayerContainer")||u.className.includes("DivPlayerWrapper")||u.className.includes("DivPlayerContainer")))return u;for(var n of u.children)t.push(n)}return null}(e);if(o&&o&&o.className.includes("DivPlayerWrapper")&&!o.querySelector(".ettpd-download-btn")){var r,l=mt(a)||(null===(r=lt(e))||void 0===r?void 0:r.username)||at()||"username";ze({wrapperId:"grid-".concat(a),author:l,videoId:a,getVideoSrc:()=>{var e,t;return ct(a)||(null===(e=o.querySelector("video source"))||void 0===e?void 0:e.src)||(null===(t=o.querySelector("video"))||void 0===t?void 0:t.src)},parentEl:o.parentElement.parentElement,isSmallView:!0,from:"safeGridObserver"})}}})},900),Bu("scan-and-inject",Ge,1500),Bu("auto-next-listener",function(){try{var e=document.querySelector("video");if(!e)return;e.onended=()=>{"onVideoEnd"==U.downloadPreferences.autoScrollMode&&ht()&&Et()}}catch(e){}},2500),Bu("initial-data",function(){var e,t,u;if(wu())try{try{var n,a,o=(null===(n=window)||void 0===n||null===(n=n.SIGI_STATE)||void 0===n||null===(n=n.ItemList["user-post"])||void 0===n?void 0:n.preloadList)||[],r=(null===(a=window)||void 0===a||null===(a=a.SIGI_STATE)||void 0===a?void 0:a.ItemModule)||{};fu(o.map(e=>r[e.id]).filter(Boolean))}catch(e){}try{var l,i,d=null===(l=document.getElementById("__NEXT_DATA__"))||void 0===l?void 0:l.innerText;fu(((null===(i=JSON.parse(d||"{}").props)||void 0===i||null===(i=i.pageProps)||void 0===i?void 0:i.items)||[]).filter(e=>e.id))}catch(e){}try{var s=function(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,n=e,a=uu(n),o=lu(a,t,u);if(o)return o;for(var r=0;r++<5;){var l,i;if(null!==(l=a)&&void 0!==l&&l.return){if(o=lu(a=a.return,t,u))return o}else{if(!(n=(null===(i=n)||void 0===i?void 0:i.parentElement)||null))break;if((a=uu(n))&&(o=lu(a,t,u)))return o}}return null}(Dt(),(e=Dt())?function(e){var t,u,n,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;if(!e)return null;var l=0,i=e=>!e||l++>=r?null:iu(e),d=i(e)||i(null===(t=e.querySelector)||void 0===t?void 0:t.call(e,'[id^="xgwrapper-"]'))||(t=>{var u=null===(t=e.querySelectorAll)||void 0===t?void 0:t.call(e,'[id^="xgwrapper-"], a[href*="/video/"], [data-e2e*="video"], [data-video-id]');for(var n of u){var a=i(n);if(a)return a}return null})();if(d)return d;var s=e.parentElement;if(s)for(var c=Array.from(s.children),D=c.indexOf(e),p=1;p<=o;p++){var F=c[D-p],m=c[D+p],v=i(F)||(null==F?void 0:F.querySelector)&&i(F.querySelector('[id^="xgwrapper-"]'))||null;if(v)return v;var C=i(m)||(null==m?void 0:m.querySelector)&&i(m.querySelector('[id^="xgwrapper-"]'))||null;if(C)return C}for(var g=e.parentElement,h=0;g&&h++<4&&l<r;){var E=i(g)||((e,t)=>{var u=null===(e=(t=g).querySelectorAll)||void 0===e?void 0:e.call(t,'[id^="xgwrapper-"]');for(var n of u){var a=i(n);if(a)return a}return null})();if(E)return E;g=g.parentElement}var f=null===(u=(n=document).querySelectorAll)||void 0===u?void 0:u.call(n,'[id^="xgwrapper-"]'),A=null,y=1/0,w=null===(a=e.getBoundingClientRect)||void 0===a?void 0:a.call(e);for(var b of f||[]){var B;if(l++>=r)break;var x=iu(b);if(x){var S=null===(B=b.getBoundingClientRect)||void 0===B?void 0:B.call(b);if(S&&w){var k=Math.abs((S.top+S.bottom)/2-(w.top+w.bottom)/2);k<y&&(y=k,A=x)}}}return A||null}(e):null);null!=s&&s.item&&(s.item.downloaderHasLowConfidence=!0,fu([s.item]))}catch(e){U.debug.active}try{var c=(t=Array.from(document.querySelectorAll('[class*="DivPlayerContainer"]')),u=e=>{if(!Array.isArray(e))return null;var t=[];for(var u of([6,5].forEach(u=>{var n,a=e[u];null!=a&&null!==(n=a.props)&&void 0!==n&&n.item&&t.push(a.props.item)}),e)){var n;null!=u&&null!==(n=u.props)&&void 0!==n&&n.item?t.push(u.props.item):null!=u&&u.item?t.push(u.item):null!=u&&u.props&&"object"==typeof u.props&&t.push(u.props)}var a=e=>{if(!e||"object"!=typeof e)return-1;var t=0;return"string"==typeof e.id&&e.id.length&&(t+=10),"AIGCDescription"in e&&(t+=5),"music"in e&&(t+=3),("stats"in e||"statsV2"in e)&&(t+=3),"video"in e&&(t+=2),"desc"in e&&(t+=1),t},o=null,r=-1;for(var l of t){var i=a(l);i>r&&(o=l,r=i)}return o},t.map(e=>{var t=(e=>{for(var t in e)if(t.startsWith("__reactFiber$"))return e[t];return null})(e);if(!t)return null;var n=[null==t?void 0:t.pendingProps,null==t?void 0:t.memoizedProps].filter(Boolean),a=null;for(var o of n){var r;if(null!==(r=a=u(null==o?void 0:o.children))&&void 0!==r&&r.id)break}if(!a||!a.id){var l=e=>e&&"string"==typeof e.id?e:null;for(var i of n){var d;if(l(i)){a=i;break}if(l(null==i?void 0:i.props)){a=i.props;break}if(l(null==i||null===(d=i.props)||void 0===d?void 0:d.item)){a=i.props.item;break}}}if(!a||"string"!=typeof a.id)return null;if(!a.authorId){var s=(e=>{var t,u=e.closest('a[href*="/@"]')||e.querySelector('a[href*="/@"]');return(null==u||null===(t=u.getAttribute("href"))||void 0===t||null===(t=t.match(/\/@([\w._-]+)/))||void 0===t?void 0:t[1])||null})(e);s&&(a.authorId=s)}return a}).filter(Boolean));if(!c||!c.length)return;for(var D=[],p=0;p<c.length;p++){var F,m,v,C=c[p],g=null!==(F=null!==(m=null==C?void 0:C.id)&&void 0!==m?m:null==C?void 0:C.aweme_id)&&void 0!==F?F:null==C||null===(v=C.video)||void 0===v?void 0:v.id,h=null==g?null:String(g).trim();if(h&&Eu(C))try{var E=C,f=null==(null==E?void 0:E.id)?null:String(E.id).trim();if(!f||f!==h)continue;U.allItemsEverSeen[f]=C,D.push(E)}catch(e){U.debug.active}}D.length&&fu(D)}catch(e){U.debug.active}}catch(e){}},4e3)],Su=null;function ku(){null==Su&&(Su=window.requestAnimationFrame(()=>function(){if(wu()){Su=null;var e=performance.now();for(var t of xu)if(!(e-t.lastRun<t.interval)&&("function"!=typeof t.shouldRun||t.shouldRun())){t.lastRun=e;try{t.run()}catch(e){}}}}()))}function Nu(){var e=document.querySelector('[data-e2e="user-post-item-list"]');if(e){var t=e.querySelectorAll('[data-e2e="user-post-item"]');if(t.length>0)return{list:e,items:t,strategy:"user-post-list"}}if(e=document.querySelector('[data-e2e="challenge-item-list"]')){var u=e.querySelectorAll('[data-e2e="challenge-item"]');if(u.length>0)return{list:e,items:u,strategy:"challenge-list"}}if(e=document.querySelector('[data-e2e="collection-item-list"]')){var n=e.querySelectorAll('[data-e2e="collection-item"]');if(n.length>0)return{list:e,items:n,strategy:"collection-list"}}return{list:null,items:[],strategy:null}}function Tu(){return Iu.apply(this,arguments)}function Iu(){return(Iu=yu(function*(){var{list:e,items:t}=Nu();if(!e||0===t.length)return!0;var u=U.allDirectLinks.length,n=Math.min(20,t.length);if(0===n)return!0;var a=t[t.length-n];if(a){var o="always"===U.downloadPreferences.autoScrollMode;a.scrollIntoView({behavior:"smooth",block:"center"}),yield yt(2e3);var r=Nu().items,l=r.length>0?r[r.length-1]:t[t.length-1];l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),yield yt(2e3)),o&&(U.downloadPreferences.autoScrollMode="always")}for(var i=0;i<10;i++){if(yield yt(2e3),U.allDirectLinks.length>u)return!1;if((U.allDirectLinks||[]).filter(e=>!U.downloadedURLs.includes(e.url)).length>0)return!1}return!0})).apply(this,arguments)}function Pu(){if(wu()&&!U.scrapperDetails.isAutoBatchDownloading&&("ongoing"===U.scrapperDetails.scrappingStage||"downloading"===U.scrapperDetails.scrappingStage)){var e=U.scrapperDetails;e.originalPath&&e.originalPath!==window.location.pathname?bu():(U.scrapperDetails.isAutoBatchDownloading=!0,U.scrapperDetails.currentBatch=1,U.scrapperDetails.downloadedInBatches=0,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),function(){return t.apply(this,arguments)}().catch(e=>{U.scrapperDetails.isAutoBatchDownloading=!1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails))}))}function t(){return(t=yu(function*(){for(;"ongoing"===U.scrapperDetails.scrappingStage||"downloading"===U.scrapperDetails.scrappingStage;){var e=U.scrapperDetails;if(e.originalPath&&e.originalPath!==window.location.pathname)return void bu();if("completed"===U.scrapperDetails.scrappingStage&&U.scrapperDetails.paused)return void(U.scrapperDetails.isAutoBatchDownloading=!1);for(;U.scrapperDetails.paused;)yield yt(1e3);var t=U.allDirectLinks||[],u=t.filter(e=>!U.downloadedURLs.includes(e.url));if(0!==u.length){var n=U.scrapperDetails.currentBatch,a=yield St(u,n);U.scrapperDetails.currentBatch+=1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),a.success,Me(),yield yt(500)}else{if("always"!==U.downloadPreferences.autoScrollMode&&t.every(e=>U.downloadedURLs.includes(e.url))){if(yield Tu())return U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.isAutoBatchDownloading=!1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),U.ui.isScrapperBoxOpen&&Ne(),void Lu();continue}yield yt(2e3)}}"completed"!==U.scrapperDetails.scrappingStage&&(U.allDirectLinks||[]).every(e=>U.downloadedURLs.includes(e.url))&&(yield Tu())&&(U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.isAutoBatchDownloading=!1,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),U.ui.isScrapperBoxOpen&&Ne(),Lu())})).apply(this,arguments)}}function Lu(){var e=document.querySelector(".ettpd-scrapper-completion-modal");e&&document.body.removeChild(e);var t="dark"===fe()?"ettpd-theme-dark":"ettpd-theme-classic",u=document.createElement("div");u.className="ettpd-modal-overlay ettpd-scrapper-completion-modal ".concat(t);var n=document.createElement("div");n.className="ettpd-modal-box ettpd-completion-card";var a=document.createElement("div");a.className="ettpd-completion-badge",a.textContent="Auto-scroll";var o=document.createElement("h3");o.className="ettpd-completion-title",o.textContent="Scraping finished";var r=document.createElement("p");r.className="ettpd-completion-message",r.textContent="We downloaded everything we could find. Want us to keep exploring in case TikTok loads more posts?";var l=document.createElement("div");l.className="ettpd-completion-tip",l.innerHTML="<strong>Pro tip:</strong> Scroll a bit manually to nudge TikTok to load extra items, then hit continue to sweep them up.";var i=document.createElement("div");i.className="ettpd-modal-actions";var d=document.createElement("button");d.textContent="Continue & rescan",d.className="ettpd-modal-button primary";var s=()=>{U.scrapperDetails.scrappingStage="ongoing",U.scrapperDetails.isAutoBatchDownloading=!1,"off"===U.downloadPreferences.autoScrollMode&&(U.downloadPreferences.autoScrollMode="always"),localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),document.body.contains(u)&&document.body.removeChild(u),Pu()};d.onclick=s;var c=document.createElement("button");he(c,"Download CSV","download"),c.className="ettpd-modal-button secondary",c.onclick=()=>{var e=(U.allDirectLinks||[]).filter(e=>U.downloadedURLs.includes(e.url));0!==e.length?(ft(e),Ce("CSV Export Started","Exporting ".concat(e.length," downloaded items to CSV file."))):Ce("No items to export","No downloaded items found to export to CSV.")};var p=document.createElement("button");p.textContent="End Scrapping",p.className="ettpd-modal-button secondary",p.onclick=()=>{U.scrapperDetails.scrappingStage="completed",U.scrapperDetails.isAutoBatchDownloading=!1,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,U.scrapperDetails.paused=!1,U.downloadPreferences.autoScrollMode="off",U.downloading.isDownloadingAll=!1,U.downloading.isActive=!1,U.scrapperDetails.originalPath=null,U.scrapperDetails.originalUsername=null,U.scrapperDetails.originalCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),document.body.contains(u)&&document.body.removeChild(u),U.ui.isScrapperBoxOpen&&Ne(),Me()},u.onclick=e=>{e.target===u&&s()},i.appendChild(d),i.appendChild(c),i.appendChild(p),n.appendChild(a),n.appendChild(o),n.appendChild(r),n.appendChild(l),n.appendChild(i),u.appendChild(n),document.body.appendChild(u)}function Ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8e3;if(wu()){!function(){var e,t=document.getElementById("autoSwipeUI");if(t)t.style.display="flex";else{(t=document.createElement("div")).id="autoSwipeUI",t.style.position="fixed",t.style.bottom="8px",t.style.right="10px",t.style.zIndex="99999",t.style.backgroundColor="rgba(0,0,0,0.7)",t.style.color="#fff",t.style.padding="8px 12px",t.style.borderRadius="6px",t.style.fontSize="14px",t.style.fontFamily="sans-serif",t.style.display="off"!=U.downloadPreferences.autoScrollMode?"flex":"none",t.style.alignItems="center",t.style.gap="10px",t.style.zIndex="9999";var u=document.createElement("span");u.id="swipeTimerText",u.textContent="Next in 0s";var n=document.createElement("button");n.id="pauseSwipeBtn",n.textContent="Pause",n.style.padding="4px 8px",n.style.background="#f44336",n.style.border="none",n.style.color="#fff",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.onclick=()=>{"off"!=U.downloadPreferences.autoScrollMode&&(U.downloadPreferences.autoScrollModePrev=U.downloadPreferences.autoScrollMode),U.downloadPreferences.autoScrollMode="off"==U.downloadPreferences.autoScrollMode&&U.downloadPreferences.autoScrollModePrev||"off",n.textContent="off"!=U.downloadPreferences.autoScrollMode?"Pause":"Resume","off"!=U.downloadPreferences.autoScrollMode?Ou():(clearTimeout(U.ui.autoSwipeConfigurations.nextClickTimeout),clearInterval(U.ui.autoSwipeConfigurations.countdownInterval)),Ot({forced:!0})},t.appendChild(u),t.appendChild(n),null===(e=document.body)||void 0===e||e.appendChild(t)}}();var u=document.getElementById("swipeTimerText");n()}function n(){return a.apply(this,arguments)}function a(){return a=yu(function*(){if(U.debug.active,"initiated"==U.scrapperDetails.scrappingStage&&!U.scrapperDetails.locked){var a,o,r="ğŸ”¥ Scraping in progress â€” sit back and watch the magic!";if(U.downloadPreferences.disableConfetti?Gt(r):Xt("tier",r),!U.scrapperDetails.originalPath){U.scrapperDetails.originalPath=window.location.pathname,U.scrapperDetails.originalUsername=at();var l=ot();l.isCollection&&(U.scrapperDetails.originalCollectionName=l.collectionName)}if(U.scrapperDetails.scrappingStage="ongoing",U.ui.isScrapperBoxOpen=!0,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),"collection"!=U.scrapperDetails.selectedTab){var i=yield Zt(3e4),d=U.scrapperDetails.selectedTab;if(!(o=i[d])){var s=eu(d||"unknown");return U.scrapperDetails.scrappingStage=null,U.scrapperDetails.selectedTab=null,U.scrapperDetails.selectedCollectionName=null,localStorage.setItem(D,JSON.stringify(U.scrapperDetails)),Ce("Tab not found",s+". Please ensure the tab is visible on the page and try again."),void(U.ui.isScrapperBoxOpen&&Ne())}}U.allDirectLinks=[],U.allItemsEverSeen={},U.displayedState.itemsHash="",U.displayedState.path="",null===(a=o)||void 0===a||a.click(),U.downloadPreferences.autoScrollMode="always",setTimeout(()=>{Pu()},1e3)}var c=Math.floor(Math.random()*(t-e))+e;U.ui.autoSwipeConfigurations.remainingTime=Math.floor(c/1e3);var p=document.getElementById("autoSwipeUI");p&&(p.style.display="always"==U.downloadPreferences.autoScrollMode?"flex":"none"),U.debug.active,U.ui.autoSwipeConfigurations.countdownInterval=setInterval(()=>{"always"==U.downloadPreferences.autoScrollMode&&(u.textContent="Next Auto Scroll in ".concat(Math.max(0,U.ui.autoSwipeConfigurations.remainingTime--),"s"),U.ui.autoSwipeConfigurations.remainingTime<0&&clearInterval(U.ui.autoSwipeConfigurations.countdownInterval))},1e3),U.ui.autoSwipeConfigurations.nextClickTimeout=setTimeout(yu(function*(){U.debug.active,clearInterval(U.ui.autoSwipeConfigurations.countdownInterval),ht()&&"always"==U.downloadPreferences.autoScrollMode?Et():"always"==U.downloadPreferences.autoScrollMode&&(function(){if("always"!=U.downloadPreferences.autoScrollMode||Ct())U.debug.active;else{var{items:e}=vt(),t=e[e.length-1];null==t||t.scrollIntoView({behavior:"smooth",block:"center"})}}(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,{items:u}=vt(),n=u.length;setTimeout(()=>{var{items:t}=vt(),u=t.length,a=gt(),o=Ct();u===n&&!a&&o&&(null==e||e())},t)}(()=>{"ongoing"==U.scrapperDetails.scrappingStage&&(U.downloadPreferences.autoScrollMode="off")})),n()}),c)}),a.apply(this,arguments)}}function Mu(e,t,u,n,a,o,r){try{var l=e[o](r),i=l.value}catch(e){return void u(e)}l.done?t(i):Promise.resolve(i).then(n,a)}function Ru(e){return function(){var t=this,u=arguments;return new Promise(function(n,a){var o=e.apply(t,u);function r(e){Mu(o,n,a,r,l,"next",e)}function l(e){Mu(o,n,a,r,l,"throw",e)}r(void 0)})}}setTimeout(Ru(function*(){if(!pe()){var e=document.getElementById(f);return e&&e.remove(),U.ui.isDownloaderClosed=!0,void qe()}!function(){try{var e=U.downloadPreferences.fullPathTemplate,t=Ut();if(!e||!t)return!1;if(e.label!==t.label)return!1;if(e.template===t.template)return!1;var u=et(et(et({},t),e),{},{template:t.template,example:t.example});U.downloadPreferences.fullPathTemplate=u;var n=Rt(),a=n.findIndex(e=>e.label===t.label);return-1!==a&&(n[a]=u,_t(n)),qt(),Ce("Template Upgraded",'Your active template "'.concat(t.label,'" has been updated to the latest version.'),6e3),!0}catch(e){return!1}}(),[1,3,5,10,15,20,30,60,180].forEach(e=>setTimeout(()=>{pe()&&Object.keys(U.allItemsEverSeen).length>U.allDirectLinks.length&&Ot()},1e3*e)),wu()&&(ku(),setInterval(()=>ku(),600),setTimeout(()=>{Ou()},5e3)),Ot({forced:!0}),U.debug.active}),1e3)})();